function cg(i,r){for(var n=0;n<r.length;n++){const o=r[n];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in i)){const u=Object.getOwnPropertyDescriptor(o,l);u&&Object.defineProperty(i,l,u.get?u:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function eu(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function dg(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var r=i.default;if(typeof r=="function"){var n=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var l=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:function(){return i[o]}})}),n}var vl={exports:{}},Ns={},yl={exports:{}},de={};var ph;function hg(){if(ph)return de;ph=1;var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.iterator;function k(N){return N===null||typeof N!="object"?null:(N=x&&N[x]||N["@@iterator"],typeof N=="function"?N:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function j(N,U,ce){this.props=N,this.context=U,this.refs=C,this.updater=ce||E}j.prototype.isReactComponent={},j.prototype.setState=function(N,U){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,U,"setState")},j.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function D(){}D.prototype=j.prototype;function L(N,U,ce){this.props=N,this.context=U,this.refs=C,this.updater=ce||E}var $=L.prototype=new D;$.constructor=L,b($,j.prototype),$.isPureReactComponent=!0;var q=Array.isArray,ee=Object.prototype.hasOwnProperty,R={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function A(N,U,ce){var he,ge={},ve=null,Se=null;if(U!=null)for(he in U.ref!==void 0&&(Se=U.ref),U.key!==void 0&&(ve=""+U.key),U)ee.call(U,he)&&!I.hasOwnProperty(he)&&(ge[he]=U[he]);var we=arguments.length-2;if(we===1)ge.children=ce;else if(1<we){for(var Te=Array(we),gt=0;gt<we;gt++)Te[gt]=arguments[gt+2];ge.children=Te}if(N&&N.defaultProps)for(he in we=N.defaultProps,we)ge[he]===void 0&&(ge[he]=we[he]);return{$$typeof:i,type:N,key:ve,ref:Se,props:ge,_owner:R.current}}function W(N,U){return{$$typeof:i,type:N.type,key:U,ref:N.ref,props:N.props,_owner:N._owner}}function ne(N){return typeof N=="object"&&N!==null&&N.$$typeof===i}function be(N){var U={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ce){return U[ce]})}var je=/\/+/g;function Me(N,U){return typeof N=="object"&&N!==null&&N.key!=null?be(""+N.key):U.toString(36)}function ot(N,U,ce,he,ge){var ve=typeof N;(ve==="undefined"||ve==="boolean")&&(N=null);var Se=!1;if(N===null)Se=!0;else switch(ve){case"string":case"number":Se=!0;break;case"object":switch(N.$$typeof){case i:case r:Se=!0}}if(Se)return Se=N,ge=ge(Se),N=he===""?"."+Me(Se,0):he,q(ge)?(ce="",N!=null&&(ce=N.replace(je,"$&/")+"/"),ot(ge,U,ce,"",function(gt){return gt})):ge!=null&&(ne(ge)&&(ge=W(ge,ce+(!ge.key||Se&&Se.key===ge.key?"":(""+ge.key).replace(je,"$&/")+"/")+N)),U.push(ge)),1;if(Se=0,he=he===""?".":he+":",q(N))for(var we=0;we<N.length;we++){ve=N[we];var Te=he+Me(ve,we);Se+=ot(ve,U,ce,Te,ge)}else if(Te=k(N),typeof Te=="function")for(N=Te.call(N),we=0;!(ve=N.next()).done;)ve=ve.value,Te=he+Me(ve,we++),Se+=ot(ve,U,ce,Te,ge);else if(ve==="object")throw U=String(N),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Se}function G(N,U,ce){if(N==null)return N;var he=[],ge=0;return ot(N,he,"","",function(ve){return U.call(ce,ve,ge++)}),he}function fe(N){if(N._status===-1){var U=N._result;U=U(),U.then(function(ce){(N._status===0||N._status===-1)&&(N._status=1,N._result=ce)},function(ce){(N._status===0||N._status===-1)&&(N._status=2,N._result=ce)}),N._status===-1&&(N._status=0,N._result=U)}if(N._status===1)return N._result.default;throw N._result}var ue={current:null},V={transition:null},se={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:V,ReactCurrentOwner:R};function J(){throw Error("act(...) is not supported in production builds of React.")}return de.Children={map:G,forEach:function(N,U,ce){G(N,function(){U.apply(this,arguments)},ce)},count:function(N){var U=0;return G(N,function(){U++}),U},toArray:function(N){return G(N,function(U){return U})||[]},only:function(N){if(!ne(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},de.Component=j,de.Fragment=n,de.Profiler=l,de.PureComponent=L,de.StrictMode=o,de.Suspense=p,de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,de.act=J,de.cloneElement=function(N,U,ce){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var he=b({},N.props),ge=N.key,ve=N.ref,Se=N._owner;if(U!=null){if(U.ref!==void 0&&(ve=U.ref,Se=R.current),U.key!==void 0&&(ge=""+U.key),N.type&&N.type.defaultProps)var we=N.type.defaultProps;for(Te in U)ee.call(U,Te)&&!I.hasOwnProperty(Te)&&(he[Te]=U[Te]===void 0&&we!==void 0?we[Te]:U[Te])}var Te=arguments.length-2;if(Te===1)he.children=ce;else if(1<Te){we=Array(Te);for(var gt=0;gt<Te;gt++)we[gt]=arguments[gt+2];he.children=we}return{$$typeof:i,type:N.type,key:ge,ref:ve,props:he,_owner:Se}},de.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:u,_context:N},N.Consumer=N},de.createElement=A,de.createFactory=function(N){var U=A.bind(null,N);return U.type=N,U},de.createRef=function(){return{current:null}},de.forwardRef=function(N){return{$$typeof:m,render:N}},de.isValidElement=ne,de.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:fe}},de.memo=function(N,U){return{$$typeof:v,type:N,compare:U===void 0?null:U}},de.startTransition=function(N){var U=V.transition;V.transition={};try{N()}finally{V.transition=U}},de.unstable_act=J,de.useCallback=function(N,U){return ue.current.useCallback(N,U)},de.useContext=function(N){return ue.current.useContext(N)},de.useDebugValue=function(){},de.useDeferredValue=function(N){return ue.current.useDeferredValue(N)},de.useEffect=function(N,U){return ue.current.useEffect(N,U)},de.useId=function(){return ue.current.useId()},de.useImperativeHandle=function(N,U,ce){return ue.current.useImperativeHandle(N,U,ce)},de.useInsertionEffect=function(N,U){return ue.current.useInsertionEffect(N,U)},de.useLayoutEffect=function(N,U){return ue.current.useLayoutEffect(N,U)},de.useMemo=function(N,U){return ue.current.useMemo(N,U)},de.useReducer=function(N,U,ce){return ue.current.useReducer(N,U,ce)},de.useRef=function(N){return ue.current.useRef(N)},de.useState=function(N){return ue.current.useState(N)},de.useSyncExternalStore=function(N,U,ce){return ue.current.useSyncExternalStore(N,U,ce)},de.useTransition=function(){return ue.current.useTransition()},de.version="18.3.1",de}var mh;function tu(){return mh||(mh=1,yl.exports=hg()),yl.exports}var gh;function fg(){if(gh)return Ns;gh=1;var i=tu(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(m,p,v){var y,x={},k=null,E=null;v!==void 0&&(k=""+v),p.key!==void 0&&(k=""+p.key),p.ref!==void 0&&(E=p.ref);for(y in p)o.call(p,y)&&!u.hasOwnProperty(y)&&(x[y]=p[y]);if(m&&m.defaultProps)for(y in p=m.defaultProps,p)x[y]===void 0&&(x[y]=p[y]);return{$$typeof:r,type:m,key:k,ref:E,props:x,_owner:l.current}}return Ns.Fragment=n,Ns.jsx=d,Ns.jsxs=d,Ns}var vh;function pg(){return vh||(vh=1,vl.exports=fg()),vl.exports}var h=pg(),H=tu();const Xr=eu(H);var Yi={},wl={exports:{}},mt={},xl={exports:{}},_l={};var yh;function mg(){return yh||(yh=1,(function(i){function r(V,se){var J=V.length;V.push(se);e:for(;0<J;){var N=J-1>>>1,U=V[N];if(0<l(U,se))V[N]=se,V[J]=U,J=N;else break e}}function n(V){return V.length===0?null:V[0]}function o(V){if(V.length===0)return null;var se=V[0],J=V.pop();if(J!==se){V[0]=J;e:for(var N=0,U=V.length,ce=U>>>1;N<ce;){var he=2*(N+1)-1,ge=V[he],ve=he+1,Se=V[ve];if(0>l(ge,J))ve<U&&0>l(Se,ge)?(V[N]=Se,V[ve]=J,N=ve):(V[N]=ge,V[he]=J,N=he);else if(ve<U&&0>l(Se,J))V[N]=Se,V[ve]=J,N=ve;else break e}}return se}function l(V,se){var J=V.sortIndex-se.sortIndex;return J!==0?J:V.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var p=[],v=[],y=1,x=null,k=3,E=!1,b=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(V){for(var se=n(v);se!==null;){if(se.callback===null)o(v);else if(se.startTime<=V)o(v),se.sortIndex=se.expirationTime,r(p,se);else break;se=n(v)}}function q(V){if(C=!1,$(V),!b)if(n(p)!==null)b=!0,fe(ee);else{var se=n(v);se!==null&&ue(q,se.startTime-V)}}function ee(V,se){b=!1,C&&(C=!1,D(A),A=-1),E=!0;var J=k;try{for($(se),x=n(p);x!==null&&(!(x.expirationTime>se)||V&&!be());){var N=x.callback;if(typeof N=="function"){x.callback=null,k=x.priorityLevel;var U=N(x.expirationTime<=se);se=i.unstable_now(),typeof U=="function"?x.callback=U:x===n(p)&&o(p),$(se)}else o(p);x=n(p)}if(x!==null)var ce=!0;else{var he=n(v);he!==null&&ue(q,he.startTime-se),ce=!1}return ce}finally{x=null,k=J,E=!1}}var R=!1,I=null,A=-1,W=5,ne=-1;function be(){return!(i.unstable_now()-ne<W)}function je(){if(I!==null){var V=i.unstable_now();ne=V;var se=!0;try{se=I(!0,V)}finally{se?Me():(R=!1,I=null)}}else R=!1}var Me;if(typeof L=="function")Me=function(){L(je)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,G=ot.port2;ot.port1.onmessage=je,Me=function(){G.postMessage(null)}}else Me=function(){j(je,0)};function fe(V){I=V,R||(R=!0,Me())}function ue(V,se){A=j(function(){V(i.unstable_now())},se)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_continueExecution=function(){b||E||(b=!0,fe(ee))},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return k},i.unstable_getFirstCallbackNode=function(){return n(p)},i.unstable_next=function(V){switch(k){case 1:case 2:case 3:var se=3;break;default:se=k}var J=k;k=se;try{return V()}finally{k=J}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(V,se){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var J=k;k=V;try{return se()}finally{k=J}},i.unstable_scheduleCallback=function(V,se,J){var N=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?N+J:N):J=N,V){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=J+U,V={id:y++,callback:se,priorityLevel:V,startTime:J,expirationTime:U,sortIndex:-1},J>N?(V.sortIndex=J,r(v,V),n(p)===null&&V===n(v)&&(C?(D(A),A=-1):C=!0,ue(q,J-N))):(V.sortIndex=U,r(p,V),b||E||(b=!0,fe(ee))),V},i.unstable_shouldYield=be,i.unstable_wrapCallback=function(V){var se=k;return function(){var J=k;k=se;try{return V.apply(this,arguments)}finally{k=J}}}})(_l)),_l}var wh;function gg(){return wh||(wh=1,xl.exports=mg()),xl.exports}var xh;function vg(){if(xh)return mt;xh=1;var i=tu(),r=gg();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},x={};function k(e){return p.call(x,e)?!0:p.call(y,e)?!1:v.test(e)?x[e]=!0:(y[e]=!0,!1)}function E(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function b(e,t,s,a){if(t===null||typeof t>"u"||E(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function C(e,t,s,a,c,f,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=c,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=g}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){j[e]=new C(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];j[t]=new C(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){j[e]=new C(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){j[e]=new C(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){j[e]=new C(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){j[e]=new C(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){j[e]=new C(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){j[e]=new C(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){j[e]=new C(e,5,!1,e.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function L(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(D,L);j[t]=new C(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(D,L);j[t]=new C(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(D,L);j[t]=new C(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){j[e]=new C(e,1,!1,e.toLowerCase(),null,!1,!1)}),j.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){j[e]=new C(e,1,!1,e.toLowerCase(),null,!0,!0)});function $(e,t,s,a){var c=j.hasOwnProperty(t)?j[t]:null;(c!==null?c.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(b(t,s,c,a)&&(s=null),a||c===null?k(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):c.mustUseProperty?e[c.propertyName]=s===null?c.type===3?!1:"":s:(t=c.attributeName,a=c.attributeNamespace,s===null?e.removeAttribute(t):(c=c.type,s=c===3||c===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var q=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ee=Symbol.for("react.element"),R=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),be=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),Me=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),V=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var J=Object.assign,N;function U(e){if(N===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return`
`+N+e}var ce=!1;function he(e,t){if(!e||ce)return"";ce=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(O){var a=O}Reflect.construct(e,[],t)}else{try{t.call()}catch(O){a=O}e.call(t.prototype)}else{try{throw Error()}catch(O){a=O}e()}}catch(O){if(O&&a&&typeof O.stack=="string"){for(var c=O.stack.split(`
`),f=a.stack.split(`
`),g=c.length-1,w=f.length-1;1<=g&&0<=w&&c[g]!==f[w];)w--;for(;1<=g&&0<=w;g--,w--)if(c[g]!==f[w]){if(g!==1||w!==1)do if(g--,w--,0>w||c[g]!==f[w]){var _=`
`+c[g].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=g&&0<=w);break}}}finally{ce=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?U(e):""}function ge(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function ve(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case R:return"Portal";case W:return"Profiler";case A:return"StrictMode";case Me:return"Suspense";case ot:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case be:return(e.displayName||"Context")+".Consumer";case ne:return(e._context.displayName||"Context")+".Provider";case je:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:ve(e.type)||"Memo";case fe:t=e._payload,e=e._init;try{return ve(e(t))}catch{}}return null}function Se(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function we(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Te(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gt(e){var t=Te(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var c=s.get,f=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(g){a=""+g,f.call(this,g)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(g){a=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bs(e){e._valueTracker||(e._valueTracker=gt(e))}function xu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=Te(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function Fs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ko(e,t){var s=t.checked;return J({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function _u(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=we(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bu(e,t){t=t.checked,t!=null&&$(e,"checked",t,!1)}function Eo(e,t){bu(e,t);var s=we(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jo(e,t.type,s):t.hasOwnProperty("defaultValue")&&jo(e,t.type,we(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Su(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function jo(e,t,s){(t!=="number"||Fs(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Fn=Array.isArray;function en(e,t,s,a){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&a&&(e[s].defaultSelected=!0)}else{for(s=""+we(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,a&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function No(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return J({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ku(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(n(92));if(Fn(s)){if(1<s.length)throw Error(n(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:we(s)}}function Eu(e,t){var s=we(t.value),a=we(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function ju(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Co(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vs,Cu=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,c){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,c)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vs=Vs||document.createElement("div"),Vs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vn(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var qn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pp=["Webkit","ms","Moz","O"];Object.keys(qn).forEach(function(e){pp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),qn[t]=qn[e]})});function Tu(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||qn.hasOwnProperty(e)&&qn[e]?(""+t).trim():t+"px"}function Pu(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,c=Tu(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,c):e[s]=c}}var mp=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function To(e,t){if(t){if(mp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function Po(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oo=null;function Ro(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Io=null,tn=null,rn=null;function Ou(e){if(e=hs(e)){if(typeof Io!="function")throw Error(n(280));var t=e.stateNode;t&&(t=hi(t),Io(e.stateNode,e.type,t))}}function Ru(e){tn?rn?rn.push(e):rn=[e]:tn=e}function Iu(){if(tn){var e=tn,t=rn;if(rn=tn=null,Ou(e),t)for(e=0;e<t.length;e++)Ou(t[e])}}function Au(e,t){return e(t)}function Du(){}var Ao=!1;function $u(e,t,s){if(Ao)return e(t,s);Ao=!0;try{return Au(e,t,s)}finally{Ao=!1,(tn!==null||rn!==null)&&(Du(),Iu())}}function Hn(e,t){var s=e.stateNode;if(s===null)return null;var a=hi(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(n(231,t,typeof s));return s}var Do=!1;if(m)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Do=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Do=!1}function gp(e,t,s,a,c,f,g,w,_){var O=Array.prototype.slice.call(arguments,3);try{t.apply(s,O)}catch(z){this.onError(z)}}var Kn=!1,qs=null,Hs=!1,$o=null,vp={onError:function(e){Kn=!0,qs=e}};function yp(e,t,s,a,c,f,g,w,_){Kn=!1,qs=null,gp.apply(vp,arguments)}function wp(e,t,s,a,c,f,g,w,_){if(yp.apply(this,arguments),Kn){if(Kn){var O=qs;Kn=!1,qs=null}else throw Error(n(198));Hs||(Hs=!0,$o=O)}}function Pr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Lu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uu(e){if(Pr(e)!==e)throw Error(n(188))}function xp(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(n(188));return t!==e?null:e}for(var s=e,a=t;;){var c=s.return;if(c===null)break;var f=c.alternate;if(f===null){if(a=c.return,a!==null){s=a;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===s)return Uu(c),e;if(f===a)return Uu(c),t;f=f.sibling}throw Error(n(188))}if(s.return!==a.return)s=c,a=f;else{for(var g=!1,w=c.child;w;){if(w===s){g=!0,s=c,a=f;break}if(w===a){g=!0,a=c,s=f;break}w=w.sibling}if(!g){for(w=f.child;w;){if(w===s){g=!0,s=f,a=c;break}if(w===a){g=!0,a=f,s=c;break}w=w.sibling}if(!g)throw Error(n(189))}}if(s.alternate!==a)throw Error(n(190))}if(s.tag!==3)throw Error(n(188));return s.stateNode.current===s?e:t}function Mu(e){return e=xp(e),e!==null?zu(e):null}function zu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zu(e);if(t!==null)return t;e=e.sibling}return null}var Bu=r.unstable_scheduleCallback,Fu=r.unstable_cancelCallback,_p=r.unstable_shouldYield,bp=r.unstable_requestPaint,Le=r.unstable_now,Sp=r.unstable_getCurrentPriorityLevel,Lo=r.unstable_ImmediatePriority,Vu=r.unstable_UserBlockingPriority,Ws=r.unstable_NormalPriority,kp=r.unstable_LowPriority,qu=r.unstable_IdlePriority,Ks=null,qt=null;function Ep(e){if(qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Ks,e,void 0,(e.current.flags&128)===128)}catch{}}var It=Math.clz32?Math.clz32:Cp,jp=Math.log,Np=Math.LN2;function Cp(e){return e>>>=0,e===0?32:31-(jp(e)/Np|0)|0}var Gs=64,Js=4194304;function Gn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Qs(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,c=e.suspendedLanes,f=e.pingedLanes,g=s&268435455;if(g!==0){var w=g&~c;w!==0?a=Gn(w):(f&=g,f!==0&&(a=Gn(f)))}else g=s&~c,g!==0?a=Gn(g):f!==0&&(a=Gn(f));if(a===0)return 0;if(t!==0&&t!==a&&(t&c)===0&&(c=a&-a,f=t&-t,c>=f||c===16&&(f&4194240)!==0))return t;if((a&4)!==0&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-It(t),c=1<<s,a|=e[s],t&=~c;return a}function Tp(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pp(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes;0<f;){var g=31-It(f),w=1<<g,_=c[g];_===-1?((w&s)===0||(w&a)!==0)&&(c[g]=Tp(w,t)):_<=t&&(e.expiredLanes|=w),f&=~w}}function Uo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hu(){var e=Gs;return Gs<<=1,(Gs&4194240)===0&&(Gs=64),e}function Mo(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Jn(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-It(t),e[t]=s}function Op(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var c=31-It(s),f=1<<c;t[c]=0,a[c]=-1,e[c]=-1,s&=~f}}function zo(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-It(s),c=1<<a;c&t|e[a]&t&&(e[a]|=t),s&=~c}}var xe=0;function Wu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ku,Bo,Gu,Ju,Qu,Fo=!1,Ys=[],or=null,ar=null,lr=null,Qn=new Map,Yn=new Map,ur=[],Rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yu(e,t){switch(e){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":Qn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(t.pointerId)}}function Xn(e,t,s,a,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:f,targetContainers:[c]},t!==null&&(t=hs(t),t!==null&&Bo(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Ip(e,t,s,a,c){switch(t){case"focusin":return or=Xn(or,e,t,s,a,c),!0;case"dragenter":return ar=Xn(ar,e,t,s,a,c),!0;case"mouseover":return lr=Xn(lr,e,t,s,a,c),!0;case"pointerover":var f=c.pointerId;return Qn.set(f,Xn(Qn.get(f)||null,e,t,s,a,c)),!0;case"gotpointercapture":return f=c.pointerId,Yn.set(f,Xn(Yn.get(f)||null,e,t,s,a,c)),!0}return!1}function Xu(e){var t=Or(e.target);if(t!==null){var s=Pr(t);if(s!==null){if(t=s.tag,t===13){if(t=Lu(s),t!==null){e.blockedOn=t,Qu(e.priority,function(){Gu(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);Oo=a,s.target.dispatchEvent(a),Oo=null}else return t=hs(s),t!==null&&Bo(t),e.blockedOn=s,!1;t.shift()}return!0}function Zu(e,t,s){Xs(e)&&s.delete(t)}function Ap(){Fo=!1,or!==null&&Xs(or)&&(or=null),ar!==null&&Xs(ar)&&(ar=null),lr!==null&&Xs(lr)&&(lr=null),Qn.forEach(Zu),Yn.forEach(Zu)}function Zn(e,t){e.blockedOn===t&&(e.blockedOn=null,Fo||(Fo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ap)))}function es(e){function t(c){return Zn(c,e)}if(0<Ys.length){Zn(Ys[0],e);for(var s=1;s<Ys.length;s++){var a=Ys[s];a.blockedOn===e&&(a.blockedOn=null)}}for(or!==null&&Zn(or,e),ar!==null&&Zn(ar,e),lr!==null&&Zn(lr,e),Qn.forEach(t),Yn.forEach(t),s=0;s<ur.length;s++)a=ur[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<ur.length&&(s=ur[0],s.blockedOn===null);)Xu(s),s.blockedOn===null&&ur.shift()}var nn=q.ReactCurrentBatchConfig,Zs=!0;function Dp(e,t,s,a){var c=xe,f=nn.transition;nn.transition=null;try{xe=1,Vo(e,t,s,a)}finally{xe=c,nn.transition=f}}function $p(e,t,s,a){var c=xe,f=nn.transition;nn.transition=null;try{xe=4,Vo(e,t,s,a)}finally{xe=c,nn.transition=f}}function Vo(e,t,s,a){if(Zs){var c=qo(e,t,s,a);if(c===null)aa(e,t,a,ei,s),Yu(e,a);else if(Ip(c,e,t,s,a))a.stopPropagation();else if(Yu(e,a),t&4&&-1<Rp.indexOf(e)){for(;c!==null;){var f=hs(c);if(f!==null&&Ku(f),f=qo(e,t,s,a),f===null&&aa(e,t,a,ei,s),f===c)break;c=f}c!==null&&a.stopPropagation()}else aa(e,t,a,null,s)}}var ei=null;function qo(e,t,s,a){if(ei=null,e=Ro(a),e=Or(e),e!==null)if(t=Pr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Lu(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ei=e,null}function ec(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sp()){case Lo:return 1;case Vu:return 4;case Ws:case kp:return 16;case qu:return 536870912;default:return 16}default:return 16}}var cr=null,Ho=null,ti=null;function tc(){if(ti)return ti;var e,t=Ho,s=t.length,a,c="value"in cr?cr.value:cr.textContent,f=c.length;for(e=0;e<s&&t[e]===c[e];e++);var g=s-e;for(a=1;a<=g&&t[s-a]===c[f-a];a++);return ti=c.slice(e,1<a?1-a:void 0)}function ri(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ni(){return!0}function rc(){return!1}function vt(e){function t(s,a,c,f,g){this._reactName=s,this._targetInst=c,this.type=a,this.nativeEvent=f,this.target=g,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(s=e[w],this[w]=s?s(f):f[w]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ni:rc,this.isPropagationStopped=rc,this}return J(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),t}var sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=vt(sn),ts=J({},sn,{view:0,detail:0}),Lp=vt(ts),Ko,Go,rs,si=J({},ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rs&&(rs&&e.type==="mousemove"?(Ko=e.screenX-rs.screenX,Go=e.screenY-rs.screenY):Go=Ko=0,rs=e),Ko)},movementY:function(e){return"movementY"in e?e.movementY:Go}}),nc=vt(si),Up=J({},si,{dataTransfer:0}),Mp=vt(Up),zp=J({},ts,{relatedTarget:0}),Jo=vt(zp),Bp=J({},sn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fp=vt(Bp),Vp=J({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),qp=vt(Vp),Hp=J({},sn,{data:0}),sc=vt(Hp),Wp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gp[e])?!!t[e]:!1}function Qo(){return Jp}var Qp=J({},ts,{key:function(e){if(e.key){var t=Wp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Kp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qo,charCode:function(e){return e.type==="keypress"?ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yp=vt(Qp),Xp=J({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ic=vt(Xp),Zp=J({},ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qo}),em=vt(Zp),tm=J({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0}),rm=vt(tm),nm=J({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sm=vt(nm),im=[9,13,27,32],Yo=m&&"CompositionEvent"in window,ns=null;m&&"documentMode"in document&&(ns=document.documentMode);var om=m&&"TextEvent"in window&&!ns,oc=m&&(!Yo||ns&&8<ns&&11>=ns),ac=" ",lc=!1;function uc(e,t){switch(e){case"keyup":return im.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var on=!1;function am(e,t){switch(e){case"compositionend":return cc(t);case"keypress":return t.which!==32?null:(lc=!0,ac);case"textInput":return e=t.data,e===ac&&lc?null:e;default:return null}}function lm(e,t){if(on)return e==="compositionend"||!Yo&&uc(e,t)?(e=tc(),ti=Ho=cr=null,on=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oc&&t.locale!=="ko"?null:t.data;default:return null}}var um={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!um[e.type]:t==="textarea"}function hc(e,t,s,a){Ru(a),t=ui(t,"onChange"),0<t.length&&(s=new Wo("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var ss=null,is=null;function cm(e){Pc(e,0)}function ii(e){var t=dn(e);if(xu(t))return e}function dm(e,t){if(e==="change")return t}var fc=!1;if(m){var Xo;if(m){var Zo="oninput"in document;if(!Zo){var pc=document.createElement("div");pc.setAttribute("oninput","return;"),Zo=typeof pc.oninput=="function"}Xo=Zo}else Xo=!1;fc=Xo&&(!document.documentMode||9<document.documentMode)}function mc(){ss&&(ss.detachEvent("onpropertychange",gc),is=ss=null)}function gc(e){if(e.propertyName==="value"&&ii(is)){var t=[];hc(t,is,e,Ro(e)),$u(cm,t)}}function hm(e,t,s){e==="focusin"?(mc(),ss=t,is=s,ss.attachEvent("onpropertychange",gc)):e==="focusout"&&mc()}function fm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ii(is)}function pm(e,t){if(e==="click")return ii(t)}function mm(e,t){if(e==="input"||e==="change")return ii(t)}function gm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:gm;function os(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var c=s[a];if(!p.call(t,c)||!At(e[c],t[c]))return!1}return!0}function vc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yc(e,t){var s=vc(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=vc(s)}}function wc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xc(){for(var e=window,t=Fs();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Fs(e.document)}return t}function ea(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vm(e){var t=xc(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&wc(s.ownerDocument.documentElement,s)){if(a!==null&&ea(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=s.textContent.length,f=Math.min(a.start,c);a=a.end===void 0?f:Math.min(a.end,c),!e.extend&&f>a&&(c=a,a=f,f=c),c=yc(s,f);var g=yc(s,a);c&&g&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ym=m&&"documentMode"in document&&11>=document.documentMode,an=null,ta=null,as=null,ra=!1;function _c(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ra||an==null||an!==Fs(a)||(a=an,"selectionStart"in a&&ea(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),as&&os(as,a)||(as=a,a=ui(ta,"onSelect"),0<a.length&&(t=new Wo("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=an)))}function oi(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ln={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionend:oi("Transition","TransitionEnd")},na={},bc={};m&&(bc=document.createElement("div").style,"AnimationEvent"in window||(delete ln.animationend.animation,delete ln.animationiteration.animation,delete ln.animationstart.animation),"TransitionEvent"in window||delete ln.transitionend.transition);function ai(e){if(na[e])return na[e];if(!ln[e])return e;var t=ln[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in bc)return na[e]=t[s];return e}var Sc=ai("animationend"),kc=ai("animationiteration"),Ec=ai("animationstart"),jc=ai("transitionend"),Nc=new Map,Cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dr(e,t){Nc.set(e,t),u(t,[e])}for(var sa=0;sa<Cc.length;sa++){var ia=Cc[sa],wm=ia.toLowerCase(),xm=ia[0].toUpperCase()+ia.slice(1);dr(wm,"on"+xm)}dr(Sc,"onAnimationEnd"),dr(kc,"onAnimationIteration"),dr(Ec,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(jc,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_m=new Set("cancel close invalid load scroll toggle".split(" ").concat(ls));function Tc(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,wp(a,t,void 0,e),e.currentTarget=null}function Pc(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],c=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var g=a.length-1;0<=g;g--){var w=a[g],_=w.instance,O=w.currentTarget;if(w=w.listener,_!==f&&c.isPropagationStopped())break e;Tc(c,w,O),f=_}else for(g=0;g<a.length;g++){if(w=a[g],_=w.instance,O=w.currentTarget,w=w.listener,_!==f&&c.isPropagationStopped())break e;Tc(c,w,O),f=_}}}if(Hs)throw e=$o,Hs=!1,$o=null,e}function Ne(e,t){var s=t[fa];s===void 0&&(s=t[fa]=new Set);var a=e+"__bubble";s.has(a)||(Oc(t,e,2,!1),s.add(a))}function oa(e,t,s){var a=0;t&&(a|=4),Oc(s,e,a,t)}var li="_reactListening"+Math.random().toString(36).slice(2);function us(e){if(!e[li]){e[li]=!0,o.forEach(function(s){s!=="selectionchange"&&(_m.has(s)||oa(s,!1,e),oa(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[li]||(t[li]=!0,oa("selectionchange",!1,t))}}function Oc(e,t,s,a){switch(ec(t)){case 1:var c=Dp;break;case 4:c=$p;break;default:c=Vo}s=c.bind(null,t,s,e),c=void 0,!Do||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),a?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function aa(e,t,s,a,c){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var g=a.tag;if(g===3||g===4){var w=a.stateNode.containerInfo;if(w===c||w.nodeType===8&&w.parentNode===c)break;if(g===4)for(g=a.return;g!==null;){var _=g.tag;if((_===3||_===4)&&(_=g.stateNode.containerInfo,_===c||_.nodeType===8&&_.parentNode===c))return;g=g.return}for(;w!==null;){if(g=Or(w),g===null)return;if(_=g.tag,_===5||_===6){a=f=g;continue e}w=w.parentNode}}a=a.return}$u(function(){var O=f,z=Ro(s),B=[];e:{var M=Nc.get(e);if(M!==void 0){var K=Wo,X=e;switch(e){case"keypress":if(ri(s)===0)break e;case"keydown":case"keyup":K=Yp;break;case"focusin":X="focus",K=Jo;break;case"focusout":X="blur",K=Jo;break;case"beforeblur":case"afterblur":K=Jo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=nc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Mp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=em;break;case Sc:case kc:case Ec:K=Fp;break;case jc:K=rm;break;case"scroll":K=Lp;break;case"wheel":K=sm;break;case"copy":case"cut":case"paste":K=qp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=ic}var Z=(t&4)!==0,Ue=!Z&&e==="scroll",T=Z?M!==null?M+"Capture":null:M;Z=[];for(var S=O,P;S!==null;){P=S;var F=P.stateNode;if(P.tag===5&&F!==null&&(P=F,T!==null&&(F=Hn(S,T),F!=null&&Z.push(cs(S,F,P)))),Ue)break;S=S.return}0<Z.length&&(M=new K(M,X,null,s,z),B.push({event:M,listeners:Z}))}}if((t&7)===0){e:{if(M=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",M&&s!==Oo&&(X=s.relatedTarget||s.fromElement)&&(Or(X)||X[Yt]))break e;if((K||M)&&(M=z.window===z?z:(M=z.ownerDocument)?M.defaultView||M.parentWindow:window,K?(X=s.relatedTarget||s.toElement,K=O,X=X?Or(X):null,X!==null&&(Ue=Pr(X),X!==Ue||X.tag!==5&&X.tag!==6)&&(X=null)):(K=null,X=O),K!==X)){if(Z=nc,F="onMouseLeave",T="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(Z=ic,F="onPointerLeave",T="onPointerEnter",S="pointer"),Ue=K==null?M:dn(K),P=X==null?M:dn(X),M=new Z(F,S+"leave",K,s,z),M.target=Ue,M.relatedTarget=P,F=null,Or(z)===O&&(Z=new Z(T,S+"enter",X,s,z),Z.target=P,Z.relatedTarget=Ue,F=Z),Ue=F,K&&X)t:{for(Z=K,T=X,S=0,P=Z;P;P=un(P))S++;for(P=0,F=T;F;F=un(F))P++;for(;0<S-P;)Z=un(Z),S--;for(;0<P-S;)T=un(T),P--;for(;S--;){if(Z===T||T!==null&&Z===T.alternate)break t;Z=un(Z),T=un(T)}Z=null}else Z=null;K!==null&&Rc(B,M,K,Z,!1),X!==null&&Ue!==null&&Rc(B,Ue,X,Z,!0)}}e:{if(M=O?dn(O):window,K=M.nodeName&&M.nodeName.toLowerCase(),K==="select"||K==="input"&&M.type==="file")var te=dm;else if(dc(M))if(fc)te=mm;else{te=fm;var ie=hm}else(K=M.nodeName)&&K.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(te=pm);if(te&&(te=te(e,O))){hc(B,te,s,z);break e}ie&&ie(e,M,O),e==="focusout"&&(ie=M._wrapperState)&&ie.controlled&&M.type==="number"&&jo(M,"number",M.value)}switch(ie=O?dn(O):window,e){case"focusin":(dc(ie)||ie.contentEditable==="true")&&(an=ie,ta=O,as=null);break;case"focusout":as=ta=an=null;break;case"mousedown":ra=!0;break;case"contextmenu":case"mouseup":case"dragend":ra=!1,_c(B,s,z);break;case"selectionchange":if(ym)break;case"keydown":case"keyup":_c(B,s,z)}var oe;if(Yo)e:{switch(e){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else on?uc(e,s)&&(le="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(le="onCompositionStart");le&&(oc&&s.locale!=="ko"&&(on||le!=="onCompositionStart"?le==="onCompositionEnd"&&on&&(oe=tc()):(cr=z,Ho="value"in cr?cr.value:cr.textContent,on=!0)),ie=ui(O,le),0<ie.length&&(le=new sc(le,e,null,s,z),B.push({event:le,listeners:ie}),oe?le.data=oe:(oe=cc(s),oe!==null&&(le.data=oe)))),(oe=om?am(e,s):lm(e,s))&&(O=ui(O,"onBeforeInput"),0<O.length&&(z=new sc("onBeforeInput","beforeinput",null,s,z),B.push({event:z,listeners:O}),z.data=oe))}Pc(B,t)})}function cs(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ui(e,t){for(var s=t+"Capture",a=[];e!==null;){var c=e,f=c.stateNode;c.tag===5&&f!==null&&(c=f,f=Hn(e,s),f!=null&&a.unshift(cs(e,f,c)),f=Hn(e,t),f!=null&&a.push(cs(e,f,c))),e=e.return}return a}function un(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Rc(e,t,s,a,c){for(var f=t._reactName,g=[];s!==null&&s!==a;){var w=s,_=w.alternate,O=w.stateNode;if(_!==null&&_===a)break;w.tag===5&&O!==null&&(w=O,c?(_=Hn(s,f),_!=null&&g.unshift(cs(s,_,w))):c||(_=Hn(s,f),_!=null&&g.push(cs(s,_,w)))),s=s.return}g.length!==0&&e.push({event:t,listeners:g})}var bm=/\r\n?/g,Sm=/\u0000|\uFFFD/g;function Ic(e){return(typeof e=="string"?e:""+e).replace(bm,`
`).replace(Sm,"")}function ci(e,t,s){if(t=Ic(t),Ic(e)!==t&&s)throw Error(n(425))}function di(){}var la=null,ua=null;function ca(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var da=typeof setTimeout=="function"?setTimeout:void 0,km=typeof clearTimeout=="function"?clearTimeout:void 0,Ac=typeof Promise=="function"?Promise:void 0,Em=typeof queueMicrotask=="function"?queueMicrotask:typeof Ac<"u"?function(e){return Ac.resolve(null).then(e).catch(jm)}:da;function jm(e){setTimeout(function(){throw e})}function ha(e,t){var s=t,a=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"){if(a===0){e.removeChild(c),es(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=c}while(s);es(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var cn=Math.random().toString(36).slice(2),Ht="__reactFiber$"+cn,ds="__reactProps$"+cn,Yt="__reactContainer$"+cn,fa="__reactEvents$"+cn,Nm="__reactListeners$"+cn,Cm="__reactHandles$"+cn;function Or(e){var t=e[Ht];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Yt]||s[Ht]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Dc(e);e!==null;){if(s=e[Ht])return s;e=Dc(e)}return t}e=s,s=e.parentNode}return null}function hs(e){return e=e[Ht]||e[Yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function hi(e){return e[ds]||null}var pa=[],hn=-1;function fr(e){return{current:e}}function Ce(e){0>hn||(e.current=pa[hn],pa[hn]=null,hn--)}function ke(e,t){hn++,pa[hn]=e.current,e.current=t}var pr={},et=fr(pr),ct=fr(!1),Rr=pr;function fn(e,t){var s=e.type.contextTypes;if(!s)return pr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var c={},f;for(f in s)c[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function dt(e){return e=e.childContextTypes,e!=null}function fi(){Ce(ct),Ce(et)}function $c(e,t,s){if(et.current!==pr)throw Error(n(168));ke(et,t),ke(ct,s)}function Lc(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var c in a)if(!(c in t))throw Error(n(108,Se(e)||"Unknown",c));return J({},s,a)}function pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pr,Rr=et.current,ke(et,e),ke(ct,ct.current),!0}function Uc(e,t,s){var a=e.stateNode;if(!a)throw Error(n(169));s?(e=Lc(e,t,Rr),a.__reactInternalMemoizedMergedChildContext=e,Ce(ct),Ce(et),ke(et,e)):Ce(ct),ke(ct,s)}var Xt=null,mi=!1,ma=!1;function Mc(e){Xt===null?Xt=[e]:Xt.push(e)}function Tm(e){mi=!0,Mc(e)}function mr(){if(!ma&&Xt!==null){ma=!0;var e=0,t=xe;try{var s=Xt;for(xe=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}Xt=null,mi=!1}catch(c){throw Xt!==null&&(Xt=Xt.slice(e+1)),Bu(Lo,mr),c}finally{xe=t,ma=!1}}return null}var pn=[],mn=0,gi=null,vi=0,kt=[],Et=0,Ir=null,Zt=1,er="";function Ar(e,t){pn[mn++]=vi,pn[mn++]=gi,gi=e,vi=t}function zc(e,t,s){kt[Et++]=Zt,kt[Et++]=er,kt[Et++]=Ir,Ir=e;var a=Zt;e=er;var c=32-It(a)-1;a&=~(1<<c),s+=1;var f=32-It(t)+c;if(30<f){var g=c-c%5;f=(a&(1<<g)-1).toString(32),a>>=g,c-=g,Zt=1<<32-It(t)+c|s<<c|a,er=f+e}else Zt=1<<f|s<<c|a,er=e}function ga(e){e.return!==null&&(Ar(e,1),zc(e,1,0))}function va(e){for(;e===gi;)gi=pn[--mn],pn[mn]=null,vi=pn[--mn],pn[mn]=null;for(;e===Ir;)Ir=kt[--Et],kt[Et]=null,er=kt[--Et],kt[Et]=null,Zt=kt[--Et],kt[Et]=null}var yt=null,wt=null,Pe=!1,Dt=null;function Bc(e,t){var s=Tt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Fc(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yt=e,wt=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yt=e,wt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Ir!==null?{id:Zt,overflow:er}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Tt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,yt=e,wt=null,!0):!1;default:return!1}}function ya(e){return(e.mode&1)!==0&&(e.flags&128)===0}function wa(e){if(Pe){var t=wt;if(t){var s=t;if(!Fc(e,t)){if(ya(e))throw Error(n(418));t=hr(s.nextSibling);var a=yt;t&&Fc(e,t)?Bc(a,s):(e.flags=e.flags&-4097|2,Pe=!1,yt=e)}}else{if(ya(e))throw Error(n(418));e.flags=e.flags&-4097|2,Pe=!1,yt=e}}}function Vc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yt=e}function yi(e){if(e!==yt)return!1;if(!Pe)return Vc(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ca(e.type,e.memoizedProps)),t&&(t=wt)){if(ya(e))throw qc(),Error(n(418));for(;t;)Bc(e,t),t=hr(t.nextSibling)}if(Vc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){wt=hr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}wt=null}}else wt=yt?hr(e.stateNode.nextSibling):null;return!0}function qc(){for(var e=wt;e;)e=hr(e.nextSibling)}function gn(){wt=yt=null,Pe=!1}function xa(e){Dt===null?Dt=[e]:Dt.push(e)}var Pm=q.ReactCurrentBatchConfig;function fs(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(n(309));var a=s.stateNode}if(!a)throw Error(n(147,e));var c=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(g){var w=c.refs;g===null?delete w[f]:w[f]=g},t._stringRef=f,t)}if(typeof e!="string")throw Error(n(284));if(!s._owner)throw Error(n(290,e))}return e}function wi(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hc(e){var t=e._init;return t(e._payload)}function Wc(e){function t(T,S){if(e){var P=T.deletions;P===null?(T.deletions=[S],T.flags|=16):P.push(S)}}function s(T,S){if(!e)return null;for(;S!==null;)t(T,S),S=S.sibling;return null}function a(T,S){for(T=new Map;S!==null;)S.key!==null?T.set(S.key,S):T.set(S.index,S),S=S.sibling;return T}function c(T,S){return T=Sr(T,S),T.index=0,T.sibling=null,T}function f(T,S,P){return T.index=P,e?(P=T.alternate,P!==null?(P=P.index,P<S?(T.flags|=2,S):P):(T.flags|=2,S)):(T.flags|=1048576,S)}function g(T){return e&&T.alternate===null&&(T.flags|=2),T}function w(T,S,P,F){return S===null||S.tag!==6?(S=dl(P,T.mode,F),S.return=T,S):(S=c(S,P),S.return=T,S)}function _(T,S,P,F){var te=P.type;return te===I?z(T,S,P.props.children,F,P.key):S!==null&&(S.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===fe&&Hc(te)===S.type)?(F=c(S,P.props),F.ref=fs(T,S,P),F.return=T,F):(F=Vi(P.type,P.key,P.props,null,T.mode,F),F.ref=fs(T,S,P),F.return=T,F)}function O(T,S,P,F){return S===null||S.tag!==4||S.stateNode.containerInfo!==P.containerInfo||S.stateNode.implementation!==P.implementation?(S=hl(P,T.mode,F),S.return=T,S):(S=c(S,P.children||[]),S.return=T,S)}function z(T,S,P,F,te){return S===null||S.tag!==7?(S=Fr(P,T.mode,F,te),S.return=T,S):(S=c(S,P),S.return=T,S)}function B(T,S,P){if(typeof S=="string"&&S!==""||typeof S=="number")return S=dl(""+S,T.mode,P),S.return=T,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ee:return P=Vi(S.type,S.key,S.props,null,T.mode,P),P.ref=fs(T,null,S),P.return=T,P;case R:return S=hl(S,T.mode,P),S.return=T,S;case fe:var F=S._init;return B(T,F(S._payload),P)}if(Fn(S)||se(S))return S=Fr(S,T.mode,P,null),S.return=T,S;wi(T,S)}return null}function M(T,S,P,F){var te=S!==null?S.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return te!==null?null:w(T,S,""+P,F);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ee:return P.key===te?_(T,S,P,F):null;case R:return P.key===te?O(T,S,P,F):null;case fe:return te=P._init,M(T,S,te(P._payload),F)}if(Fn(P)||se(P))return te!==null?null:z(T,S,P,F,null);wi(T,P)}return null}function K(T,S,P,F,te){if(typeof F=="string"&&F!==""||typeof F=="number")return T=T.get(P)||null,w(S,T,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ee:return T=T.get(F.key===null?P:F.key)||null,_(S,T,F,te);case R:return T=T.get(F.key===null?P:F.key)||null,O(S,T,F,te);case fe:var ie=F._init;return K(T,S,P,ie(F._payload),te)}if(Fn(F)||se(F))return T=T.get(P)||null,z(S,T,F,te,null);wi(S,F)}return null}function X(T,S,P,F){for(var te=null,ie=null,oe=S,le=S=0,Ge=null;oe!==null&&le<P.length;le++){oe.index>le?(Ge=oe,oe=null):Ge=oe.sibling;var ye=M(T,oe,P[le],F);if(ye===null){oe===null&&(oe=Ge);break}e&&oe&&ye.alternate===null&&t(T,oe),S=f(ye,S,le),ie===null?te=ye:ie.sibling=ye,ie=ye,oe=Ge}if(le===P.length)return s(T,oe),Pe&&Ar(T,le),te;if(oe===null){for(;le<P.length;le++)oe=B(T,P[le],F),oe!==null&&(S=f(oe,S,le),ie===null?te=oe:ie.sibling=oe,ie=oe);return Pe&&Ar(T,le),te}for(oe=a(T,oe);le<P.length;le++)Ge=K(oe,T,le,P[le],F),Ge!==null&&(e&&Ge.alternate!==null&&oe.delete(Ge.key===null?le:Ge.key),S=f(Ge,S,le),ie===null?te=Ge:ie.sibling=Ge,ie=Ge);return e&&oe.forEach(function(kr){return t(T,kr)}),Pe&&Ar(T,le),te}function Z(T,S,P,F){var te=se(P);if(typeof te!="function")throw Error(n(150));if(P=te.call(P),P==null)throw Error(n(151));for(var ie=te=null,oe=S,le=S=0,Ge=null,ye=P.next();oe!==null&&!ye.done;le++,ye=P.next()){oe.index>le?(Ge=oe,oe=null):Ge=oe.sibling;var kr=M(T,oe,ye.value,F);if(kr===null){oe===null&&(oe=Ge);break}e&&oe&&kr.alternate===null&&t(T,oe),S=f(kr,S,le),ie===null?te=kr:ie.sibling=kr,ie=kr,oe=Ge}if(ye.done)return s(T,oe),Pe&&Ar(T,le),te;if(oe===null){for(;!ye.done;le++,ye=P.next())ye=B(T,ye.value,F),ye!==null&&(S=f(ye,S,le),ie===null?te=ye:ie.sibling=ye,ie=ye);return Pe&&Ar(T,le),te}for(oe=a(T,oe);!ye.done;le++,ye=P.next())ye=K(oe,T,le,ye.value,F),ye!==null&&(e&&ye.alternate!==null&&oe.delete(ye.key===null?le:ye.key),S=f(ye,S,le),ie===null?te=ye:ie.sibling=ye,ie=ye);return e&&oe.forEach(function(ug){return t(T,ug)}),Pe&&Ar(T,le),te}function Ue(T,S,P,F){if(typeof P=="object"&&P!==null&&P.type===I&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case ee:e:{for(var te=P.key,ie=S;ie!==null;){if(ie.key===te){if(te=P.type,te===I){if(ie.tag===7){s(T,ie.sibling),S=c(ie,P.props.children),S.return=T,T=S;break e}}else if(ie.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===fe&&Hc(te)===ie.type){s(T,ie.sibling),S=c(ie,P.props),S.ref=fs(T,ie,P),S.return=T,T=S;break e}s(T,ie);break}else t(T,ie);ie=ie.sibling}P.type===I?(S=Fr(P.props.children,T.mode,F,P.key),S.return=T,T=S):(F=Vi(P.type,P.key,P.props,null,T.mode,F),F.ref=fs(T,S,P),F.return=T,T=F)}return g(T);case R:e:{for(ie=P.key;S!==null;){if(S.key===ie)if(S.tag===4&&S.stateNode.containerInfo===P.containerInfo&&S.stateNode.implementation===P.implementation){s(T,S.sibling),S=c(S,P.children||[]),S.return=T,T=S;break e}else{s(T,S);break}else t(T,S);S=S.sibling}S=hl(P,T.mode,F),S.return=T,T=S}return g(T);case fe:return ie=P._init,Ue(T,S,ie(P._payload),F)}if(Fn(P))return X(T,S,P,F);if(se(P))return Z(T,S,P,F);wi(T,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,S!==null&&S.tag===6?(s(T,S.sibling),S=c(S,P),S.return=T,T=S):(s(T,S),S=dl(P,T.mode,F),S.return=T,T=S),g(T)):s(T,S)}return Ue}var vn=Wc(!0),Kc=Wc(!1),xi=fr(null),_i=null,yn=null,_a=null;function ba(){_a=yn=_i=null}function Sa(e){var t=xi.current;Ce(xi),e._currentValue=t}function ka(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function wn(e,t){_i=e,_a=yn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ht=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},yn===null){if(_i===null)throw Error(n(308));yn=e,_i.dependencies={lanes:0,firstContext:e}}else yn=yn.next=e;return t}var Dr=null;function Ea(e){Dr===null?Dr=[e]:Dr.push(e)}function Gc(e,t,s,a){var c=t.interleaved;return c===null?(s.next=s,Ea(t)):(s.next=c.next,c.next=s),t.interleaved=s,tr(e,a)}function tr(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var gr=!1;function ja(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vr(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(me&2)!==0){var c=a.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),a.pending=t,tr(e,s)}return c=a.interleaved,c===null?(t.next=t,Ea(a)):(t.next=c.next,c.next=t),a.interleaved=t,tr(e,s)}function bi(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,zo(e,s)}}function Qc(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var c=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var g={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?c=f=g:f=f.next=g,s=s.next}while(s!==null);f===null?c=f=t:f=f.next=t}else c=f=t;s={baseState:a.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Si(e,t,s,a){var c=e.updateQueue;gr=!1;var f=c.firstBaseUpdate,g=c.lastBaseUpdate,w=c.shared.pending;if(w!==null){c.shared.pending=null;var _=w,O=_.next;_.next=null,g===null?f=O:g.next=O,g=_;var z=e.alternate;z!==null&&(z=z.updateQueue,w=z.lastBaseUpdate,w!==g&&(w===null?z.firstBaseUpdate=O:w.next=O,z.lastBaseUpdate=_))}if(f!==null){var B=c.baseState;g=0,z=O=_=null,w=f;do{var M=w.lane,K=w.eventTime;if((a&M)===M){z!==null&&(z=z.next={eventTime:K,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var X=e,Z=w;switch(M=t,K=s,Z.tag){case 1:if(X=Z.payload,typeof X=="function"){B=X.call(K,B,M);break e}B=X;break e;case 3:X.flags=X.flags&-65537|128;case 0:if(X=Z.payload,M=typeof X=="function"?X.call(K,B,M):X,M==null)break e;B=J({},B,M);break e;case 2:gr=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,M=c.effects,M===null?c.effects=[w]:M.push(w))}else K={eventTime:K,lane:M,tag:w.tag,payload:w.payload,callback:w.callback,next:null},z===null?(O=z=K,_=B):z=z.next=K,g|=M;if(w=w.next,w===null){if(w=c.shared.pending,w===null)break;M=w,w=M.next,M.next=null,c.lastBaseUpdate=M,c.shared.pending=null}}while(!0);if(z===null&&(_=B),c.baseState=_,c.firstBaseUpdate=O,c.lastBaseUpdate=z,t=c.shared.interleaved,t!==null){c=t;do g|=c.lane,c=c.next;while(c!==t)}else f===null&&(c.shared.lanes=0);Ur|=g,e.lanes=g,e.memoizedState=B}}function Yc(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],c=a.callback;if(c!==null){if(a.callback=null,a=s,typeof c!="function")throw Error(n(191,c));c.call(a)}}}var ps={},Wt=fr(ps),ms=fr(ps),gs=fr(ps);function $r(e){if(e===ps)throw Error(n(174));return e}function Na(e,t){switch(ke(gs,t),ke(ms,e),ke(Wt,ps),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Co(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Co(t,e)}Ce(Wt),ke(Wt,t)}function xn(){Ce(Wt),Ce(ms),Ce(gs)}function Xc(e){$r(gs.current);var t=$r(Wt.current),s=Co(t,e.type);t!==s&&(ke(ms,e),ke(Wt,s))}function Ca(e){ms.current===e&&(Ce(Wt),Ce(ms))}var Re=fr(0);function ki(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ta=[];function Pa(){for(var e=0;e<Ta.length;e++)Ta[e]._workInProgressVersionPrimary=null;Ta.length=0}var Ei=q.ReactCurrentDispatcher,Oa=q.ReactCurrentBatchConfig,Lr=0,Ie=null,Fe=null,We=null,ji=!1,vs=!1,ys=0,Om=0;function tt(){throw Error(n(321))}function Ra(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!At(e[s],t[s]))return!1;return!0}function Ia(e,t,s,a,c,f){if(Lr=f,Ie=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ei.current=e===null||e.memoizedState===null?Dm:$m,e=s(a,c),vs){f=0;do{if(vs=!1,ys=0,25<=f)throw Error(n(301));f+=1,We=Fe=null,t.updateQueue=null,Ei.current=Lm,e=s(a,c)}while(vs)}if(Ei.current=Ti,t=Fe!==null&&Fe.next!==null,Lr=0,We=Fe=Ie=null,ji=!1,t)throw Error(n(300));return e}function Aa(){var e=ys!==0;return ys=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ie.memoizedState=We=e:We=We.next=e,We}function Nt(){if(Fe===null){var e=Ie.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=We===null?Ie.memoizedState:We.next;if(t!==null)We=t,Fe=e;else{if(e===null)throw Error(n(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},We===null?Ie.memoizedState=We=e:We=We.next=e}return We}function ws(e,t){return typeof t=="function"?t(e):t}function Da(e){var t=Nt(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var a=Fe,c=a.baseQueue,f=s.pending;if(f!==null){if(c!==null){var g=c.next;c.next=f.next,f.next=g}a.baseQueue=c=f,s.pending=null}if(c!==null){f=c.next,a=a.baseState;var w=g=null,_=null,O=f;do{var z=O.lane;if((Lr&z)===z)_!==null&&(_=_.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),a=O.hasEagerState?O.eagerState:e(a,O.action);else{var B={lane:z,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};_===null?(w=_=B,g=a):_=_.next=B,Ie.lanes|=z,Ur|=z}O=O.next}while(O!==null&&O!==f);_===null?g=a:_.next=w,At(a,t.memoizedState)||(ht=!0),t.memoizedState=a,t.baseState=g,t.baseQueue=_,s.lastRenderedState=a}if(e=s.interleaved,e!==null){c=e;do f=c.lane,Ie.lanes|=f,Ur|=f,c=c.next;while(c!==e)}else c===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function $a(e){var t=Nt(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var a=s.dispatch,c=s.pending,f=t.memoizedState;if(c!==null){s.pending=null;var g=c=c.next;do f=e(f,g.action),g=g.next;while(g!==c);At(f,t.memoizedState)||(ht=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,a]}function Zc(){}function ed(e,t){var s=Ie,a=Nt(),c=t(),f=!At(a.memoizedState,c);if(f&&(a.memoizedState=c,ht=!0),a=a.queue,La(nd.bind(null,s,a,e),[e]),a.getSnapshot!==t||f||We!==null&&We.memoizedState.tag&1){if(s.flags|=2048,xs(9,rd.bind(null,s,a,c,t),void 0,null),Ke===null)throw Error(n(349));(Lr&30)!==0||td(s,t,c)}return c}function td(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function rd(e,t,s,a){t.value=s,t.getSnapshot=a,sd(t)&&id(e)}function nd(e,t,s){return s(function(){sd(t)&&id(e)})}function sd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!At(e,s)}catch{return!0}}function id(e){var t=tr(e,1);t!==null&&Mt(t,e,1,-1)}function od(e){var t=Kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Am.bind(null,Ie,e),[t.memoizedState,e]}function xs(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=Ie.updateQueue,t===null?(t={lastEffect:null,stores:null},Ie.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function ad(){return Nt().memoizedState}function Ni(e,t,s,a){var c=Kt();Ie.flags|=e,c.memoizedState=xs(1|t,s,void 0,a===void 0?null:a)}function Ci(e,t,s,a){var c=Nt();a=a===void 0?null:a;var f=void 0;if(Fe!==null){var g=Fe.memoizedState;if(f=g.destroy,a!==null&&Ra(a,g.deps)){c.memoizedState=xs(t,s,f,a);return}}Ie.flags|=e,c.memoizedState=xs(1|t,s,f,a)}function ld(e,t){return Ni(8390656,8,e,t)}function La(e,t){return Ci(2048,8,e,t)}function ud(e,t){return Ci(4,2,e,t)}function cd(e,t){return Ci(4,4,e,t)}function dd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hd(e,t,s){return s=s!=null?s.concat([e]):null,Ci(4,4,dd.bind(null,t,e),s)}function Ua(){}function fd(e,t){var s=Nt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Ra(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function pd(e,t){var s=Nt();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Ra(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function md(e,t,s){return(Lr&21)===0?(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=s):(At(s,t)||(s=Hu(),Ie.lanes|=s,Ur|=s,e.baseState=!0),t)}function Rm(e,t){var s=xe;xe=s!==0&&4>s?s:4,e(!0);var a=Oa.transition;Oa.transition={};try{e(!1),t()}finally{xe=s,Oa.transition=a}}function gd(){return Nt().memoizedState}function Im(e,t,s){var a=_r(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},vd(e))yd(t,s);else if(s=Gc(e,t,s,a),s!==null){var c=lt();Mt(s,e,a,c),wd(s,t,a)}}function Am(e,t,s){var a=_r(e),c={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(vd(e))yd(t,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var g=t.lastRenderedState,w=f(g,s);if(c.hasEagerState=!0,c.eagerState=w,At(w,g)){var _=t.interleaved;_===null?(c.next=c,Ea(t)):(c.next=_.next,_.next=c),t.interleaved=c;return}}catch{}finally{}s=Gc(e,t,c,a),s!==null&&(c=lt(),Mt(s,e,a,c),wd(s,t,a))}}function vd(e){var t=e.alternate;return e===Ie||t!==null&&t===Ie}function yd(e,t){vs=ji=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function wd(e,t,s){if((s&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,zo(e,s)}}var Ti={readContext:jt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},Dm={readContext:jt,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:ld,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Ni(4194308,4,dd.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ni(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ni(4,2,e,t)},useMemo:function(e,t){var s=Kt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=Kt();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Im.bind(null,Ie,e),[a.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:od,useDebugValue:Ua,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=od(!1),t=e[0];return e=Rm.bind(null,e[1]),Kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=Ie,c=Kt();if(Pe){if(s===void 0)throw Error(n(407));s=s()}else{if(s=t(),Ke===null)throw Error(n(349));(Lr&30)!==0||td(a,t,s)}c.memoizedState=s;var f={value:s,getSnapshot:t};return c.queue=f,ld(nd.bind(null,a,f,e),[e]),a.flags|=2048,xs(9,rd.bind(null,a,f,s,t),void 0,null),s},useId:function(){var e=Kt(),t=Ke.identifierPrefix;if(Pe){var s=er,a=Zt;s=(a&~(1<<32-It(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=ys++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Om++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$m={readContext:jt,useCallback:fd,useContext:jt,useEffect:La,useImperativeHandle:hd,useInsertionEffect:ud,useLayoutEffect:cd,useMemo:pd,useReducer:Da,useRef:ad,useState:function(){return Da(ws)},useDebugValue:Ua,useDeferredValue:function(e){var t=Nt();return md(t,Fe.memoizedState,e)},useTransition:function(){var e=Da(ws)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Zc,useSyncExternalStore:ed,useId:gd,unstable_isNewReconciler:!1},Lm={readContext:jt,useCallback:fd,useContext:jt,useEffect:La,useImperativeHandle:hd,useInsertionEffect:ud,useLayoutEffect:cd,useMemo:pd,useReducer:$a,useRef:ad,useState:function(){return $a(ws)},useDebugValue:Ua,useDeferredValue:function(e){var t=Nt();return Fe===null?t.memoizedState=e:md(t,Fe.memoizedState,e)},useTransition:function(){var e=$a(ws)[0],t=Nt().memoizedState;return[e,t]},useMutableSource:Zc,useSyncExternalStore:ed,useId:gd,unstable_isNewReconciler:!1};function $t(e,t){if(e&&e.defaultProps){t=J({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Ma(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:J({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Pi={isMounted:function(e){return(e=e._reactInternals)?Pr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=lt(),c=_r(e),f=rr(a,c);f.payload=t,s!=null&&(f.callback=s),t=vr(e,f,c),t!==null&&(Mt(t,e,c,a),bi(t,e,c))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=lt(),c=_r(e),f=rr(a,c);f.tag=1,f.payload=t,s!=null&&(f.callback=s),t=vr(e,f,c),t!==null&&(Mt(t,e,c,a),bi(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=lt(),a=_r(e),c=rr(s,a);c.tag=2,t!=null&&(c.callback=t),t=vr(e,c,a),t!==null&&(Mt(t,e,a,s),bi(t,e,a))}};function xd(e,t,s,a,c,f,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,g):t.prototype&&t.prototype.isPureReactComponent?!os(s,a)||!os(c,f):!0}function _d(e,t,s){var a=!1,c=pr,f=t.contextType;return typeof f=="object"&&f!==null?f=jt(f):(c=dt(t)?Rr:et.current,a=t.contextTypes,f=(a=a!=null)?fn(e,c):pr),t=new t(s,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pi,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=f),t}function bd(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&Pi.enqueueReplaceState(t,t.state,null)}function za(e,t,s,a){var c=e.stateNode;c.props=s,c.state=e.memoizedState,c.refs={},ja(e);var f=t.contextType;typeof f=="object"&&f!==null?c.context=jt(f):(f=dt(t)?Rr:et.current,c.context=fn(e,f)),c.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Ma(e,t,f,s),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Pi.enqueueReplaceState(c,c.state,null),Si(e,s,c,a),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function _n(e,t){try{var s="",a=t;do s+=ge(a),a=a.return;while(a);var c=s}catch(f){c=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:c,digest:null}}function Ba(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Fa(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Um=typeof WeakMap=="function"?WeakMap:Map;function Sd(e,t,s){s=rr(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){Li||(Li=!0,nl=a),Fa(e,t)},s}function kd(e,t,s){s=rr(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var c=t.value;s.payload=function(){return a(c)},s.callback=function(){Fa(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){Fa(e,t),typeof a!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),s}function Ed(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Um;var c=new Set;a.set(t,c)}else c=a.get(t),c===void 0&&(c=new Set,a.set(t,c));c.has(s)||(c.add(s),e=Xm.bind(null,e,t,s),t.then(e,e))}function jd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nd(e,t,s,a,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=rr(-1,1),t.tag=2,vr(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var Mm=q.ReactCurrentOwner,ht=!1;function at(e,t,s,a){t.child=e===null?Kc(t,null,s,a):vn(t,e.child,s,a)}function Cd(e,t,s,a,c){s=s.render;var f=t.ref;return wn(t,c),a=Ia(e,t,s,a,f,c),s=Aa(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,nr(e,t,c)):(Pe&&s&&ga(t),t.flags|=1,at(e,t,a,c),t.child)}function Td(e,t,s,a,c){if(e===null){var f=s.type;return typeof f=="function"&&!cl(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=f,Pd(e,t,f,a,c)):(e=Vi(s.type,null,a,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,(e.lanes&c)===0){var g=f.memoizedProps;if(s=s.compare,s=s!==null?s:os,s(g,a)&&e.ref===t.ref)return nr(e,t,c)}return t.flags|=1,e=Sr(f,a),e.ref=t.ref,e.return=t,t.child=e}function Pd(e,t,s,a,c){if(e!==null){var f=e.memoizedProps;if(os(f,a)&&e.ref===t.ref)if(ht=!1,t.pendingProps=a=f,(e.lanes&c)!==0)(e.flags&131072)!==0&&(ht=!0);else return t.lanes=e.lanes,nr(e,t,c)}return Va(e,t,s,a,c)}function Od(e,t,s){var a=t.pendingProps,c=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Sn,xt),xt|=s;else{if((s&1073741824)===0)return e=f!==null?f.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ke(Sn,xt),xt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:s,ke(Sn,xt),xt|=a}else f!==null?(a=f.baseLanes|s,t.memoizedState=null):a=s,ke(Sn,xt),xt|=a;return at(e,t,c,s),t.child}function Rd(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Va(e,t,s,a,c){var f=dt(s)?Rr:et.current;return f=fn(t,f),wn(t,c),s=Ia(e,t,s,a,f,c),a=Aa(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,nr(e,t,c)):(Pe&&a&&ga(t),t.flags|=1,at(e,t,s,c),t.child)}function Id(e,t,s,a,c){if(dt(s)){var f=!0;pi(t)}else f=!1;if(wn(t,c),t.stateNode===null)Ri(e,t),_d(t,s,a),za(t,s,a,c),a=!0;else if(e===null){var g=t.stateNode,w=t.memoizedProps;g.props=w;var _=g.context,O=s.contextType;typeof O=="object"&&O!==null?O=jt(O):(O=dt(s)?Rr:et.current,O=fn(t,O));var z=s.getDerivedStateFromProps,B=typeof z=="function"||typeof g.getSnapshotBeforeUpdate=="function";B||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==a||_!==O)&&bd(t,g,a,O),gr=!1;var M=t.memoizedState;g.state=M,Si(t,a,g,c),_=t.memoizedState,w!==a||M!==_||ct.current||gr?(typeof z=="function"&&(Ma(t,s,z,a),_=t.memoizedState),(w=gr||xd(t,s,w,a,M,_,O))?(B||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=_),g.props=a,g.state=_,g.context=O,a=w):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{g=t.stateNode,Jc(e,t),w=t.memoizedProps,O=t.type===t.elementType?w:$t(t.type,w),g.props=O,B=t.pendingProps,M=g.context,_=s.contextType,typeof _=="object"&&_!==null?_=jt(_):(_=dt(s)?Rr:et.current,_=fn(t,_));var K=s.getDerivedStateFromProps;(z=typeof K=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==B||M!==_)&&bd(t,g,a,_),gr=!1,M=t.memoizedState,g.state=M,Si(t,a,g,c);var X=t.memoizedState;w!==B||M!==X||ct.current||gr?(typeof K=="function"&&(Ma(t,s,K,a),X=t.memoizedState),(O=gr||xd(t,s,O,a,M,X,_)||!1)?(z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(a,X,_),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(a,X,_)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=X),g.props=a,g.state=X,g.context=_,a=O):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),a=!1)}return qa(e,t,s,a,f,c)}function qa(e,t,s,a,c,f){Rd(e,t);var g=(t.flags&128)!==0;if(!a&&!g)return c&&Uc(t,s,!1),nr(e,t,f);a=t.stateNode,Mm.current=t;var w=g&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&g?(t.child=vn(t,e.child,null,f),t.child=vn(t,null,w,f)):at(e,t,w,f),t.memoizedState=a.state,c&&Uc(t,s,!0),t.child}function Ad(e){var t=e.stateNode;t.pendingContext?$c(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$c(e,t.context,!1),Na(e,t.containerInfo)}function Dd(e,t,s,a,c){return gn(),xa(c),t.flags|=256,at(e,t,s,a),t.child}var Ha={dehydrated:null,treeContext:null,retryLane:0};function Wa(e){return{baseLanes:e,cachePool:null,transitions:null}}function $d(e,t,s){var a=t.pendingProps,c=Re.current,f=!1,g=(t.flags&128)!==0,w;if((w=g)||(w=e!==null&&e.memoizedState===null?!1:(c&2)!==0),w?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),ke(Re,c&1),e===null)return wa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=a.children,e=a.fallback,f?(a=t.mode,f=t.child,g={mode:"hidden",children:g},(a&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=g):f=qi(g,a,0,null),e=Fr(e,a,s,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Wa(s),t.memoizedState=Ha,e):Ka(t,g));if(c=e.memoizedState,c!==null&&(w=c.dehydrated,w!==null))return zm(e,t,g,a,w,c,s);if(f){f=a.fallback,g=t.mode,c=e.child,w=c.sibling;var _={mode:"hidden",children:a.children};return(g&1)===0&&t.child!==c?(a=t.child,a.childLanes=0,a.pendingProps=_,t.deletions=null):(a=Sr(c,_),a.subtreeFlags=c.subtreeFlags&14680064),w!==null?f=Sr(w,f):(f=Fr(f,g,s,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,g=e.child.memoizedState,g=g===null?Wa(s):{baseLanes:g.baseLanes|s,cachePool:null,transitions:g.transitions},f.memoizedState=g,f.childLanes=e.childLanes&~s,t.memoizedState=Ha,a}return f=e.child,e=f.sibling,a=Sr(f,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function Ka(e,t){return t=qi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oi(e,t,s,a){return a!==null&&xa(a),vn(t,e.child,null,s),e=Ka(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zm(e,t,s,a,c,f,g){if(s)return t.flags&256?(t.flags&=-257,a=Ba(Error(n(422))),Oi(e,t,g,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,c=t.mode,a=qi({mode:"visible",children:a.children},c,0,null),f=Fr(f,c,g,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,(t.mode&1)!==0&&vn(t,e.child,null,g),t.child.memoizedState=Wa(g),t.memoizedState=Ha,f);if((t.mode&1)===0)return Oi(e,t,g,null);if(c.data==="$!"){if(a=c.nextSibling&&c.nextSibling.dataset,a)var w=a.dgst;return a=w,f=Error(n(419)),a=Ba(f,a,void 0),Oi(e,t,g,a)}if(w=(g&e.childLanes)!==0,ht||w){if(a=Ke,a!==null){switch(g&-g){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(a.suspendedLanes|g))!==0?0:c,c!==0&&c!==f.retryLane&&(f.retryLane=c,tr(e,c),Mt(a,e,c,-1))}return ul(),a=Ba(Error(n(421))),Oi(e,t,g,a)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Zm.bind(null,e),c._reactRetry=t,null):(e=f.treeContext,wt=hr(c.nextSibling),yt=t,Pe=!0,Dt=null,e!==null&&(kt[Et++]=Zt,kt[Et++]=er,kt[Et++]=Ir,Zt=e.id,er=e.overflow,Ir=t),t=Ka(t,a.children),t.flags|=4096,t)}function Ld(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ka(e.return,t,s)}function Ga(e,t,s,a,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=s,f.tailMode=c)}function Ud(e,t,s){var a=t.pendingProps,c=a.revealOrder,f=a.tail;if(at(e,t,a.children,s),a=Re.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ld(e,s,t);else if(e.tag===19)Ld(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ke(Re,a),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&ki(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),Ga(t,!1,c,s,f);break;case"backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ki(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}Ga(t,!0,s,null,f);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ri(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ur|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,s=Sr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Sr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Bm(e,t,s){switch(t.tag){case 3:Ad(t),gn();break;case 5:Xc(t);break;case 1:dt(t.type)&&pi(t);break;case 4:Na(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,c=t.memoizedProps.value;ke(xi,a._currentValue),a._currentValue=c;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ke(Re,Re.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?$d(e,t,s):(ke(Re,Re.current&1),e=nr(e,t,s),e!==null?e.sibling:null);ke(Re,Re.current&1);break;case 19:if(a=(s&t.childLanes)!==0,(e.flags&128)!==0){if(a)return Ud(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ke(Re,Re.current),a)break;return null;case 22:case 23:return t.lanes=0,Od(e,t,s)}return nr(e,t,s)}var Md,Ja,zd,Bd;Md=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Ja=function(){},zd=function(e,t,s,a){var c=e.memoizedProps;if(c!==a){e=t.stateNode,$r(Wt.current);var f=null;switch(s){case"input":c=ko(e,c),a=ko(e,a),f=[];break;case"select":c=J({},c,{value:void 0}),a=J({},a,{value:void 0}),f=[];break;case"textarea":c=No(e,c),a=No(e,a),f=[];break;default:typeof c.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=di)}To(s,a);var g;s=null;for(O in c)if(!a.hasOwnProperty(O)&&c.hasOwnProperty(O)&&c[O]!=null)if(O==="style"){var w=c[O];for(g in w)w.hasOwnProperty(g)&&(s||(s={}),s[g]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(l.hasOwnProperty(O)?f||(f=[]):(f=f||[]).push(O,null));for(O in a){var _=a[O];if(w=c?.[O],a.hasOwnProperty(O)&&_!==w&&(_!=null||w!=null))if(O==="style")if(w){for(g in w)!w.hasOwnProperty(g)||_&&_.hasOwnProperty(g)||(s||(s={}),s[g]="");for(g in _)_.hasOwnProperty(g)&&w[g]!==_[g]&&(s||(s={}),s[g]=_[g])}else s||(f||(f=[]),f.push(O,s)),s=_;else O==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,w=w?w.__html:void 0,_!=null&&w!==_&&(f=f||[]).push(O,_)):O==="children"?typeof _!="string"&&typeof _!="number"||(f=f||[]).push(O,""+_):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(l.hasOwnProperty(O)?(_!=null&&O==="onScroll"&&Ne("scroll",e),f||w===_||(f=[])):(f=f||[]).push(O,_))}s&&(f=f||[]).push("style",s);var O=f;(t.updateQueue=O)&&(t.flags|=4)}},Bd=function(e,t,s,a){s!==a&&(t.flags|=4)};function _s(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags&14680064,a|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,a|=c.subtreeFlags,a|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Fm(e,t,s){var a=t.pendingProps;switch(va(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return dt(t.type)&&fi(),rt(t),null;case 3:return a=t.stateNode,xn(),Ce(ct),Ce(et),Pa(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(yi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dt!==null&&(ol(Dt),Dt=null))),Ja(e,t),rt(t),null;case 5:Ca(t);var c=$r(gs.current);if(s=t.type,e!==null&&t.stateNode!=null)zd(e,t,s,a,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(n(166));return rt(t),null}if(e=$r(Wt.current),yi(t)){a=t.stateNode,s=t.type;var f=t.memoizedProps;switch(a[Ht]=t,a[ds]=f,e=(t.mode&1)!==0,s){case"dialog":Ne("cancel",a),Ne("close",a);break;case"iframe":case"object":case"embed":Ne("load",a);break;case"video":case"audio":for(c=0;c<ls.length;c++)Ne(ls[c],a);break;case"source":Ne("error",a);break;case"img":case"image":case"link":Ne("error",a),Ne("load",a);break;case"details":Ne("toggle",a);break;case"input":_u(a,f),Ne("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Ne("invalid",a);break;case"textarea":ku(a,f),Ne("invalid",a)}To(s,f),c=null;for(var g in f)if(f.hasOwnProperty(g)){var w=f[g];g==="children"?typeof w=="string"?a.textContent!==w&&(f.suppressHydrationWarning!==!0&&ci(a.textContent,w,e),c=["children",w]):typeof w=="number"&&a.textContent!==""+w&&(f.suppressHydrationWarning!==!0&&ci(a.textContent,w,e),c=["children",""+w]):l.hasOwnProperty(g)&&w!=null&&g==="onScroll"&&Ne("scroll",a)}switch(s){case"input":Bs(a),Su(a,f,!0);break;case"textarea":Bs(a),ju(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=di)}a=c,t.updateQueue=a,a!==null&&(t.flags|=4)}else{g=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nu(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=g.createElement(s,{is:a.is}):(e=g.createElement(s),s==="select"&&(g=e,a.multiple?g.multiple=!0:a.size&&(g.size=a.size))):e=g.createElementNS(e,s),e[Ht]=t,e[ds]=a,Md(e,t,!1,!1),t.stateNode=e;e:{switch(g=Po(s,a),s){case"dialog":Ne("cancel",e),Ne("close",e),c=a;break;case"iframe":case"object":case"embed":Ne("load",e),c=a;break;case"video":case"audio":for(c=0;c<ls.length;c++)Ne(ls[c],e);c=a;break;case"source":Ne("error",e),c=a;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),c=a;break;case"details":Ne("toggle",e),c=a;break;case"input":_u(e,a),c=ko(e,a),Ne("invalid",e);break;case"option":c=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},c=J({},a,{value:void 0}),Ne("invalid",e);break;case"textarea":ku(e,a),c=No(e,a),Ne("invalid",e);break;default:c=a}To(s,c),w=c;for(f in w)if(w.hasOwnProperty(f)){var _=w[f];f==="style"?Pu(e,_):f==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&Cu(e,_)):f==="children"?typeof _=="string"?(s!=="textarea"||_!=="")&&Vn(e,_):typeof _=="number"&&Vn(e,""+_):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(l.hasOwnProperty(f)?_!=null&&f==="onScroll"&&Ne("scroll",e):_!=null&&$(e,f,_,g))}switch(s){case"input":Bs(e),Su(e,a,!1);break;case"textarea":Bs(e),ju(e);break;case"option":a.value!=null&&e.setAttribute("value",""+we(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?en(e,!!a.multiple,f,!1):a.defaultValue!=null&&en(e,!!a.multiple,a.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=di)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)Bd(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(n(166));if(s=$r(gs.current),$r(Wt.current),yi(t)){if(a=t.stateNode,s=t.memoizedProps,a[Ht]=t,(f=a.nodeValue!==s)&&(e=yt,e!==null))switch(e.tag){case 3:ci(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ci(a.nodeValue,s,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Ht]=t,t.stateNode=a}return rt(t),null;case 13:if(Ce(Re),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&wt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)qc(),gn(),t.flags|=98560,f=!1;else if(f=yi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[Ht]=t}else gn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rt(t),f=!1}else Dt!==null&&(ol(Dt),Dt=null),f=!0;if(!f)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Re.current&1)!==0?Ve===0&&(Ve=3):ul())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return xn(),Ja(e,t),e===null&&us(t.stateNode.containerInfo),rt(t),null;case 10:return Sa(t.type._context),rt(t),null;case 17:return dt(t.type)&&fi(),rt(t),null;case 19:if(Ce(Re),f=t.memoizedState,f===null)return rt(t),null;if(a=(t.flags&128)!==0,g=f.rendering,g===null)if(a)_s(f,!1);else{if(Ve!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=ki(e),g!==null){for(t.flags|=128,_s(f,!1),a=g.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)f=s,e=a,f.flags&=14680066,g=f.alternate,g===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,e=g.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ke(Re,Re.current&1|2),t.child}e=e.sibling}f.tail!==null&&Le()>kn&&(t.flags|=128,a=!0,_s(f,!1),t.lanes=4194304)}else{if(!a)if(e=ki(g),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),_s(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Pe)return rt(t),null}else 2*Le()-f.renderingStartTime>kn&&s!==1073741824&&(t.flags|=128,a=!0,_s(f,!1),t.lanes=4194304);f.isBackwards?(g.sibling=t.child,t.child=g):(s=f.last,s!==null?s.sibling=g:t.child=g,f.last=g)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Le(),t.sibling=null,s=Re.current,ke(Re,a?s&1|2:s&1),t):(rt(t),null);case 22:case 23:return ll(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(xt&1073741824)!==0&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function Vm(e,t){switch(va(t),t.tag){case 1:return dt(t.type)&&fi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xn(),Ce(ct),Ce(et),Pa(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ca(t),null;case 13:if(Ce(Re),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));gn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Re),null;case 4:return xn(),null;case 10:return Sa(t.type._context),null;case 22:case 23:return ll(),null;case 24:return null;default:return null}}var Ii=!1,nt=!1,qm=typeof WeakSet=="function"?WeakSet:Set,Q=null;function bn(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){De(e,t,a)}else s.current=null}function Qa(e,t,s){try{s()}catch(a){De(e,t,a)}}var Fd=!1;function Hm(e,t){if(la=Zs,e=xc(),ea(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var c=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var g=0,w=-1,_=-1,O=0,z=0,B=e,M=null;t:for(;;){for(var K;B!==s||c!==0&&B.nodeType!==3||(w=g+c),B!==f||a!==0&&B.nodeType!==3||(_=g+a),B.nodeType===3&&(g+=B.nodeValue.length),(K=B.firstChild)!==null;)M=B,B=K;for(;;){if(B===e)break t;if(M===s&&++O===c&&(w=g),M===f&&++z===a&&(_=g),(K=B.nextSibling)!==null)break;B=M,M=B.parentNode}B=K}s=w===-1||_===-1?null:{start:w,end:_}}else s=null}s=s||{start:0,end:0}}else s=null;for(ua={focusedElem:e,selectionRange:s},Zs=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var X=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(X!==null){var Z=X.memoizedProps,Ue=X.memoizedState,T=t.stateNode,S=T.getSnapshotBeforeUpdate(t.elementType===t.type?Z:$t(t.type,Z),Ue);T.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(F){De(t,t.return,F)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return X=Fd,Fd=!1,X}function bs(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&e)===e){var f=c.destroy;c.destroy=void 0,f!==void 0&&Qa(t,s,f)}c=c.next}while(c!==a)}}function Ai(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function Ya(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Vd(e){var t=e.alternate;t!==null&&(e.alternate=null,Vd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ht],delete t[ds],delete t[fa],delete t[Nm],delete t[Cm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qd(e){return e.tag===5||e.tag===3||e.tag===4}function Hd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xa(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=di));else if(a!==4&&(e=e.child,e!==null))for(Xa(e,t,s),e=e.sibling;e!==null;)Xa(e,t,s),e=e.sibling}function Za(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Za(e,t,s),e=e.sibling;e!==null;)Za(e,t,s),e=e.sibling}var Qe=null,Lt=!1;function yr(e,t,s){for(s=s.child;s!==null;)Wd(e,t,s),s=s.sibling}function Wd(e,t,s){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Ks,s)}catch{}switch(s.tag){case 5:nt||bn(s,t);case 6:var a=Qe,c=Lt;Qe=null,yr(e,t,s),Qe=a,Lt=c,Qe!==null&&(Lt?(e=Qe,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Qe.removeChild(s.stateNode));break;case 18:Qe!==null&&(Lt?(e=Qe,s=s.stateNode,e.nodeType===8?ha(e.parentNode,s):e.nodeType===1&&ha(e,s),es(e)):ha(Qe,s.stateNode));break;case 4:a=Qe,c=Lt,Qe=s.stateNode.containerInfo,Lt=!0,yr(e,t,s),Qe=a,Lt=c;break;case 0:case 11:case 14:case 15:if(!nt&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){c=a=a.next;do{var f=c,g=f.destroy;f=f.tag,g!==void 0&&((f&2)!==0||(f&4)!==0)&&Qa(s,t,g),c=c.next}while(c!==a)}yr(e,t,s);break;case 1:if(!nt&&(bn(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(w){De(s,t,w)}yr(e,t,s);break;case 21:yr(e,t,s);break;case 22:s.mode&1?(nt=(a=nt)||s.memoizedState!==null,yr(e,t,s),nt=a):yr(e,t,s);break;default:yr(e,t,s)}}function Kd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new qm),t.forEach(function(a){var c=eg.bind(null,e,a);s.has(a)||(s.add(a),a.then(c,c))})}}function Ut(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];try{var f=e,g=t,w=g;e:for(;w!==null;){switch(w.tag){case 5:Qe=w.stateNode,Lt=!1;break e;case 3:Qe=w.stateNode.containerInfo,Lt=!0;break e;case 4:Qe=w.stateNode.containerInfo,Lt=!0;break e}w=w.return}if(Qe===null)throw Error(n(160));Wd(f,g,c),Qe=null,Lt=!1;var _=c.alternate;_!==null&&(_.return=null),c.return=null}catch(O){De(c,t,O)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Gd(t,e),t=t.sibling}function Gd(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ut(t,e),Gt(e),a&4){try{bs(3,e,e.return),Ai(3,e)}catch(Z){De(e,e.return,Z)}try{bs(5,e,e.return)}catch(Z){De(e,e.return,Z)}}break;case 1:Ut(t,e),Gt(e),a&512&&s!==null&&bn(s,s.return);break;case 5:if(Ut(t,e),Gt(e),a&512&&s!==null&&bn(s,s.return),e.flags&32){var c=e.stateNode;try{Vn(c,"")}catch(Z){De(e,e.return,Z)}}if(a&4&&(c=e.stateNode,c!=null)){var f=e.memoizedProps,g=s!==null?s.memoizedProps:f,w=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{w==="input"&&f.type==="radio"&&f.name!=null&&bu(c,f),Po(w,g);var O=Po(w,f);for(g=0;g<_.length;g+=2){var z=_[g],B=_[g+1];z==="style"?Pu(c,B):z==="dangerouslySetInnerHTML"?Cu(c,B):z==="children"?Vn(c,B):$(c,z,B,O)}switch(w){case"input":Eo(c,f);break;case"textarea":Eu(c,f);break;case"select":var M=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!f.multiple;var K=f.value;K!=null?en(c,!!f.multiple,K,!1):M!==!!f.multiple&&(f.defaultValue!=null?en(c,!!f.multiple,f.defaultValue,!0):en(c,!!f.multiple,f.multiple?[]:"",!1))}c[ds]=f}catch(Z){De(e,e.return,Z)}}break;case 6:if(Ut(t,e),Gt(e),a&4){if(e.stateNode===null)throw Error(n(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(Z){De(e,e.return,Z)}}break;case 3:if(Ut(t,e),Gt(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{es(t.containerInfo)}catch(Z){De(e,e.return,Z)}break;case 4:Ut(t,e),Gt(e);break;case 13:Ut(t,e),Gt(e),c=e.child,c.flags&8192&&(f=c.memoizedState!==null,c.stateNode.isHidden=f,!f||c.alternate!==null&&c.alternate.memoizedState!==null||(rl=Le())),a&4&&Kd(e);break;case 22:if(z=s!==null&&s.memoizedState!==null,e.mode&1?(nt=(O=nt)||z,Ut(t,e),nt=O):Ut(t,e),Gt(e),a&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!z&&(e.mode&1)!==0)for(Q=e,z=e.child;z!==null;){for(B=Q=z;Q!==null;){switch(M=Q,K=M.child,M.tag){case 0:case 11:case 14:case 15:bs(4,M,M.return);break;case 1:bn(M,M.return);var X=M.stateNode;if(typeof X.componentWillUnmount=="function"){a=M,s=M.return;try{t=a,X.props=t.memoizedProps,X.state=t.memoizedState,X.componentWillUnmount()}catch(Z){De(a,s,Z)}}break;case 5:bn(M,M.return);break;case 22:if(M.memoizedState!==null){Yd(B);continue}}K!==null?(K.return=M,Q=K):Yd(B)}z=z.sibling}e:for(z=null,B=e;;){if(B.tag===5){if(z===null){z=B;try{c=B.stateNode,O?(f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(w=B.stateNode,_=B.memoizedProps.style,g=_!=null&&_.hasOwnProperty("display")?_.display:null,w.style.display=Tu("display",g))}catch(Z){De(e,e.return,Z)}}}else if(B.tag===6){if(z===null)try{B.stateNode.nodeValue=O?"":B.memoizedProps}catch(Z){De(e,e.return,Z)}}else if((B.tag!==22&&B.tag!==23||B.memoizedState===null||B===e)&&B.child!==null){B.child.return=B,B=B.child;continue}if(B===e)break e;for(;B.sibling===null;){if(B.return===null||B.return===e)break e;z===B&&(z=null),B=B.return}z===B&&(z=null),B.sibling.return=B.return,B=B.sibling}}break;case 19:Ut(t,e),Gt(e),a&4&&Kd(e);break;case 21:break;default:Ut(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(qd(s)){var a=s;break e}s=s.return}throw Error(n(160))}switch(a.tag){case 5:var c=a.stateNode;a.flags&32&&(Vn(c,""),a.flags&=-33);var f=Hd(e);Za(e,f,c);break;case 3:case 4:var g=a.stateNode.containerInfo,w=Hd(e);Xa(e,w,g);break;default:throw Error(n(161))}}catch(_){De(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Wm(e,t,s){Q=e,Jd(e)}function Jd(e,t,s){for(var a=(e.mode&1)!==0;Q!==null;){var c=Q,f=c.child;if(c.tag===22&&a){var g=c.memoizedState!==null||Ii;if(!g){var w=c.alternate,_=w!==null&&w.memoizedState!==null||nt;w=Ii;var O=nt;if(Ii=g,(nt=_)&&!O)for(Q=c;Q!==null;)g=Q,_=g.child,g.tag===22&&g.memoizedState!==null?Xd(c):_!==null?(_.return=g,Q=_):Xd(c);for(;f!==null;)Q=f,Jd(f),f=f.sibling;Q=c,Ii=w,nt=O}Qd(e)}else(c.subtreeFlags&8772)!==0&&f!==null?(f.return=c,Q=f):Qd(e)}}function Qd(e){for(;Q!==null;){var t=Q;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:nt||Ai(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!nt)if(s===null)a.componentDidMount();else{var c=t.elementType===t.type?s.memoizedProps:$t(t.type,s.memoizedProps);a.componentDidUpdate(c,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Yc(t,f,a);break;case 3:var g=t.updateQueue;if(g!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Yc(t,g,s)}break;case 5:var w=t.stateNode;if(s===null&&t.flags&4){s=w;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&s.focus();break;case"img":_.src&&(s.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var O=t.alternate;if(O!==null){var z=O.memoizedState;if(z!==null){var B=z.dehydrated;B!==null&&es(B)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}nt||t.flags&512&&Ya(t)}catch(M){De(t,t.return,M)}}if(t===e){Q=null;break}if(s=t.sibling,s!==null){s.return=t.return,Q=s;break}Q=t.return}}function Yd(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Q=s;break}Q=t.return}}function Xd(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ai(4,t)}catch(_){De(t,s,_)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var c=t.return;try{a.componentDidMount()}catch(_){De(t,c,_)}}var f=t.return;try{Ya(t)}catch(_){De(t,f,_)}break;case 5:var g=t.return;try{Ya(t)}catch(_){De(t,g,_)}}}catch(_){De(t,t.return,_)}if(t===e){Q=null;break}var w=t.sibling;if(w!==null){w.return=t.return,Q=w;break}Q=t.return}}var Km=Math.ceil,Di=q.ReactCurrentDispatcher,el=q.ReactCurrentOwner,Ct=q.ReactCurrentBatchConfig,me=0,Ke=null,ze=null,Ye=0,xt=0,Sn=fr(0),Ve=0,Ss=null,Ur=0,$i=0,tl=0,ks=null,ft=null,rl=0,kn=1/0,sr=null,Li=!1,nl=null,wr=null,Ui=!1,xr=null,Mi=0,Es=0,sl=null,zi=-1,Bi=0;function lt(){return(me&6)!==0?Le():zi!==-1?zi:zi=Le()}function _r(e){return(e.mode&1)===0?1:(me&2)!==0&&Ye!==0?Ye&-Ye:Pm.transition!==null?(Bi===0&&(Bi=Hu()),Bi):(e=xe,e!==0||(e=window.event,e=e===void 0?16:ec(e.type)),e)}function Mt(e,t,s,a){if(50<Es)throw Es=0,sl=null,Error(n(185));Jn(e,s,a),((me&2)===0||e!==Ke)&&(e===Ke&&((me&2)===0&&($i|=s),Ve===4&&br(e,Ye)),pt(e,a),s===1&&me===0&&(t.mode&1)===0&&(kn=Le()+500,mi&&mr()))}function pt(e,t){var s=e.callbackNode;Pp(e,t);var a=Qs(e,e===Ke?Ye:0);if(a===0)s!==null&&Fu(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&Fu(s),t===1)e.tag===0?Tm(eh.bind(null,e)):Mc(eh.bind(null,e)),Em(function(){(me&6)===0&&mr()}),s=null;else{switch(Wu(a)){case 1:s=Lo;break;case 4:s=Vu;break;case 16:s=Ws;break;case 536870912:s=qu;break;default:s=Ws}s=lh(s,Zd.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Zd(e,t){if(zi=-1,Bi=0,(me&6)!==0)throw Error(n(327));var s=e.callbackNode;if(En()&&e.callbackNode!==s)return null;var a=Qs(e,e===Ke?Ye:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Fi(e,a);else{t=a;var c=me;me|=2;var f=rh();(Ke!==e||Ye!==t)&&(sr=null,kn=Le()+500,zr(e,t));do try{Qm();break}catch(w){th(e,w)}while(!0);ba(),Di.current=f,me=c,ze!==null?t=0:(Ke=null,Ye=0,t=Ve)}if(t!==0){if(t===2&&(c=Uo(e),c!==0&&(a=c,t=il(e,c))),t===1)throw s=Ss,zr(e,0),br(e,a),pt(e,Le()),s;if(t===6)br(e,a);else{if(c=e.current.alternate,(a&30)===0&&!Gm(c)&&(t=Fi(e,a),t===2&&(f=Uo(e),f!==0&&(a=f,t=il(e,f))),t===1))throw s=Ss,zr(e,0),br(e,a),pt(e,Le()),s;switch(e.finishedWork=c,e.finishedLanes=a,t){case 0:case 1:throw Error(n(345));case 2:Br(e,ft,sr);break;case 3:if(br(e,a),(a&130023424)===a&&(t=rl+500-Le(),10<t)){if(Qs(e,0)!==0)break;if(c=e.suspendedLanes,(c&a)!==a){lt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=da(Br.bind(null,e,ft,sr),t);break}Br(e,ft,sr);break;case 4:if(br(e,a),(a&4194240)===a)break;for(t=e.eventTimes,c=-1;0<a;){var g=31-It(a);f=1<<g,g=t[g],g>c&&(c=g),a&=~f}if(a=c,a=Le()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Km(a/1960))-a,10<a){e.timeoutHandle=da(Br.bind(null,e,ft,sr),a);break}Br(e,ft,sr);break;case 5:Br(e,ft,sr);break;default:throw Error(n(329))}}}return pt(e,Le()),e.callbackNode===s?Zd.bind(null,e):null}function il(e,t){var s=ks;return e.current.memoizedState.isDehydrated&&(zr(e,t).flags|=256),e=Fi(e,t),e!==2&&(t=ft,ft=s,t!==null&&ol(t)),e}function ol(e){ft===null?ft=e:ft.push.apply(ft,e)}function Gm(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var c=s[a],f=c.getSnapshot;c=c.value;try{if(!At(f(),c))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function br(e,t){for(t&=~tl,t&=~$i,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-It(t),a=1<<s;e[s]=-1,t&=~a}}function eh(e){if((me&6)!==0)throw Error(n(327));En();var t=Qs(e,0);if((t&1)===0)return pt(e,Le()),null;var s=Fi(e,t);if(e.tag!==0&&s===2){var a=Uo(e);a!==0&&(t=a,s=il(e,a))}if(s===1)throw s=Ss,zr(e,0),br(e,t),pt(e,Le()),s;if(s===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Br(e,ft,sr),pt(e,Le()),null}function al(e,t){var s=me;me|=1;try{return e(t)}finally{me=s,me===0&&(kn=Le()+500,mi&&mr())}}function Mr(e){xr!==null&&xr.tag===0&&(me&6)===0&&En();var t=me;me|=1;var s=Ct.transition,a=xe;try{if(Ct.transition=null,xe=1,e)return e()}finally{xe=a,Ct.transition=s,me=t,(me&6)===0&&mr()}}function ll(){xt=Sn.current,Ce(Sn)}function zr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,km(s)),ze!==null)for(s=ze.return;s!==null;){var a=s;switch(va(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&fi();break;case 3:xn(),Ce(ct),Ce(et),Pa();break;case 5:Ca(a);break;case 4:xn();break;case 13:Ce(Re);break;case 19:Ce(Re);break;case 10:Sa(a.type._context);break;case 22:case 23:ll()}s=s.return}if(Ke=e,ze=e=Sr(e.current,null),Ye=xt=t,Ve=0,Ss=null,tl=$i=Ur=0,ft=ks=null,Dr!==null){for(t=0;t<Dr.length;t++)if(s=Dr[t],a=s.interleaved,a!==null){s.interleaved=null;var c=a.next,f=s.pending;if(f!==null){var g=f.next;f.next=c,a.next=g}s.pending=a}Dr=null}return e}function th(e,t){do{var s=ze;try{if(ba(),Ei.current=Ti,ji){for(var a=Ie.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}ji=!1}if(Lr=0,We=Fe=Ie=null,vs=!1,ys=0,el.current=null,s===null||s.return===null){Ve=1,Ss=t,ze=null;break}e:{var f=e,g=s.return,w=s,_=t;if(t=Ye,w.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var O=_,z=w,B=z.tag;if((z.mode&1)===0&&(B===0||B===11||B===15)){var M=z.alternate;M?(z.updateQueue=M.updateQueue,z.memoizedState=M.memoizedState,z.lanes=M.lanes):(z.updateQueue=null,z.memoizedState=null)}var K=jd(g);if(K!==null){K.flags&=-257,Nd(K,g,w,f,t),K.mode&1&&Ed(f,O,t),t=K,_=O;var X=t.updateQueue;if(X===null){var Z=new Set;Z.add(_),t.updateQueue=Z}else X.add(_);break e}else{if((t&1)===0){Ed(f,O,t),ul();break e}_=Error(n(426))}}else if(Pe&&w.mode&1){var Ue=jd(g);if(Ue!==null){(Ue.flags&65536)===0&&(Ue.flags|=256),Nd(Ue,g,w,f,t),xa(_n(_,w));break e}}f=_=_n(_,w),Ve!==4&&(Ve=2),ks===null?ks=[f]:ks.push(f),f=g;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var T=Sd(f,_,t);Qc(f,T);break e;case 1:w=_;var S=f.type,P=f.stateNode;if((f.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(wr===null||!wr.has(P)))){f.flags|=65536,t&=-t,f.lanes|=t;var F=kd(f,w,t);Qc(f,F);break e}}f=f.return}while(f!==null)}sh(s)}catch(te){t=te,ze===s&&s!==null&&(ze=s=s.return);continue}break}while(!0)}function rh(){var e=Di.current;return Di.current=Ti,e===null?Ti:e}function ul(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),Ke===null||(Ur&268435455)===0&&($i&268435455)===0||br(Ke,Ye)}function Fi(e,t){var s=me;me|=2;var a=rh();(Ke!==e||Ye!==t)&&(sr=null,zr(e,t));do try{Jm();break}catch(c){th(e,c)}while(!0);if(ba(),me=s,Di.current=a,ze!==null)throw Error(n(261));return Ke=null,Ye=0,Ve}function Jm(){for(;ze!==null;)nh(ze)}function Qm(){for(;ze!==null&&!_p();)nh(ze)}function nh(e){var t=ah(e.alternate,e,xt);e.memoizedProps=e.pendingProps,t===null?sh(e):ze=t,el.current=null}function sh(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Fm(s,t,xt),s!==null){ze=s;return}}else{if(s=Vm(s,t),s!==null){s.flags&=32767,ze=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ve=6,ze=null;return}}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);Ve===0&&(Ve=5)}function Br(e,t,s){var a=xe,c=Ct.transition;try{Ct.transition=null,xe=1,Ym(e,t,s,a)}finally{Ct.transition=c,xe=a}return null}function Ym(e,t,s,a){do En();while(xr!==null);if((me&6)!==0)throw Error(n(327));s=e.finishedWork;var c=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(Op(e,f),e===Ke&&(ze=Ke=null,Ye=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ui||(Ui=!0,lh(Ws,function(){return En(),null})),f=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||f){f=Ct.transition,Ct.transition=null;var g=xe;xe=1;var w=me;me|=4,el.current=null,Hm(e,s),Gd(s,e),vm(ua),Zs=!!la,ua=la=null,e.current=s,Wm(s),bp(),me=w,xe=g,Ct.transition=f}else e.current=s;if(Ui&&(Ui=!1,xr=e,Mi=c),f=e.pendingLanes,f===0&&(wr=null),Ep(s.stateNode),pt(e,Le()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)c=t[s],a(c.value,{componentStack:c.stack,digest:c.digest});if(Li)throw Li=!1,e=nl,nl=null,e;return(Mi&1)!==0&&e.tag!==0&&En(),f=e.pendingLanes,(f&1)!==0?e===sl?Es++:(Es=0,sl=e):Es=0,mr(),null}function En(){if(xr!==null){var e=Wu(Mi),t=Ct.transition,s=xe;try{if(Ct.transition=null,xe=16>e?16:e,xr===null)var a=!1;else{if(e=xr,xr=null,Mi=0,(me&6)!==0)throw Error(n(331));var c=me;for(me|=4,Q=e.current;Q!==null;){var f=Q,g=f.child;if((Q.flags&16)!==0){var w=f.deletions;if(w!==null){for(var _=0;_<w.length;_++){var O=w[_];for(Q=O;Q!==null;){var z=Q;switch(z.tag){case 0:case 11:case 15:bs(8,z,f)}var B=z.child;if(B!==null)B.return=z,Q=B;else for(;Q!==null;){z=Q;var M=z.sibling,K=z.return;if(Vd(z),z===O){Q=null;break}if(M!==null){M.return=K,Q=M;break}Q=K}}}var X=f.alternate;if(X!==null){var Z=X.child;if(Z!==null){X.child=null;do{var Ue=Z.sibling;Z.sibling=null,Z=Ue}while(Z!==null)}}Q=f}}if((f.subtreeFlags&2064)!==0&&g!==null)g.return=f,Q=g;else e:for(;Q!==null;){if(f=Q,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:bs(9,f,f.return)}var T=f.sibling;if(T!==null){T.return=f.return,Q=T;break e}Q=f.return}}var S=e.current;for(Q=S;Q!==null;){g=Q;var P=g.child;if((g.subtreeFlags&2064)!==0&&P!==null)P.return=g,Q=P;else e:for(g=S;Q!==null;){if(w=Q,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:Ai(9,w)}}catch(te){De(w,w.return,te)}if(w===g){Q=null;break e}var F=w.sibling;if(F!==null){F.return=w.return,Q=F;break e}Q=w.return}}if(me=c,mr(),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Ks,e)}catch{}a=!0}return a}finally{xe=s,Ct.transition=t}}return!1}function ih(e,t,s){t=_n(s,t),t=Sd(e,t,1),e=vr(e,t,1),t=lt(),e!==null&&(Jn(e,1,t),pt(e,t))}function De(e,t,s){if(e.tag===3)ih(e,e,s);else for(;t!==null;){if(t.tag===3){ih(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(wr===null||!wr.has(a))){e=_n(s,e),e=kd(t,e,1),t=vr(t,e,1),e=lt(),t!==null&&(Jn(t,1,e),pt(t,e));break}}t=t.return}}function Xm(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=lt(),e.pingedLanes|=e.suspendedLanes&s,Ke===e&&(Ye&s)===s&&(Ve===4||Ve===3&&(Ye&130023424)===Ye&&500>Le()-rl?zr(e,0):tl|=s),pt(e,t)}function oh(e,t){t===0&&((e.mode&1)===0?t=1:(t=Js,Js<<=1,(Js&130023424)===0&&(Js=4194304)));var s=lt();e=tr(e,t),e!==null&&(Jn(e,t,s),pt(e,s))}function Zm(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),oh(e,s)}function eg(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(n(314))}a!==null&&a.delete(t),oh(e,s)}var ah;ah=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)ht=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return ht=!1,Bm(e,t,s);ht=(e.flags&131072)!==0}else ht=!1,Pe&&(t.flags&1048576)!==0&&zc(t,vi,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ri(e,t),e=t.pendingProps;var c=fn(t,et.current);wn(t,s),c=Ia(null,t,a,e,c,s);var f=Aa();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(a)?(f=!0,pi(t)):f=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,ja(t),c.updater=Pi,t.stateNode=c,c._reactInternals=t,za(t,a,e,s),t=qa(null,t,a,!0,f,s)):(t.tag=0,Pe&&f&&ga(t),at(null,t,c,s),t=t.child),t;case 16:a=t.elementType;e:{switch(Ri(e,t),e=t.pendingProps,c=a._init,a=c(a._payload),t.type=a,c=t.tag=rg(a),e=$t(a,e),c){case 0:t=Va(null,t,a,e,s);break e;case 1:t=Id(null,t,a,e,s);break e;case 11:t=Cd(null,t,a,e,s);break e;case 14:t=Td(null,t,a,$t(a.type,e),s);break e}throw Error(n(306,a,""))}return t;case 0:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:$t(a,c),Va(e,t,a,c,s);case 1:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:$t(a,c),Id(e,t,a,c,s);case 3:e:{if(Ad(t),e===null)throw Error(n(387));a=t.pendingProps,f=t.memoizedState,c=f.element,Jc(e,t),Si(t,a,null,s);var g=t.memoizedState;if(a=g.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){c=_n(Error(n(423)),t),t=Dd(e,t,a,s,c);break e}else if(a!==c){c=_n(Error(n(424)),t),t=Dd(e,t,a,s,c);break e}else for(wt=hr(t.stateNode.containerInfo.firstChild),yt=t,Pe=!0,Dt=null,s=Kc(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(gn(),a===c){t=nr(e,t,s);break e}at(e,t,a,s)}t=t.child}return t;case 5:return Xc(t),e===null&&wa(t),a=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,g=c.children,ca(a,c)?g=null:f!==null&&ca(a,f)&&(t.flags|=32),Rd(e,t),at(e,t,g,s),t.child;case 6:return e===null&&wa(t),null;case 13:return $d(e,t,s);case 4:return Na(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=vn(t,null,a,s):at(e,t,a,s),t.child;case 11:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:$t(a,c),Cd(e,t,a,c,s);case 7:return at(e,t,t.pendingProps,s),t.child;case 8:return at(e,t,t.pendingProps.children,s),t.child;case 12:return at(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,c=t.pendingProps,f=t.memoizedProps,g=c.value,ke(xi,a._currentValue),a._currentValue=g,f!==null)if(At(f.value,g)){if(f.children===c.children&&!ct.current){t=nr(e,t,s);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var w=f.dependencies;if(w!==null){g=f.child;for(var _=w.firstContext;_!==null;){if(_.context===a){if(f.tag===1){_=rr(-1,s&-s),_.tag=2;var O=f.updateQueue;if(O!==null){O=O.shared;var z=O.pending;z===null?_.next=_:(_.next=z.next,z.next=_),O.pending=_}}f.lanes|=s,_=f.alternate,_!==null&&(_.lanes|=s),ka(f.return,s,t),w.lanes|=s;break}_=_.next}}else if(f.tag===10)g=f.type===t.type?null:f.child;else if(f.tag===18){if(g=f.return,g===null)throw Error(n(341));g.lanes|=s,w=g.alternate,w!==null&&(w.lanes|=s),ka(g,s,t),g=f.sibling}else g=f.child;if(g!==null)g.return=f;else for(g=f;g!==null;){if(g===t){g=null;break}if(f=g.sibling,f!==null){f.return=g.return,g=f;break}g=g.return}f=g}at(e,t,c.children,s),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps.children,wn(t,s),c=jt(c),a=a(c),t.flags|=1,at(e,t,a,s),t.child;case 14:return a=t.type,c=$t(a,t.pendingProps),c=$t(a.type,c),Td(e,t,a,c,s);case 15:return Pd(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,c=t.pendingProps,c=t.elementType===a?c:$t(a,c),Ri(e,t),t.tag=1,dt(a)?(e=!0,pi(t)):e=!1,wn(t,s),_d(t,a,c),za(t,a,c,s),qa(null,t,a,!0,e,s);case 19:return Ud(e,t,s);case 22:return Od(e,t,s)}throw Error(n(156,t.tag))};function lh(e,t){return Bu(e,t)}function tg(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,s,a){return new tg(e,t,s,a)}function cl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rg(e){if(typeof e=="function")return cl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===je)return 11;if(e===G)return 14}return 2}function Sr(e,t){var s=e.alternate;return s===null?(s=Tt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Vi(e,t,s,a,c,f){var g=2;if(a=e,typeof e=="function")cl(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case I:return Fr(s.children,c,f,t);case A:g=8,c|=8;break;case W:return e=Tt(12,s,t,c|2),e.elementType=W,e.lanes=f,e;case Me:return e=Tt(13,s,t,c),e.elementType=Me,e.lanes=f,e;case ot:return e=Tt(19,s,t,c),e.elementType=ot,e.lanes=f,e;case ue:return qi(s,c,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ne:g=10;break e;case be:g=9;break e;case je:g=11;break e;case G:g=14;break e;case fe:g=16,a=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=Tt(g,s,t,c),t.elementType=e,t.type=a,t.lanes=f,t}function Fr(e,t,s,a){return e=Tt(7,e,a,t),e.lanes=s,e}function qi(e,t,s,a){return e=Tt(22,e,a,t),e.elementType=ue,e.lanes=s,e.stateNode={isHidden:!1},e}function dl(e,t,s){return e=Tt(6,e,null,t),e.lanes=s,e}function hl(e,t,s){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ng(e,t,s,a,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mo(0),this.expirationTimes=Mo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mo(0),this.identifierPrefix=a,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function fl(e,t,s,a,c,f,g,w,_){return e=new ng(e,t,s,w,_),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Tt(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ja(f),e}function sg(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:R,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function uh(e){if(!e)return pr;e=e._reactInternals;e:{if(Pr(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var s=e.type;if(dt(s))return Lc(e,s,t)}return t}function ch(e,t,s,a,c,f,g,w,_){return e=fl(s,a,!0,e,c,f,g,w,_),e.context=uh(null),s=e.current,a=lt(),c=_r(s),f=rr(a,c),f.callback=t??null,vr(s,f,c),e.current.lanes=c,Jn(e,c,a),pt(e,a),e}function Hi(e,t,s,a){var c=t.current,f=lt(),g=_r(c);return s=uh(s),t.context===null?t.context=s:t.pendingContext=s,t=rr(f,g),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=vr(c,t,g),e!==null&&(Mt(e,c,g,f),bi(e,c,g)),g}function Wi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function pl(e,t){dh(e,t),(e=e.alternate)&&dh(e,t)}function ig(){return null}var hh=typeof reportError=="function"?reportError:function(e){console.error(e)};function ml(e){this._internalRoot=e}Ki.prototype.render=ml.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));Hi(e,t,null,null)},Ki.prototype.unmount=ml.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mr(function(){Hi(null,e,null,null)}),t[Yt]=null}};function Ki(e){this._internalRoot=e}Ki.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ju();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ur.length&&t!==0&&t<ur[s].priority;s++);ur.splice(s,0,e),s===0&&Xu(e)}};function gl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fh(){}function og(e,t,s,a,c){if(c){if(typeof a=="function"){var f=a;a=function(){var O=Wi(g);f.call(O)}}var g=ch(t,a,e,0,null,!1,!1,"",fh);return e._reactRootContainer=g,e[Yt]=g.current,us(e.nodeType===8?e.parentNode:e),Mr(),g}for(;c=e.lastChild;)e.removeChild(c);if(typeof a=="function"){var w=a;a=function(){var O=Wi(_);w.call(O)}}var _=fl(e,0,!1,null,null,!1,!1,"",fh);return e._reactRootContainer=_,e[Yt]=_.current,us(e.nodeType===8?e.parentNode:e),Mr(function(){Hi(t,_,s,a)}),_}function Ji(e,t,s,a,c){var f=s._reactRootContainer;if(f){var g=f;if(typeof c=="function"){var w=c;c=function(){var _=Wi(g);w.call(_)}}Hi(t,g,e,c)}else g=og(s,t,e,c,a);return Wi(g)}Ku=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Gn(t.pendingLanes);s!==0&&(zo(t,s|1),pt(t,Le()),(me&6)===0&&(kn=Le()+500,mr()))}break;case 13:Mr(function(){var a=tr(e,1);if(a!==null){var c=lt();Mt(a,e,1,c)}}),pl(e,1)}},Bo=function(e){if(e.tag===13){var t=tr(e,134217728);if(t!==null){var s=lt();Mt(t,e,134217728,s)}pl(e,134217728)}},Gu=function(e){if(e.tag===13){var t=_r(e),s=tr(e,t);if(s!==null){var a=lt();Mt(s,e,t,a)}pl(e,t)}},Ju=function(){return xe},Qu=function(e,t){var s=xe;try{return xe=e,t()}finally{xe=s}},Io=function(e,t,s){switch(t){case"input":if(Eo(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var c=hi(a);if(!c)throw Error(n(90));xu(a),Eo(a,c)}}}break;case"textarea":Eu(e,s);break;case"select":t=s.value,t!=null&&en(e,!!s.multiple,t,!1)}},Au=al,Du=Mr;var ag={usingClientEntryPoint:!1,Events:[hs,dn,hi,Ru,Iu,al]},js={findFiberByHostInstance:Or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lg={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Mu(e),e===null?null:e.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||ig,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qi.isDisabled&&Qi.supportsFiber)try{Ks=Qi.inject(lg),qt=Qi}catch{}}return mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ag,mt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gl(t))throw Error(n(200));return sg(e,t,null,s)},mt.createRoot=function(e,t){if(!gl(e))throw Error(n(299));var s=!1,a="",c=hh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=fl(e,1,!1,null,null,s,!1,a,c),e[Yt]=t.current,us(e.nodeType===8?e.parentNode:e),new ml(t)},mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=Mu(t),e=e===null?null:e.stateNode,e},mt.flushSync=function(e){return Mr(e)},mt.hydrate=function(e,t,s){if(!Gi(t))throw Error(n(200));return Ji(null,e,t,!0,s)},mt.hydrateRoot=function(e,t,s){if(!gl(e))throw Error(n(405));var a=s!=null&&s.hydratedSources||null,c=!1,f="",g=hh;if(s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),t=ch(t,null,e,1,s??null,c,!1,f,g),e[Yt]=t.current,us(e),a)for(e=0;e<a.length;e++)s=a[e],c=s._getVersion,c=c(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,c]:t.mutableSourceEagerHydrationData.push(s,c);return new Ki(t)},mt.render=function(e,t,s){if(!Gi(t))throw Error(n(200));return Ji(null,e,t,!1,s)},mt.unmountComponentAtNode=function(e){if(!Gi(e))throw Error(n(40));return e._reactRootContainer?(Mr(function(){Ji(null,null,e,!1,function(){e._reactRootContainer=null,e[Yt]=null})}),!0):!1},mt.unstable_batchedUpdates=al,mt.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Gi(s))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return Ji(e,t,s,!1,a)},mt.version="18.3.1-next-f1338f8080-20240426",mt}var _h;function yg(){if(_h)return wl.exports;_h=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),wl.exports=vg(),wl.exports}var bh;function wg(){if(bh)return Yi;bh=1;var i=yg();return Yi.createRoot=i.createRoot,Yi.hydrateRoot=i.hydrateRoot,Yi}var xg=wg();const _g=eu(xg);var Vt=(i=>(i.ADMIN="ADMIN",i.PROFESSIONAL="PROFESSIONAL",i.CLIENT="CLIENT",i))(Vt||{}),Pt=(i=>(i.PENDING="PENDING",i.CONFIRMED="CONFIRMED",i.COMPLETED="COMPLETED",i.CANCELLED="CANCELLED",i.BLOCKED="BLOCKED",i.NO_SHOW="NO_SHOW",i))(Pt||{}),Is=(i=>(i.INCOME="INCOME",i.EXPENSE="EXPENSE",i))(Is||{}),As=(i=>(i.SERVICE="SERVICE",i.PACKAGE_SALE="PACKAGE_SALE",i.PACKAGE_USAGE="PACKAGE_USAGE",i.PRODUCT_SALE="PRODUCT_SALE",i.COMMISSION="COMMISSION",i.REFUND="REFUND",i.OTHER="OTHER",i))(As||{}),of=(i=>(i.PENDING="PENDING",i.PAID="PAID",i.CANCELLED="CANCELLED",i))(of||{}),Dl=(i=>(i.EARN="EARN",i.REDEEM="REDEEM",i))(Dl||{}),ru=(i=>(i.PURCHASE="PURCHASE",i.USAGE="USAGE",i.ADJUSTMENT="ADJUSTMENT",i.RETURN="RETURN",i))(ru||{}),$l=function(i,r){return $l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(n[l]=o[l])},$l(i,r)};function af(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");$l(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var po=function(){return po=Object.assign||function(r){for(var n,o=1,l=arguments.length;o<l;o++){n=arguments[o];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(r[u]=n[u])}return r},po.apply(this,arguments)};function zn(i,r){var n={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&r.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)r.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(n[o[l]]=i[o[l]]);return n}function lf(i,r,n,o){var l=arguments.length,u=l<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,n):o,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,n,o);else for(var m=i.length-1;m>=0;m--)(d=i[m])&&(u=(l<3?d(u):l>3?d(r,n,u):d(r,n))||u);return l>3&&u&&Object.defineProperty(r,n,u),u}function uf(i,r){return function(n,o){r(n,o,i)}}function cf(i,r,n,o,l,u){function d(D){if(D!==void 0&&typeof D!="function")throw new TypeError("Function expected");return D}for(var m=o.kind,p=m==="getter"?"get":m==="setter"?"set":"value",v=!r&&i?o.static?i:i.prototype:null,y=r||(v?Object.getOwnPropertyDescriptor(v,o.name):{}),x,k=!1,E=n.length-1;E>=0;E--){var b={};for(var C in o)b[C]=C==="access"?{}:o[C];for(var C in o.access)b.access[C]=o.access[C];b.addInitializer=function(D){if(k)throw new TypeError("Cannot add initializers after decoration has completed");u.push(d(D||null))};var j=(0,n[E])(m==="accessor"?{get:y.get,set:y.set}:y[p],b);if(m==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(x=d(j.get))&&(y.get=x),(x=d(j.set))&&(y.set=x),(x=d(j.init))&&l.unshift(x)}else(x=d(j))&&(m==="field"?l.unshift(x):y[p]=x)}v&&Object.defineProperty(v,o.name,y),k=!0}function df(i,r,n){for(var o=arguments.length>2,l=0;l<r.length;l++)n=o?r[l].call(i,n):r[l].call(i);return o?n:void 0}function hf(i){return typeof i=="symbol"?i:"".concat(i)}function ff(i,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function pf(i,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,r)}function Y(i,r,n,o){function l(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function m(y){try{v(o.next(y))}catch(x){d(x)}}function p(y){try{v(o.throw(y))}catch(x){d(x)}}function v(y){y.done?u(y.value):l(y.value).then(m,p)}v((o=o.apply(i,r||[])).next())})}function mf(i,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=m(0),d.throw=m(1),d.return=m(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(v){return function(y){return p([v,y])}}function p(v){if(o)throw new TypeError("Generator is already executing.");for(;d&&(d=0,v[0]&&(n=0)),n;)try{if(o=1,l&&(u=v[0]&2?l.return:v[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,v[1])).done)return u;switch(l=0,u&&(v=[v[0]&2,u.value]),v[0]){case 0:case 1:u=v;break;case 4:return n.label++,{value:v[1],done:!1};case 5:n.label++,l=v[1],v=[0];continue;case 7:v=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(v[0]===6||v[0]===2)){n=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){n.label=v[1];break}if(v[0]===6&&n.label<u[1]){n.label=u[1],u=v;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(v);break}u[2]&&n.ops.pop(),n.trys.pop();continue}v=r.call(i,n)}catch(y){v=[6,y],l=0}finally{o=u=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}var xo=Object.create?(function(i,r,n,o){o===void 0&&(o=n);var l=Object.getOwnPropertyDescriptor(r,n);(!l||("get"in l?!r.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(i,o,l)}):(function(i,r,n,o){o===void 0&&(o=n),i[o]=r[n]});function gf(i,r){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&xo(r,i,n)}function mo(i){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&i[r],o=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function nu(i,r){var n=typeof Symbol=="function"&&i[Symbol.iterator];if(!n)return i;var o=n.call(i),l,u=[],d;try{for(;(r===void 0||r-- >0)&&!(l=o.next()).done;)u.push(l.value)}catch(m){d={error:m}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return u}function vf(){for(var i=[],r=0;r<arguments.length;r++)i=i.concat(nu(arguments[r]));return i}function yf(){for(var i=0,r=0,n=arguments.length;r<n;r++)i+=arguments[r].length;for(var o=Array(i),l=0,r=0;r<n;r++)for(var u=arguments[r],d=0,m=u.length;d<m;d++,l++)o[l]=u[d];return o}function wf(i,r,n){if(n||arguments.length===2)for(var o=0,l=r.length,u;o<l;o++)(u||!(o in r))&&(u||(u=Array.prototype.slice.call(r,0,o)),u[o]=r[o]);return i.concat(u||Array.prototype.slice.call(r))}function Mn(i){return this instanceof Mn?(this.v=i,this):new Mn(i)}function xf(i,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(i,r||[]),l,u=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",d),l[Symbol.asyncIterator]=function(){return this},l;function d(E){return function(b){return Promise.resolve(b).then(E,x)}}function m(E,b){o[E]&&(l[E]=function(C){return new Promise(function(j,D){u.push([E,C,j,D])>1||p(E,C)})},b&&(l[E]=b(l[E])))}function p(E,b){try{v(o[E](b))}catch(C){k(u[0][3],C)}}function v(E){E.value instanceof Mn?Promise.resolve(E.value.v).then(y,x):k(u[0][2],E)}function y(E){p("next",E)}function x(E){p("throw",E)}function k(E,b){E(b),u.shift(),u.length&&p(u[0][0],u[0][1])}}function _f(i){var r,n;return r={},o("next"),o("throw",function(l){throw l}),o("return"),r[Symbol.iterator]=function(){return this},r;function o(l,u){r[l]=i[l]?function(d){return(n=!n)?{value:Mn(i[l](d)),done:!1}:u?u(d):d}:u}}function bf(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i[Symbol.asyncIterator],n;return r?r.call(i):(i=typeof mo=="function"?mo(i):i[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(u){n[u]=i[u]&&function(d){return new Promise(function(m,p){d=i[u](d),l(m,p,d.done,d.value)})}}function l(u,d,m,p){Promise.resolve(p).then(function(v){u({value:v,done:m})},d)}}function Sf(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i}var bg=Object.create?(function(i,r){Object.defineProperty(i,"default",{enumerable:!0,value:r})}):function(i,r){i.default=r},Ll=function(i){return Ll=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},Ll(i)};function kf(i){if(i&&i.__esModule)return i;var r={};if(i!=null)for(var n=Ll(i),o=0;o<n.length;o++)n[o]!=="default"&&xo(r,i,n[o]);return bg(r,i),r}function Ef(i){return i&&i.__esModule?i:{default:i}}function jf(i,r,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?i!==r||!o:!r.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(i):o?o.value:r.get(i)}function Nf(i,r,n,o,l){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?i!==r||!l:!r.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?l.call(i,n):l?l.value=n:r.set(i,n),n}function Cf(i,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?r===i:i.has(r)}function Tf(i,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var o,l;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=r[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=r[Symbol.dispose],n&&(l=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");l&&(o=function(){try{l.call(this)}catch(u){return Promise.reject(u)}}),i.stack.push({value:r,dispose:o,async:n})}else n&&i.stack.push({async:!0});return r}var Sg=typeof SuppressedError=="function"?SuppressedError:function(i,r,n){var o=new Error(n);return o.name="SuppressedError",o.error=i,o.suppressed=r,o};function Pf(i){function r(u){i.error=i.hasError?new Sg(u,i.error,"An error was suppressed during disposal."):u,i.hasError=!0}var n,o=0;function l(){for(;n=i.stack.pop();)try{if(!n.async&&o===1)return o=0,i.stack.push(n),Promise.resolve().then(l);if(n.dispose){var u=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(u).then(l,function(d){return r(d),l()})}else o|=1}catch(d){r(d)}if(o===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return l()}function Of(i,r){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,l,u,d){return o?r?".jsx":".js":l&&(!u||!d)?n:l+u+"."+d.toLowerCase()+"js"}):i}const kg={__extends:af,__assign:po,__rest:zn,__decorate:lf,__param:uf,__esDecorate:cf,__runInitializers:df,__propKey:hf,__setFunctionName:ff,__metadata:pf,__awaiter:Y,__generator:mf,__createBinding:xo,__exportStar:gf,__values:mo,__read:nu,__spread:vf,__spreadArrays:yf,__spreadArray:wf,__await:Mn,__asyncGenerator:xf,__asyncDelegator:_f,__asyncValues:bf,__makeTemplateObject:Sf,__importStar:kf,__importDefault:Ef,__classPrivateFieldGet:jf,__classPrivateFieldSet:Nf,__classPrivateFieldIn:Cf,__addDisposableResource:Tf,__disposeResources:Pf,__rewriteRelativeImportExtension:Of},Eg=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Tf,get __assign(){return po},__asyncDelegator:_f,__asyncGenerator:xf,__asyncValues:bf,__await:Mn,__awaiter:Y,__classPrivateFieldGet:jf,__classPrivateFieldIn:Cf,__classPrivateFieldSet:Nf,__createBinding:xo,__decorate:lf,__disposeResources:Pf,__esDecorate:cf,__exportStar:gf,__extends:af,__generator:mf,__importDefault:Ef,__importStar:kf,__makeTemplateObject:Sf,__metadata:pf,__param:uf,__propKey:hf,__read:nu,__rest:zn,__rewriteRelativeImportExtension:Of,__runInitializers:df,__setFunctionName:ff,__spread:vf,__spreadArray:wf,__spreadArrays:yf,__values:mo,default:kg},Symbol.toStringTag,{value:"Module"})),jg=i=>i?(...r)=>i(...r):(...r)=>fetch(...r);class su extends Error{constructor(r,n="FunctionsError",o){super(r),this.name=n,this.context=o}}class Ng extends su{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class Sh extends su{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class kh extends su{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Ul;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Ul||(Ul={}));class Cg{constructor(r,{headers:n={},customFetch:o,region:l=Ul.Any}={}){this.url=r,this.headers=n,this.region=l,this.fetch=jg(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return Y(this,arguments,void 0,function*(n,o={}){var l;let u,d;try{const{headers:m,method:p,body:v,signal:y,timeout:x}=o;let k={},{region:E}=o;E||(E=this.region);const b=new URL(`${this.url}/${n}`);E&&E!=="any"&&(k["x-region"]=E,b.searchParams.set("forceFunctionRegion",E));let C;v&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(k["Content-Type"]="application/octet-stream",C=v):typeof v=="string"?(k["Content-Type"]="text/plain",C=v):typeof FormData<"u"&&v instanceof FormData?C=v:(k["Content-Type"]="application/json",C=JSON.stringify(v)):C=v;let j=y;x&&(d=new AbortController,u=setTimeout(()=>d.abort(),x),y?(j=d.signal,y.addEventListener("abort",()=>d.abort())):j=d.signal);const D=yield this.fetch(b.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},k),this.headers),m),body:C,signal:j}).catch(ee=>{throw new Ng(ee)}),L=D.headers.get("x-relay-error");if(L&&L==="true")throw new Sh(D);if(!D.ok)throw new kh(D);let $=((l=D.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),q;return $==="application/json"?q=yield D.json():$==="application/octet-stream"||$==="application/pdf"?q=yield D.blob():$==="text/event-stream"?q=D:$==="multipart/form-data"?q=yield D.formData():q=yield D.text(),{data:q,error:null,response:D}}catch(m){return{data:null,error:m,response:m instanceof kh||m instanceof Sh?m.context:void 0}}finally{u&&clearTimeout(u)}})}}var st={};const Bn=dg(Eg);var Xi={},Zi={},eo={},to={},ro={},no={},Eh;function Rf(){if(Eh)return no;Eh=1,Object.defineProperty(no,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return no.default=i,no}var jh;function If(){if(jh)return ro;jh=1,Object.defineProperty(ro,"__esModule",{value:!0});const r=Bn.__importDefault(Rf());class n{constructor(l){var u,d;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(u=l.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=l.signal,this.isMaybeSingle=(d=l.isMaybeSingle)!==null&&d!==void 0?d:!1,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,u){return this.headers=new Headers(this.headers),this.headers.set(l,u),this}then(l,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let m=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var v,y,x,k;let E=null,b=null,C=null,j=p.status,D=p.statusText;if(p.ok){if(this.method!=="HEAD"){const ee=await p.text();ee===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?b=ee:b=JSON.parse(ee))}const $=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),q=(x=p.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");$&&q&&q.length>1&&(C=parseInt(q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(E={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,C=null,j=406,D="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const $=await p.text();try{E=JSON.parse($),Array.isArray(E)&&p.status===404&&(b=[],E=null,j=200,D="OK")}catch{p.status===404&&$===""?(j=204,D="No Content"):E={message:$}}if(E&&this.isMaybeSingle&&(!((k=E?.details)===null||k===void 0)&&k.includes("0 rows"))&&(E=null,j=200,D="OK"),E&&this.shouldThrowOnError)throw new r.default(E)}return{error:E,data:b,count:C,status:j,statusText:D}});return this.shouldThrowOnError||(m=m.catch(p=>{var v,y,x,k,E,b;let C="";const j=p?.cause;if(j){const D=(v=j?.message)!==null&&v!==void 0?v:"",L=(y=j?.code)!==null&&y!==void 0?y:"";C=`${(x=p?.name)!==null&&x!==void 0?x:"FetchError"}: ${p?.message}`,C+=`

Caused by: ${(k=j?.name)!==null&&k!==void 0?k:"Error"}: ${D}`,L&&(C+=` (${L})`),j?.stack&&(C+=`
${j.stack}`)}else C=(E=p?.stack)!==null&&E!==void 0?E:"";return{error:{message:`${(b=p?.name)!==null&&b!==void 0?b:"FetchError"}: ${p?.message}`,details:C,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),m.then(l,u)}returns(){return this}overrideTypes(){return this}}return ro.default=n,ro}var Nh;function Af(){if(Nh)return to;Nh=1,Object.defineProperty(to,"__esModule",{value:!0});const r=Bn.__importDefault(If());class n extends r.default{select(l){let u=!1;const d=(l??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",d),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:u=!0,nullsFirst:d,foreignTable:m,referencedTable:p=m}={}){const v=p?`${p}.order`:"order",y=this.url.searchParams.get(v);return this.url.searchParams.set(v,`${y?`${y},`:""}${l}.${u?"asc":"desc"}${d===void 0?"":d?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:u,referencedTable:d=u}={}){const m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(m,`${l}`),this}range(l,u,{foreignTable:d,referencedTable:m=d}={}){const p=typeof m>"u"?"offset":`${m}.offset`,v=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(p,`${l}`),this.url.searchParams.set(v,`${u-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:u=!1,settings:d=!1,buffers:m=!1,wal:p=!1,format:v="text"}={}){var y;const x=[l?"analyze":null,u?"verbose":null,d?"settings":null,m?"buffers":null,p?"wal":null].filter(Boolean).join("|"),k=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${v}; for="${k}"; options=${x};`),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return to.default=n,to}var Ch;function iu(){if(Ch)return eo;Ch=1,Object.defineProperty(eo,"__esModule",{value:!0});const r=Bn.__importDefault(Af()),n=new RegExp("[,()]");class o extends r.default{eq(u,d){return this.url.searchParams.append(u,`eq.${d}`),this}neq(u,d){return this.url.searchParams.append(u,`neq.${d}`),this}gt(u,d){return this.url.searchParams.append(u,`gt.${d}`),this}gte(u,d){return this.url.searchParams.append(u,`gte.${d}`),this}lt(u,d){return this.url.searchParams.append(u,`lt.${d}`),this}lte(u,d){return this.url.searchParams.append(u,`lte.${d}`),this}like(u,d){return this.url.searchParams.append(u,`like.${d}`),this}likeAllOf(u,d){return this.url.searchParams.append(u,`like(all).{${d.join(",")}}`),this}likeAnyOf(u,d){return this.url.searchParams.append(u,`like(any).{${d.join(",")}}`),this}ilike(u,d){return this.url.searchParams.append(u,`ilike.${d}`),this}ilikeAllOf(u,d){return this.url.searchParams.append(u,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(u,d){return this.url.searchParams.append(u,`ilike(any).{${d.join(",")}}`),this}regexMatch(u,d){return this.url.searchParams.append(u,`match.${d}`),this}regexIMatch(u,d){return this.url.searchParams.append(u,`imatch.${d}`),this}is(u,d){return this.url.searchParams.append(u,`is.${d}`),this}isDistinct(u,d){return this.url.searchParams.append(u,`isdistinct.${d}`),this}in(u,d){const m=Array.from(new Set(d)).map(p=>typeof p=="string"&&n.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(u,`in.(${m})`),this}contains(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cs.{${d.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(d)}`),this}containedBy(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cd.{${d.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(d)}`),this}rangeGt(u,d){return this.url.searchParams.append(u,`sr.${d}`),this}rangeGte(u,d){return this.url.searchParams.append(u,`nxl.${d}`),this}rangeLt(u,d){return this.url.searchParams.append(u,`sl.${d}`),this}rangeLte(u,d){return this.url.searchParams.append(u,`nxr.${d}`),this}rangeAdjacent(u,d){return this.url.searchParams.append(u,`adj.${d}`),this}overlaps(u,d){return typeof d=="string"?this.url.searchParams.append(u,`ov.${d}`):this.url.searchParams.append(u,`ov.{${d.join(",")}}`),this}textSearch(u,d,{config:m,type:p}={}){let v="";p==="plain"?v="pl":p==="phrase"?v="ph":p==="websearch"&&(v="w");const y=m===void 0?"":`(${m})`;return this.url.searchParams.append(u,`${v}fts${y}.${d}`),this}match(u){return Object.entries(u).forEach(([d,m])=>{this.url.searchParams.append(d,`eq.${m}`)}),this}not(u,d,m){return this.url.searchParams.append(u,`not.${d}.${m}`),this}or(u,{foreignTable:d,referencedTable:m=d}={}){const p=m?`${m}.or`:"or";return this.url.searchParams.append(p,`(${u})`),this}filter(u,d,m){return this.url.searchParams.append(u,`${d}.${m}`),this}}return eo.default=o,eo}var Th;function Df(){if(Th)return Zi;Th=1,Object.defineProperty(Zi,"__esModule",{value:!0});const r=Bn.__importDefault(iu());class n{constructor(l,{headers:u={},schema:d,fetch:m}){this.url=l,this.headers=new Headers(u),this.schema=d,this.fetch=m}select(l,u){const{head:d=!1,count:m}=u??{},p=d?"HEAD":"GET";let v=!1;const y=(l??"*").split("").map(x=>/\s/.test(x)&&!v?"":(x==='"'&&(v=!v),x)).join("");return this.url.searchParams.set("select",y),m&&this.headers.append("Prefer",`count=${m}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:u,defaultToNull:d=!0}={}){var m;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const v=l.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(v.length>0){const y=[...new Set(v)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(l,{onConflict:u,ignoreDuplicates:d=!1,count:m,defaultToNull:p=!0}={}){var v;const y="POST";if(this.headers.append("Prefer",`resolution=${d?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),m&&this.headers.append("Prefer",`count=${m}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const x=l.reduce((k,E)=>k.concat(Object.keys(E)),[]);if(x.length>0){const k=[...new Set(x)].map(E=>`"${E}"`);this.url.searchParams.set("columns",k.join(","))}}return new r.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(l,{count:u}={}){var d;const m="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}delete({count:l}={}){var u;const d="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new r.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Zi.default=n,Zi}var Ph;function Tg(){if(Ph)return Xi;Ph=1,Object.defineProperty(Xi,"__esModule",{value:!0});const i=Bn,r=i.__importDefault(Df()),n=i.__importDefault(iu());class o{constructor(u,{headers:d={},schema:m,fetch:p}={}){this.url=u,this.headers=new Headers(d),this.schemaName=m,this.fetch=p}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const d=new URL(`${this.url}/${u}`);return new r.default(d,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new o(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,d={},{head:m=!1,get:p=!1,count:v}={}){var y;let x;const k=new URL(`${this.url}/rpc/${u}`);let E;m||p?(x=m?"HEAD":"GET",Object.entries(d).filter(([C,j])=>j!==void 0).map(([C,j])=>[C,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([C,j])=>{k.searchParams.append(C,j)})):(x="POST",E=d);const b=new Headers(this.headers);return v&&b.set("Prefer",`count=${v}`),new n.default({method:x,url:k,headers:b,schema:this.schemaName,body:E,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Xi.default=o,Xi}var Oh;function Pg(){if(Oh)return st;Oh=1,Object.defineProperty(st,"__esModule",{value:!0}),st.PostgrestError=st.PostgrestBuilder=st.PostgrestTransformBuilder=st.PostgrestFilterBuilder=st.PostgrestQueryBuilder=st.PostgrestClient=void 0;const i=Bn,r=i.__importDefault(Tg());st.PostgrestClient=r.default;const n=i.__importDefault(Df());st.PostgrestQueryBuilder=n.default;const o=i.__importDefault(iu());st.PostgrestFilterBuilder=o.default;const l=i.__importDefault(Af());st.PostgrestTransformBuilder=l.default;const u=i.__importDefault(If());st.PostgrestBuilder=u.default;const d=i.__importDefault(Rf());return st.PostgrestError=d.default,st.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:u.default,PostgrestError:d.default},st}var $f=Pg();const Lf=eu($f),Og=cg({__proto__:null,default:Lf},[$f]),{PostgrestClient:Rg,PostgrestQueryBuilder:nw,PostgrestFilterBuilder:sw,PostgrestTransformBuilder:iw,PostgrestBuilder:ow,PostgrestError:aw}=Lf||Og;class Ig{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,l=parseInt(o.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const o=this.getWebSocketConstructor();return new o(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Ag="2.86.0",Dg=`realtime-js/${Ag}`,Uf="1.0.0",$g="2.0.0",Rh=Uf,Ml=1e4,Lg=1e3,Ug=100;var Kr;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Kr||(Kr={}));var qe;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(qe||(qe={}));var Ft;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Ft||(Ft={}));var zl;(function(i){i.websocket="websocket"})(zl||(zl={}));var Gr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Gr||(Gr={}));class Mg{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,o;const l=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(r){var n,o;const l=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},d=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(r,n,o){var l,u;const d=r.topic,m=(l=r.ref)!==null&&l!==void 0?l:"",p=(u=r.join_ref)!==null&&u!==void 0?u:"",v=r.payload.event,y=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},x=Object.keys(y).length===0?"":JSON.stringify(y);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const k=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+d.length+v.length+x.length,E=new ArrayBuffer(this.HEADER_LENGTH+k);let b=new DataView(E),C=0;b.setUint8(C++,this.KINDS.userBroadcastPush),b.setUint8(C++,p.length),b.setUint8(C++,m.length),b.setUint8(C++,d.length),b.setUint8(C++,v.length),b.setUint8(C++,x.length),b.setUint8(C++,n),Array.from(p,D=>b.setUint8(C++,D.charCodeAt(0))),Array.from(m,D=>b.setUint8(C++,D.charCodeAt(0))),Array.from(d,D=>b.setUint8(C++,D.charCodeAt(0))),Array.from(v,D=>b.setUint8(C++,D.charCodeAt(0))),Array.from(x,D=>b.setUint8(C++,D.charCodeAt(0)));var j=new Uint8Array(E.byteLength+o.byteLength);return j.set(new Uint8Array(E),0),j.set(new Uint8Array(o),E.byteLength),j.buffer}decode(r,n){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return n(o)}if(typeof r=="string"){const o=JSON.parse(r),[l,u,d,m,p]=o;return n({join_ref:l,ref:u,topic:d,event:m,payload:p})}return n({})}_binaryDecode(r){const n=new DataView(r),o=n.getUint8(0),l=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,n,l)}}_decodeUserBroadcast(r,n,o){const l=n.getUint8(1),u=n.getUint8(2),d=n.getUint8(3),m=n.getUint8(4);let p=this.HEADER_LENGTH+4;const v=o.decode(r.slice(p,p+l));p=p+l;const y=o.decode(r.slice(p,p+u));p=p+u;const x=o.decode(r.slice(p,p+d));p=p+d;const k=r.slice(p,r.byteLength),E=m===this.JSON_ENCODING?JSON.parse(o.decode(k)):k,b={type:this.BROADCAST_EVENT,event:y,payload:E};return d>0&&(b.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(r,n){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>n.includes(o)))}}class Mf{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ee;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ee||(Ee={}));const Ih=(i,r,n={})=>{var o;const l=(o=n.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((u,d)=>(u[d]=zg(d,i,r,l),u),{}):{}},zg=(i,r,n,o)=>{const l=r.find(m=>m.name===i),u=l?.type,d=n[i];return u&&!o.includes(u)?zf(u,d):Bl(d)},zf=(i,r)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return qg(r,n)}switch(i){case Ee.bool:return Bg(r);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return Fg(r);case Ee.json:case Ee.jsonb:return Vg(r);case Ee.timestamp:return Hg(r);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return Bl(r);default:return Bl(r)}},Bl=i=>i,Bg=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Fg=i=>{if(typeof i=="string"){const r=parseFloat(i);if(!Number.isNaN(r))return r}return i},Vg=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(r){return console.log(`JSON parse error: ${r}`),i}return i},qg=(i,r)=>{if(typeof i!="string")return i;const n=i.length-1,o=i[n];if(i[0]==="{"&&o==="}"){let u;const d=i.slice(1,n);try{u=JSON.parse("["+d+"]")}catch{u=d?d.split(","):[]}return u.map(m=>zf(r,m))}return i},Hg=i=>typeof i=="string"?i.replace(" ","T"):i,Bf=i=>{const r=new URL(i);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class bl{constructor(r,n,o={},l=Ml){this.channel=r,this.event=n,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var o;return this._hasReceived(r)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Ah;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Ah||(Ah={}));class Ps{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:u,onLeave:d,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ps.syncState(this.state,l,u,d),this.pendingDiffs.forEach(p=>{this.state=Ps.syncDiff(this.state,p,u,d)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},l=>{const{onJoin:u,onLeave:d,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=Ps.syncDiff(this.state,l,u,d),m())}),this.onJoin((l,u,d)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:d})}),this.onLeave((l,u,d)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,o,l){const u=this.cloneDeep(r),d=this.transformState(n),m={},p={};return this.map(u,(v,y)=>{d[v]||(p[v]=y)}),this.map(d,(v,y)=>{const x=u[v];if(x){const k=y.map(j=>j.presence_ref),E=x.map(j=>j.presence_ref),b=y.filter(j=>E.indexOf(j.presence_ref)<0),C=x.filter(j=>k.indexOf(j.presence_ref)<0);b.length>0&&(m[v]=b),C.length>0&&(p[v]=C)}else m[v]=y}),this.syncDiff(u,{joins:m,leaves:p},o,l)}static syncDiff(r,n,o,l){const{joins:u,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(u,(m,p)=>{var v;const y=(v=r[m])!==null&&v!==void 0?v:[];if(r[m]=this.cloneDeep(p),y.length>0){const x=r[m].map(E=>E.presence_ref),k=y.filter(E=>x.indexOf(E.presence_ref)<0);r[m].unshift(...k)}o(m,y,p)}),this.map(d,(m,p)=>{let v=r[m];if(!v)return;const y=p.map(x=>x.presence_ref);v=v.filter(x=>y.indexOf(x.presence_ref)<0),r[m]=v,l(m,v,p),v.length===0&&delete r[m]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(o=>n(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,o)=>{const l=r[o];return"metas"in l?n[o]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[o]=l,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dh;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Dh||(Dh={}));var Os;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Os||(Os={}));var ir;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(ir||(ir={}));class ou{constructor(r,n={config:{}},o){var l,u;if(this.topic=r,this.params=n,this.socket=o,this.bindings={},this.state=qe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new bl(this,Ft.join,this.params,this.timeout),this.rejoinTimer=new Mf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qe.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=qe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ft.reply,{},(d,m)=>{this._trigger(this._replyEventName(m),d)}),this.presence=new Ps(this),this.broadcastEndpointURL=Bf(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var o,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==qe.closed){const{config:{broadcast:d,presence:m,private:p}}=this.params,v=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(E=>E.filter))!==null&&l!==void 0?l:[],y=!!this.bindings[Os.PRESENCE]&&this.bindings[Os.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,x={},k={broadcast:d,presence:Object.assign(Object.assign({},m),{enabled:y}),postgres_changes:v,private:p};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(E=>r?.(ir.CHANNEL_ERROR,E)),this._onClose(()=>r?.(ir.CLOSED)),this.updateJoinPayload(Object.assign({config:k},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:E})=>{var b;if(this.socket.setAuth(),E===void 0){r?.(ir.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,j=(b=C?.length)!==null&&b!==void 0?b:0,D=[];for(let L=0;L<j;L++){const $=C[L],{filter:{event:q,schema:ee,table:R,filter:I}}=$,A=E&&E[L];if(A&&A.event===q&&A.schema===ee&&A.table===R&&A.filter===I)D.push(Object.assign(Object.assign({},$),{id:A.id}));else{this.unsubscribe(),this.state=qe.errored,r?.(ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,r&&r(ir.SUBSCRIBED);return}}).receive("error",E=>{this.state=qe.errored,r?.(ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{r?.(ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,o){return this.state===qe.joined&&r===Os.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,n,o)}async httpSend(r,n,o={}){var l;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const d={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const v=await m.json();p=v.error||v.message||p}catch{}return Promise.reject(new Error(p))}async send(r,n={}){var o,l;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:d}=r,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:d,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=v.body)===null||l===void 0?void 0:l.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var d,m,p;const v=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(m=(d=this.params)===null||d===void 0?void 0:d.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),v.receive("ok",()=>u("ok")),v.receive("error",()=>u("error")),v.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=qe.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ft.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new bl(this,Ft.leave,{},r),o.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qe.closed,this.bindings={}}async _fetchWithTimeout(r,n,o){const l=new AbortController,u=setTimeout(()=>l.abort(),o),d=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(u),d}_push(r,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new bl(this,r,n,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Ug){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,o){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,o){var l,u;const d=r.toLocaleLowerCase(),{close:m,error:p,leave:v,join:y}=Ft;if(o&&[m,p,v,y].indexOf(d)>=0&&o!==this._joinRef())return;let k=this._onMessage(d,n,o);if(n&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(E=>{var b,C,j;return((b=E.filter)===null||b===void 0?void 0:b.event)==="*"||((j=(C=E.filter)===null||C===void 0?void 0:C.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===d}).map(E=>E.callback(k,o)):(u=this.bindings[d])===null||u===void 0||u.filter(E=>{var b,C,j,D,L,$;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in E){const q=E.id,ee=(b=E.filter)===null||b===void 0?void 0:b.event;return q&&((C=n.ids)===null||C===void 0?void 0:C.includes(q))&&(ee==="*"||ee?.toLocaleLowerCase()===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const q=(L=(D=E?.filter)===null||D===void 0?void 0:D.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return q==="*"||q===(($=n?.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===d}).map(E=>{if(typeof k=="object"&&"ids"in k){const b=k.data,{schema:C,table:j,commit_timestamp:D,type:L,errors:$}=b;k=Object.assign(Object.assign({},{schema:C,table:j,commit_timestamp:D,eventType:L,new:{},old:{},errors:$}),this._getPayloadRecords(b))}E.callback(k,o)})}_isClosed(){return this.state===qe.closed}_isJoined(){return this.state===qe.joined}_isJoining(){return this.state===qe.joining}_isLeaving(){return this.state===qe.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,o){const l=r.toLocaleLowerCase(),u={type:l,filter:n,callback:o};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(r,n){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&ou.isEqual(l.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const o in r)if(r[o]!==n[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Ft.close,{},r)}_onError(r){this._on(Ft.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qe.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=Ih(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=Ih(r.columns,r.old_record)),n}}const Sl=()=>{},so={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Wg=[1e3,2e3,5e3,1e4],Kg=1e4,Gg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Jg{constructor(r,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ml,this.transport=null,this.heartbeatIntervalMs=so.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sl,this.ref=0,this.reconnectTimer=null,this.vsn=Rh,this.logger=Sl,this.conn=null,this.sendBuffer=[],this.serializer=new Mg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>l?(...u)=>l(...u):(...u)=>fetch(...u),!(!((o=n?.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${zl.websocket}`,this.httpEndpoint=Bf(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ig.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,o){this.logger(r,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Kr.connecting:return Gr.Connecting;case Kr.open:return Gr.Open;case Kr.closing:return Gr.Closing;default:return Gr.Closed}}isConnected(){return this.connectionState()===Gr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const o=`realtime:${r}`,l=this.getChannels().find(u=>u.topic===o);if(l)return l;{const u=new ou(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:o,payload:l,ref:u}=r,d=()=>{this.encode(r,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${n} ${o} (${u})`,l),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Lg,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},so.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:l,payload:u,ref:d}=n,m=d?`(${d})`:"",p=u.status||"";this.log("receive",`${p} ${o} ${l} ${m}`.trim(),u),this.channels.filter(v=>v._isMember(o)).forEach(v=>v._trigger(l,u,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Kr.open||this.conn.readyState===Kr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(Ft.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const o=r.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${r}${o}${l}`}_workerObjectUrl(r){let n;if(r)n=r;else{const o=new Blob([Gg],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n;r?n=r:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const l={access_token:n,version:Dg};n&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(Ft.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(n)}catch(l){this.log("error",`error in ${r} callback`,l)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Mf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},so.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,o,l,u,d,m,p,v,y,x,k,E;switch(this.transport=(n=r?.transport)!==null&&n!==void 0?n:null,this.timeout=(o=r?.timeout)!==null&&o!==void 0?o:Ml,this.heartbeatIntervalMs=(l=r?.heartbeatIntervalMs)!==null&&l!==void 0?l:so.HEARTBEAT_INTERVAL,this.worker=(u=r?.worker)!==null&&u!==void 0?u:!1,this.accessToken=(d=r?.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(m=r?.heartbeatCallback)!==null&&m!==void 0?m:Sl,this.vsn=(p=r?.vsn)!==null&&p!==void 0?p:Rh,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=r?.reconnectAfterMs)!==null&&v!==void 0?v:(b=>Wg[b-1]||Kg),this.vsn){case Uf:this.encode=(y=r?.encode)!==null&&y!==void 0?y:((b,C)=>C(JSON.stringify(b))),this.decode=(x=r?.decode)!==null&&x!==void 0?x:((b,C)=>C(JSON.parse(b)));break;case $g:this.encode=(k=r?.encode)!==null&&k!==void 0?k:this.serializer.encode.bind(this.serializer),this.decode=(E=r?.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}class _o extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function Ae(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Qg extends _o{constructor(r,n,o){super(r),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Fl extends _o{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}const au=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Yg=()=>Response,Vl=i=>{if(Array.isArray(i))return i.map(n=>Vl(n));if(typeof i=="function"||i!==Object(i))return i;const r={};return Object.entries(i).forEach(([n,o])=>{const l=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[l]=Vl(o)}),r},Xg=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Zg=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i),kl=i=>{var r;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(r=i.error)===null||r===void 0?void 0:r.message)||JSON.stringify(i)},e0=(i,r,n)=>Y(void 0,void 0,void 0,function*(){const o=yield Yg();i instanceof o&&!n?.noResolveJson?i.json().then(l=>{const u=i.status||500,d=l?.statusCode||u+"";r(new Qg(kl(l),u,d))}).catch(l=>{r(new Fl(kl(l),l))}):r(new Fl(kl(i),i))}),t0=(i,r,n,o)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"||!o?l:(Xg(o)?(l.headers=Object.assign({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(o)):l.body=o,r?.duplex&&(l.duplex=r.duplex),Object.assign(Object.assign({},l),n))};function zs(i,r,n,o,l,u){return Y(this,void 0,void 0,function*(){return new Promise((d,m)=>{i(n,t0(r,o,l,u)).then(p=>{if(!p.ok)throw p;return o?.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>e0(p,m,o))})})}function Ds(i,r,n,o){return Y(this,void 0,void 0,function*(){return zs(i,"GET",r,n,o)})}function Bt(i,r,n,o,l){return Y(this,void 0,void 0,function*(){return zs(i,"POST",r,o,l,n)})}function ql(i,r,n,o,l){return Y(this,void 0,void 0,function*(){return zs(i,"PUT",r,o,l,n)})}function r0(i,r,n,o){return Y(this,void 0,void 0,function*(){return zs(i,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function lu(i,r,n,o,l){return Y(this,void 0,void 0,function*(){return zs(i,"DELETE",r,o,l,n)})}class n0{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n}then(r,n){return this.execute().then(r,n)}execute(){return Y(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}}var Ff;class s0{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n,this[Ff]="BlobDownloadBuilder",this.promise=null}asStream(){return new n0(this.downloadFn,this.shouldThrowOnError)}then(r,n){return this.getPromise().then(r,n)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Y(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}}Ff=Symbol.toStringTag;const i0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$h={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class o0{constructor(r,n={},o,l){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=o,this.fetch=au(l)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,n,o,l){return Y(this,void 0,void 0,function*(){try{let u;const d=Object.assign(Object.assign({},$h),l);let m=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.has("cacheControl")||u.append("cacheControl",d.cacheControl),p&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(p))):(u=o,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType,p&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!d.duplex&&(d.duplex="half")),l?.headers&&(m=Object.assign(Object.assign({},m),l.headers));const v=this._removeEmptyFolders(n),y=this._getFinalPath(v),x=yield(r=="PUT"?ql:Bt)(this.fetch,`${this.url}/object/${y}`,u,Object.assign({headers:m},d?.duplex?{duplex:d.duplex}:{}));return{data:{path:v,id:x.Id,fullPath:x.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ae(u))return{data:null,error:u};throw u}})}upload(r,n,o){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,o)})}uploadToSignedUrl(r,n,o,l){return Y(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),m=new URL(this.url+`/object/upload/sign/${d}`);m.searchParams.set("token",n);try{let p;const v=Object.assign({upsert:$h.upsert},l),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",v.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",v.cacheControl)):(p=o,y["cache-control"]=`max-age=${v.cacheControl}`,y["content-type"]=v.contentType);const x=yield ql(this.fetch,m.toString(),p,{headers:y});return{data:{path:u,fullPath:x.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(Ae(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(r,n){return Y(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r);const l=Object.assign({},this.headers);n?.upsert&&(l["x-upsert"]="true");const u=yield Bt(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:l}),d=new URL(this.url+u.url),m=d.searchParams.get("token");if(!m)throw new _o("No token returned by API");return{data:{signedUrl:d.toString(),path:r,token:m},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ae(o))return{data:null,error:o};throw o}})}update(r,n,o){return Y(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,o)})}move(r,n,o){return Y(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ae(l))return{data:null,error:l};throw l}})}copy(r,n,o){return Y(this,void 0,void 0,function*(){try{return{data:{path:(yield Bt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:o?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ae(l))return{data:null,error:l};throw l}})}createSignedUrl(r,n,o){return Y(this,void 0,void 0,function*(){try{let l=this._getFinalPath(r),u=yield Bt(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},o?.transform?{transform:o.transform}:{}),{headers:this.headers});const d=o?.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${d}`)},{data:u,error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ae(l))return{data:null,error:l};throw l}})}createSignedUrls(r,n,o){return Y(this,void 0,void 0,function*(){try{const l=yield Bt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=o?.download?`&download=${o.download===!0?"":o.download}`:"";return{data:l.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${u}`):null})),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ae(l))return{data:null,error:l};throw l}})}download(r,n){const l=typeof n?.transform<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString(n?.transform||{}),d=u?`?${u}`:"",m=this._getFinalPath(r),p=()=>Ds(this.fetch,`${this.url}/${l}/${m}${d}`,{headers:this.headers,noResolveJson:!0});return new s0(p,this.shouldThrowOnError)}info(r){return Y(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const o=yield Ds(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Vl(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ae(o))return{data:null,error:o};throw o}})}exists(r){return Y(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield r0(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ae(o)&&o instanceof Fl){const l=o.originalError;if([400,404].includes(l?.status))return{data:!1,error:o}}throw o}})}getPublicUrl(r,n){const o=this._getFinalPath(r),l=[],u=n?.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&l.push(u);const m=typeof n?.transform<"u"?"render/image":"object",p=this.transformOptsToQueryString(n?.transform||{});p!==""&&l.push(p);let v=l.join("&");return v!==""&&(v=`?${v}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${o}${v}`)}}}remove(r){return Y(this,void 0,void 0,function*(){try{return{data:yield lu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}list(r,n,o){return Y(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},i0),n),{prefix:r||""});return{data:yield Bt(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},o),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ae(l))return{data:null,error:l};throw l}})}listV2(r,n){return Y(this,void 0,void 0,function*(){try{const o=Object.assign({},r);return{data:yield Bt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ae(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const Vf="2.86.0",qf={"X-Client-Info":`storage-js/${Vf}`};class a0{constructor(r,n={},o,l){this.shouldThrowOnError=!1;const u=new URL(r);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qf),n),this.fetch=au(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return Y(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(r);return{data:yield Ds(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}getBucket(r){return Y(this,void 0,void 0,function*(){try{return{data:yield Ds(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}createBucket(r){return Y(this,arguments,void 0,function*(n,o={public:!1}){try{return{data:yield Bt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ae(l))return{data:null,error:l};throw l}})}updateBucket(r,n){return Y(this,void 0,void 0,function*(){try{return{data:yield ql(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Ae(o))return{data:null,error:o};throw o}})}emptyBucket(r){return Y(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}deleteBucket(r){return Y(this,void 0,void 0,function*(){try{return{data:yield lu(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(r){const n={};return r&&("limit"in r&&(n.limit=String(r.limit)),"offset"in r&&(n.offset=String(r.offset)),r.search&&(n.search=r.search),r.sortColumn&&(n.sortColumn=r.sortColumn),r.sortOrder&&(n.sortOrder=r.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var $s=class extends Error{constructor(i,r){super(i),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function l0(i,r,n){const o=new URL(r,i);if(n)for(const[l,u]of Object.entries(n))u!==void 0&&o.searchParams.set(l,u);return o.toString()}async function u0(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function c0(i){const r=i.fetchImpl??globalThis.fetch;return{async request({method:n,path:o,query:l,body:u,headers:d}){const m=l0(i.baseUrl,o,l),p=await u0(i.auth),v=await r(m,{method:n,headers:{...u?{"Content-Type":"application/json"}:{},...p,...d},body:u?JSON.stringify(u):void 0}),y=await v.text(),x=(v.headers.get("content-type")||"").includes("application/json"),k=x&&y?JSON.parse(y):y;if(!v.ok){const E=x?k:void 0,b=E?.error;throw new $s(b?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:b?.type,icebergCode:b?.code,details:E})}return{status:v.status,headers:v.headers,data:k}}}}function io(i){return i.join("")}var d0=class{constructor(i,r=""){this.client=i,this.prefix=r}async listNamespaces(i){const r=i?{parent:io(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(i,r){const n={namespace:i.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${io(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${io(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${io(i.namespace)}`}),!0}catch(r){if(r instanceof $s&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(i,r){try{return await this.createNamespace(i,r)}catch(n){if(n instanceof $s&&n.status===409)return;throw n}}};function jn(i){return i.join("")}var h0=class{constructor(i,r="",n){this.client=i,this.prefix=r,this.accessDelegation=n}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jn(i.namespace)}/tables`})).data.identifiers}async createTable(i,r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${jn(i.namespace)}/tables`,body:r,headers:n})).data.metadata}async updateTable(i,r){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${jn(i.namespace)}/tables/${i.name}`,body:r});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(i,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${jn(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(i){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${jn(i.namespace)}/tables/${i.name}`,headers:r})).data.metadata}async tableExists(i){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${jn(i.namespace)}/tables/${i.name}`,headers:r}),!0}catch(n){if(n instanceof $s&&n.status===404)return!1;throw n}}async createTableIfNotExists(i,r){try{return await this.createTable(i,r)}catch(n){if(n instanceof $s&&n.status===409)return await this.loadTable({namespace:i.namespace,name:r.name});throw n}}},f0=class{constructor(i){let r="v1";i.catalogName&&(r+=`/${i.catalogName}`);const n=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=c0({baseUrl:n,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=i.accessDelegation?.join(","),this.namespaceOps=new d0(this.client,r),this.tableOps=new h0(this.client,r,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,r){return this.namespaceOps.createNamespace(i,r)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,r){return this.tableOps.createTable(i,r)}async updateTable(i,r){return this.tableOps.updateTable(i,r)}async dropTable(i,r){await this.tableOps.dropTable(i,r)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,r){return this.namespaceOps.createNamespaceIfNotExists(i,r)}async createTableIfNotExists(i,r){return this.tableOps.createTableIfNotExists(i,r)}};class p0{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},qf),n),this.fetch=au(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return Y(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}listBuckets(r){return Y(this,void 0,void 0,function*(){try{const n=new URLSearchParams;r?.limit!==void 0&&n.set("limit",r.limit.toString()),r?.offset!==void 0&&n.set("offset",r.offset.toString()),r?.sortColumn&&n.set("sortColumn",r.sortColumn),r?.sortOrder&&n.set("sortOrder",r.sortOrder),r?.search&&n.set("search",r.search);const o=n.toString(),l=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield Ds(this.fetch,l,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}deleteBucket(r){return Y(this,void 0,void 0,function*(){try{return{data:yield lu(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}from(r){if(!Zg(r))throw new _o("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new f0({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>Y(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const uu={"X-Client-Info":`storage-js/${Vf}`,"Content-Type":"application/json"};class Hf extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function bt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class El extends Hf{constructor(r,n,o){super(r),this.name="StorageVectorsApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class m0 extends Hf{constructor(r,n){super(r),this.name="StorageVectorsUnknownError",this.originalError=n}}var Lh;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Lh||(Lh={}));const cu=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),g0=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Uh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),v0=(i,r,n)=>Y(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!n?.noResolveJson){const l=i.status||500,u=i;if(typeof u.json=="function")u.json().then(d=>{const m=d?.statusCode||d?.code||l+"";r(new El(Uh(d),l,m))}).catch(()=>{const d=l+"",m=u.statusText||`HTTP ${l} error`;r(new El(m,l,d))});else{const d=l+"",m=u.statusText||`HTTP ${l} error`;r(new El(m,l,d))}}else r(new m0(Uh(i),i))}),y0=(i,r,n,o)=>{const l={method:i,headers:r?.headers||{}};return o?(g0(o)?(l.headers=Object.assign({"Content-Type":"application/json"},r?.headers),l.body=JSON.stringify(o)):l.body=o,Object.assign(Object.assign({},l),n)):l};function w0(i,r,n,o,l,u){return Y(this,void 0,void 0,function*(){return new Promise((d,m)=>{i(n,y0(r,o,l,u)).then(p=>{if(!p.ok)throw p;if(o?.noResolveJson)return p;const v=p.headers.get("content-type");return!v||!v.includes("application/json")?{}:p.json()}).then(p=>d(p)).catch(p=>v0(p,m,o))})})}function St(i,r,n,o,l){return Y(this,void 0,void 0,function*(){return w0(i,"POST",r,o,l,n)})}class x0{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uu),n),this.fetch=cu(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return Y(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}getIndex(r,n){return Y(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}listIndexes(r){return Y(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}deleteIndex(r,n){return Y(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(bt(o))return{data:null,error:o};throw o}})}}class _0{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uu),n),this.fetch=cu(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return Y(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield St(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}getVectors(r){return Y(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}listVectors(r){return Y(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield St(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}queryVectors(r){return Y(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}deleteVectors(r){return Y(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield St(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}}class b0{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uu),n),this.fetch=cu(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return Y(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}getBucket(r){return Y(this,void 0,void 0,function*(){try{return{data:yield St(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}listBuckets(){return Y(this,arguments,void 0,function*(r={}){try{return{data:yield St(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}deleteBucket(r){return Y(this,void 0,void 0,function*(){try{return{data:(yield St(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}})}}class S0 extends b0{constructor(r,n={}){super(r,n.headers||{},n.fetch)}from(r){return new k0(this.url,this.headers,r,this.fetch)}createBucket(r){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Y(this,void 0,void 0,function*(){return n.createBucket.call(this,r)})}getBucket(r){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Y(this,void 0,void 0,function*(){return n.getBucket.call(this,r)})}listBuckets(){const r=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Y(this,arguments,void 0,function*(n={}){return r.listBuckets.call(this,n)})}deleteBucket(r){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Y(this,void 0,void 0,function*(){return n.deleteBucket.call(this,r)})}}class k0 extends x0{constructor(r,n,o,l){super(r,n,l),this.vectorBucketName=o}createIndex(r){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Y(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Y(this,arguments,void 0,function*(n={}){return r.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Y(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Y(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new E0(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class E0 extends _0{constructor(r,n,o,l,u){super(r,n,u),this.vectorBucketName=o,this.indexName=l}putVectors(r){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Y(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Y(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Y(this,arguments,void 0,function*(n={}){return r.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Y(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Y(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class j0 extends a0{constructor(r,n={},o,l){super(r,n,o,l)}from(r){return new o0(this.url,this.headers,r,this.fetch)}get vectors(){return new S0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new p0(this.url+"/iceberg",this.headers,this.fetch)}}const N0="2.86.0";let Ts="";typeof Deno<"u"?Ts="deno":typeof document<"u"?Ts="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ts="react-native":Ts="node";const C0={"X-Client-Info":`supabase-js-${Ts}/${N0}`},T0={headers:C0},P0={schema:"public"},O0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R0={},I0=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),A0=()=>Headers,D0=(i,r,n)=>{const o=I0(n),l=A0();return async(u,d)=>{var m;const p=(m=await r())!==null&&m!==void 0?m:i;let v=new l(d?.headers);return v.has("apikey")||v.set("apikey",i),v.has("Authorization")||v.set("Authorization",`Bearer ${p}`),o(u,Object.assign(Object.assign({},d),{headers:v}))}};function $0(i){return i.endsWith("/")?i:i+"/"}function L0(i,r){var n,o;const{db:l,auth:u,realtime:d,global:m}=i,{db:p,auth:v,realtime:y,global:x}=r,k={db:Object.assign(Object.assign({},p),l),auth:Object.assign(Object.assign({},v),u),realtime:Object.assign(Object.assign({},y),d),storage:{},global:Object.assign(Object.assign(Object.assign({},x),m),{headers:Object.assign(Object.assign({},(n=x?.headers)!==null&&n!==void 0?n:{}),(o=m?.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return i.accessToken?k.accessToken=i.accessToken:delete k.accessToken,k}function U0(i){const r=i?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($0(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Wf="2.86.0",An=30*1e3,Hl=3,jl=Hl*An,M0="http://localhost:9999",z0="supabase.auth.token",B0={"X-Client-Info":`gotrue-js/${Wf}`},Wl="X-Supabase-Api-Version",Kf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},F0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V0=600*1e3;class Ls extends Error{constructor(r,n,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function re(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class q0 extends Ls{constructor(r,n,o){super(r,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function H0(i){return re(i)&&i.name==="AuthApiError"}class Jr extends Ls{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}}class Tr extends Ls{constructor(r,n,o,l){super(r,o,l),this.name=n,this.status=o}}class _t extends Tr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function W0(i){return re(i)&&i.name==="AuthSessionMissingError"}class Nn extends Tr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class oo extends Tr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class ao extends Tr{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function K0(i){return re(i)&&i.name==="AuthImplicitGrantRedirectError"}class Mh extends Tr{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kl extends Tr{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}}function Nl(i){return re(i)&&i.name==="AuthRetryableFetchError"}class zh extends Tr{constructor(r,n,o){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class Gl extends Tr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const go="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Bh=` 	
\r=`.split(""),G0=(()=>{const i=new Array(128);for(let r=0;r<i.length;r+=1)i[r]=-1;for(let r=0;r<Bh.length;r+=1)i[Bh[r].charCodeAt(0)]=-2;for(let r=0;r<go.length;r+=1)i[go[r].charCodeAt(0)]=r;return i})();function Fh(i,r,n){if(i!==null)for(r.queue=r.queue<<8|i,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(go[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(go[o]),r.queuedBits-=6}}function Gf(i,r,n){const o=G0[i];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Vh(i){const r=[],n=d=>{r.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=d=>{Y0(d,o,n)};for(let d=0;d<i.length;d+=1)Gf(i.charCodeAt(d),l,u);return r.join("")}function J0(i,r){if(i<=127){r(i);return}else if(i<=2047){r(192|i>>6),r(128|i&63);return}else if(i<=65535){r(224|i>>12),r(128|i>>6&63),r(128|i&63);return}else if(i<=1114111){r(240|i>>18),r(128|i>>12&63),r(128|i>>6&63),r(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Q0(i,r){for(let n=0;n<i.length;n+=1){let o=i.charCodeAt(n);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(i.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}J0(o,r)}}function Y0(i,r,n){if(r.utf8seq===0){if(i<=127){n(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=i&31;else if(r.utf8seq===3)r.codepoint=i&15;else if(r.utf8seq===4)r.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|i&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function $n(i){const r=[],n={queue:0,queuedBits:0},o=l=>{r.push(l)};for(let l=0;l<i.length;l+=1)Gf(i.charCodeAt(l),n,o);return new Uint8Array(r)}function X0(i){const r=[];return Q0(i,n=>r.push(n)),new Uint8Array(r)}function Qr(i){const r=[],n={queue:0,queuedBits:0},o=l=>{r.push(l)};return i.forEach(l=>Fh(l,n,o)),Fh(null,n,o),r.join("")}function Z0(i){return Math.round(Date.now()/1e3)+i}function ev(){return Symbol("auth-callback")}const Xe=()=>typeof window<"u"&&typeof document<"u",Vr={tested:!1,writable:!1},Jf=()=>{if(!Xe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vr.tested)return Vr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Vr.tested=!0,Vr.writable=!0}catch{Vr.tested=!0,Vr.writable=!1}return Vr.writable};function tv(i){const r={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,u)=>{r[u]=l})}catch{}return n.searchParams.forEach((o,l)=>{r[l]=o}),r}const Qf=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),rv=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Dn=async(i,r,n)=>{await i.setItem(r,JSON.stringify(n))},qr=async(i,r)=>{const n=await i.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Er=async(i,r)=>{await i.removeItem(r)};class bo{constructor(){this.promise=new bo.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}bo.promiseConstructor=Promise;function Cl(i){const r=i.split(".");if(r.length!==3)throw new Gl("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!F0.test(r[o]))throw new Gl("JWT not in base64url format");return{header:JSON.parse(Vh(r[0])),payload:JSON.parse(Vh(r[1])),signature:$n(r[2]),raw:{header:r[0],payload:r[1]}}}async function nv(i){return await new Promise(r=>{setTimeout(()=>r(null),i)})}function sv(i,r){return new Promise((o,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const d=await i(u);if(!r(u,null,d)){o(d);return}}catch(d){if(!r(u,d)){l(d);return}}})()})}function iv(i){return("0"+i.toString(16)).substr(-2)}function ov(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let l="";for(let u=0;u<56;u++)l+=n.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(r),Array.from(r,iv).join("")}async function av(i){const n=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(o);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function lv(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await av(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cn(i,r,n=!1){const o=ov();let l=o;n&&(l+="/PASSWORD_RECOVERY"),await Dn(i,`${r}-code-verifier`,l);const u=await lv(o);return[u,o===u?"plain":"s256"]}const uv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cv(i){const r=i.headers.get(Wl);if(!r||!r.match(uv))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function dv(i){if(!i)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(i<=r)throw new Error("JWT has expired")}function hv(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tn(i){if(!fv.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Tl(){const i={};return new Proxy(i,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pv(i,r){return new Proxy(i,{get:(n,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,l)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,o,l)}})}function qh(i){return JSON.parse(JSON.stringify(i))}const Hr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),mv=[502,503,504];async function Hh(i){var r;if(!rv(i))throw new Kl(Hr(i),0);if(mv.includes(i.status))throw new Kl(Hr(i),i.status);let n;try{n=await i.json()}catch(u){throw new Jr(Hr(u),u)}let o;const l=cv(i);if(l&&l.getTime()>=Kf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new zh(Hr(n),i.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new _t}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,d)=>u&&typeof d=="string",!0))throw new zh(Hr(n),i.status,n.weak_password.reasons);throw new q0(Hr(n),i.status||500,o)}const gv=(i,r,n,o)=>{const l={method:i,headers:r?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),n))};async function ae(i,r,n,o){var l;const u=Object.assign({},o?.headers);u[Wl]||(u[Wl]=Kf["2024-01-01"].name),o?.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const d=(l=o?.query)!==null&&l!==void 0?l:{};o?.redirectTo&&(d.redirect_to=o.redirectTo);const m=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await vv(i,r,n+m,{headers:u,noResolveJson:o?.noResolveJson},{},o?.body);return o?.xform?o?.xform(p):{data:Object.assign({},p),error:null}}async function vv(i,r,n,o,l,u){const d=gv(r,o,l,u);let m;try{m=await i(n,Object.assign({},d))}catch(p){throw console.error(p),new Kl(Hr(p),0)}if(m.ok||await Hh(m),o?.noResolveJson)return m;try{return await m.json()}catch(p){await Hh(p)}}function zt(i){var r;let n=null;xv(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=Z0(i.expires_in)));const o=(r=i.user)!==null&&r!==void 0?r:i;return{data:{session:n,user:o},error:null}}function Wh(i){const r=zt(i);return!r.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(r.data.weak_password=i.weak_password),r}function Nr(i){var r;return{data:{user:(r=i.user)!==null&&r!==void 0?r:i},error:null}}function yv(i){return{data:i,error:null}}function wv(i){const{action_link:r,email_otp:n,hashed_token:o,redirect_to:l,verification_type:u}=i,d=zn(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:r,email_otp:n,hashed_token:o,redirect_to:l,verification_type:u},p=Object.assign({},d);return{data:{properties:m,user:p},error:null}}function Kh(i){return i}function xv(i){return i.access_token&&i.refresh_token&&i.expires_in}const Pl=["global","local","others"];class _v{constructor({url:r="",headers:n={},fetch:o}){this.url=r,this.headers=n,this.fetch=Qf(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=Pl[0]){if(Pl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pl.join(", ")}`);try{return await ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(re(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,n={}){try{return await ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Nr})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:n}=r,o=zn(r,["options"]),l=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(l.new_email=o?.newEmail,delete l.newEmail),await ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:wv,redirectTo:n?.redirectTo})}catch(n){if(re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await ae(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Nr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,o,l,u,d,m,p;try{const v={nextPage:null,lastPage:0,total:0},y=await ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Kh});if(y.error)throw y.error;const x=await y.json(),k=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,E=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(b=>{const C=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);v[`${j}Page`]=C}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},x),v),error:null}}catch(v){if(re(v))return{data:{users:[]},error:v};throw v}}async getUserById(r){Tn(r);try{return await ae(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Nr})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){Tn(r);try{return await ae(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:Nr})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,n=!1){Tn(r);try{return await ae(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:Nr})}catch(o){if(re(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){Tn(r.userId);try{const{data:n,error:o}=await ae(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:o}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteFactor(r){Tn(r.userId),Tn(r.id);try{return{data:await ae(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,o,l,u,d,m,p;try{const v={nextPage:null,lastPage:0,total:0},y=await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r?.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(l=r?.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:Kh});if(y.error)throw y.error;const x=await y.json(),k=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,E=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return E.length>0&&(E.forEach(b=>{const C=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);v[`${j}Page`]=C}),v.total=parseInt(k)),{data:Object.assign(Object.assign({},x),v),error:null}}catch(v){if(re(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(r){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(re(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}}function Gh(i={}){return{getItem:r=>i[r]||null,setItem:(r,n)=>{i[r]=n},removeItem:r=>{delete i[r]}}}const Pn={debug:!!(globalThis&&Jf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Yf extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class bv extends Yf{}async function Sv(i,r,n){Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await n()}finally{Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(r===0)throw Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new bv(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Pn.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function kv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Xf(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function Ev(i){return parseInt(i,16)}function jv(i){const r=new TextEncoder().encode(i);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function Nv(i){var r;const{chainId:n,domain:o,expirationTime:l,issuedAt:u=new Date,nonce:d,notBefore:m,requestId:p,resources:v,scheme:y,uri:x,version:k}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((r=i.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const E=Xf(i.address),b=y?`${y}://${o}`:o,C=i.statement?`${i.statement}
`:"",j=`${b} wants you to sign in with your Ethereum account:
${E}

${C}`;let D=`URI: ${x}
Version: ${k}
Chain ID: ${n}${d?`
Nonce: ${d}`:""}
Issued At: ${u.toISOString()}`;if(l&&(D+=`
Expiration Time: ${l.toISOString()}`),m&&(D+=`
Not Before: ${m.toISOString()}`),p&&(D+=`
Request ID: ${p}`),v){let L=`
Resources:`;for(const $ of v){if(!$||typeof $!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${$}`);L+=`
- ${$}`}D+=L}return`${j}
${D}`}class Be extends Error{constructor({message:r,code:n,cause:o,name:l}){var u;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=l??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class vo extends Be{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function Cv({error:i,options:r}){var n,o,l;const{publicKey:u}=r;if(!u)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Be({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Be({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(r.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Be({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Be({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new Be({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new Be({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return u.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Be({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new Be({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const d=window.location.hostname;if(Zf(d)){if(u.rp.id!==d)return new Be({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new Be({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new Be({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function Tv({error:i,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new Be({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new Be({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if(Zf(o)){if(n.rpId!==o)return new Be({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new Be({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new Be({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new Be({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class Pv{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Ov=new Pv;function Rv(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:r,user:n,excludeCredentials:o}=i,l=zn(i,["challenge","user","excludeCredentials"]),u=$n(r).buffer,d=Object.assign(Object.assign({},n),{id:$n(n.id).buffer}),m=Object.assign(Object.assign({},l),{challenge:u,user:d});if(o&&o.length>0){m.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const v=o[p];m.excludeCredentials[p]=Object.assign(Object.assign({},v),{id:$n(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return m}function Iv(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:r,allowCredentials:n}=i,o=zn(i,["challenge","allowCredentials"]),l=$n(r).buffer,u=Object.assign(Object.assign({},o),{challenge:l});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.allowCredentials[d]=Object.assign(Object.assign({},m),{id:$n(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function Av(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:Qr(new Uint8Array(i.response.attestationObject)),clientDataJSON:Qr(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Dv(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,o=i.getClientExtensionResults(),l=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Qr(new Uint8Array(l.authenticatorData)),clientDataJSON:Qr(new Uint8Array(l.clientDataJSON)),signature:Qr(new Uint8Array(l.signature)),userHandle:l.userHandle?Qr(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Zf(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Jh(){var i,r;return!!(Xe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function $v(i){try{const r=await navigator.credentials.create(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new vo("Browser returned unexpected credential type",r)}:{data:null,error:new vo("Empty credential response",r)}}catch(r){return{data:null,error:Cv({error:r,options:i})}}}async function Lv(i){try{const r=await navigator.credentials.get(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new vo("Browser returned unexpected credential type",r)}:{data:null,error:new vo("Empty credential response",r)}}catch(r){return{data:null,error:Tv({error:r,options:i})}}}const Uv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Mv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function yo(...i){const r=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),n=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of i)if(l)for(const u in l){const d=l[u];if(d!==void 0)if(Array.isArray(d))o[u]=d;else if(n(d))o[u]=d;else if(r(d)){const m=o[u];r(m)?o[u]=yo(m,d):o[u]=yo(d)}else o[u]=d}return o}function zv(i,r){return yo(Uv,i,r||{})}function Bv(i,r){return yo(Mv,i,r||{})}class Fv{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:o,signal:l},u){try{const{data:d,error:m}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!d)return{data:null,error:m};const p=l??Ov.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:v}=d.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${o}`),v.displayName||(v.displayName=v.name)}switch(d.webauthn.type){case"create":{const v=zv(d.webauthn.credential_options.publicKey,u?.create),{data:y,error:x}=await $v({publicKey:v,signal:p});return y?{data:{factorId:r,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:x}}case"request":{const v=Bv(d.webauthn.credential_options.publicKey,u?.request),{data:y,error:x}=await Lv(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:v,signal:p}));return y?{data:{factorId:r,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:x}}}}catch(d){return re(d)?{data:null,error:d}:{data:null,error:new Jr("Unexpected error in challenge",d)}}}async _verify({challengeId:r,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!n)return{data:null,error:new Ls("rpId is required for WebAuthn authentication")};try{if(!Jh())return{data:null,error:new Jr("Browser does not support WebAuthn",null)};const{data:d,error:m}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:o},signal:l},{request:u});if(!d)return{data:null,error:m};const{webauthn:p}=d;return this._verify({factorId:r,challengeId:d.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:o,credential_response:p.credential_response}})}catch(d){return re(d)?{data:null,error:d}:{data:null,error:new Jr("Unexpected error in authenticate",d)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!n)return{data:null,error:new Ls("rpId is required for WebAuthn registration")};try{if(!Jh())return{data:null,error:new Jr("Browser does not support WebAuthn",null)};const{data:d,error:m}=await this._enroll({friendlyName:r});if(!d)return await this.client.mfa.listFactors().then(y=>{var x;return(x=y.data)===null||x===void 0?void 0:x.all.find(k=>k.factor_type==="webauthn"&&k.friendly_name===r&&k.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:m};const{data:p,error:v}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:l},{create:u});return p?this._verify({factorId:d.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:v}}catch(d){return re(d)?{data:null,error:d}:{data:null,error:new Jr("Unexpected error in register",d)}}}}kv();const Vv={url:M0,storageKey:z0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:B0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Qh(i,r,n){return await n()}const On={};class Us{get jwks(){var r,n;return(n=(r=On[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){On[this.storageKey]=Object.assign(Object.assign({},On[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=On[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){On[this.storageKey]=Object.assign(Object.assign({},On[this.storageKey]),{cachedAt:r})}constructor(r){var n,o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Vv),r);if(this.storageKey=u.storageKey,this.instanceID=(n=Us.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Us.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Xe()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new _v({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Qf(u.fetch),this.lock=u.lock||Qh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:Xe()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=Sv:this.lock=Qh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Fv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Jf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gh(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Gh(this.memoryStorage)),Xe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Wf}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},o="none";if(Xe()&&(n=tv(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),Xe()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:u}=await this._getSessionFromURL(n,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),K0(u)){const p=(r=u.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:d,redirectType:m}=l;return this._debug("#_initialize()","detected session in URL",d,"redirect type",m),await this._saveSession(d),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return re(n)?this._returnResult({error:n}):this._returnResult({error:new Jr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,o,l;try{const u=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=r?.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=r?.options)===null||l===void 0?void 0:l.captchaToken}},xform:zt}),{data:d,error:m}=u;if(m||!d)return this._returnResult({data:{user:null,session:null},error:m});const p=d.session,v=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:v,session:p},error:null})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(r){var n,o,l;try{let u;if("email"in r){const{email:y,password:x,options:k}=r;let E=null,b=null;this.flowType==="pkce"&&([E,b]=await Cn(this.storage,this.storageKey)),u=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:y,password:x,data:(n=k?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:E,code_challenge_method:b},xform:zt})}else if("phone"in r){const{phone:y,password:x,options:k}=r;u=await ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(o=k?.data)!==null&&o!==void 0?o:{},channel:(l=k?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:zt})}else throw new oo("You must provide either an email or phone number and a password");const{data:d,error:m}=u;if(m||!d)return this._returnResult({data:{user:null,session:null},error:m});const p=d.session,v=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:v,session:p},error:null})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:d,options:m}=r;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Wh})}else if("phone"in r){const{phone:u,password:d,options:m}=r;n=await ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:d,gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Wh})}else throw new oo("You must provide either an email or phone number and a password");const{data:o,error:l}=n;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const u=new Nn;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,o,l,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=r.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,o,l,u,d,m,p,v,y,x,k;let E,b;if("message"in r)E=r.message,b=r.signature;else{const{chain:C,wallet:j,statement:D,options:L}=r;let $;if(Xe())if(typeof j=="object")$=j;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")$=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!L?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=j}const q=new URL((n=L?.url)!==null&&n!==void 0?n:window.location.href),ee=await $.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ee||ee.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const R=Xf(ee[0]);let I=(o=L?.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!I){const W=await $.request({method:"eth_chainId"});I=Ev(W)}const A={domain:q.host,address:R,statement:D,uri:q.href,version:"1",chainId:I,nonce:(l=L?.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(d=(u=L?.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(m=L?.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=L?.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(v=L?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(y=L?.signInWithEthereum)===null||y===void 0?void 0:y.resources};E=Nv(A),b=await $.request({method:"personal_sign",params:[jv(E),R]})}try{const{data:C,error:j}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:b},!((x=r.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(k=r.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:zt});if(j)throw j;if(!C||!C.session||!C.user){const D=new Nn;return this._returnResult({data:{user:null,session:null},error:D})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:j})}catch(C){if(re(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(r){var n,o,l,u,d,m,p,v,y,x,k,E;let b,C;if("message"in r)b=r.message,C=r.signature;else{const{chain:j,wallet:D,statement:L,options:$}=r;let q;if(Xe())if(typeof D=="object")q=D;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))q=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=D}const ee=new URL((n=$?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in q&&q.signIn){const R=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},$?.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),L?{statement:L}:null));let I;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")I=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)I=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)b=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),C=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${ee.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(l=(o=$?.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=$?.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${$.signInWithSolana.notBefore}`]:[],...!((d=$?.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${$.signInWithSolana.expirationTime}`]:[],...!((m=$?.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${$.signInWithSolana.chainId}`]:[],...!((p=$?.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${$.signInWithSolana.nonce}`]:[],...!((v=$?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${$.signInWithSolana.requestId}`]:[],...!((x=(y=$?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...$.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const R=await q.signMessage(new TextEncoder().encode(b),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=R}}try{const{data:j,error:D}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Qr(C)},!((k=r.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(E=r.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:zt});if(D)throw D;if(!j||!j.session||!j.user){const L=new Nn;return this._returnResult({data:{user:null,session:null},error:L})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:D})}catch(j){if(re(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(r){const n=await qr(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(n??"").split("/");try{const{data:u,error:d}=await ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:zt});if(await Er(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!u||!u.session||!u.user){const m=new Nn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:d})}catch(u){if(re(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(r){try{const{options:n,provider:o,token:l,access_token:u,nonce:d}=r,m=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:u,nonce:d,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:zt}),{data:p,error:v}=m;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!p||!p.session||!p.user){const y=new Nn;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:v})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,o,l,u,d;try{if("email"in r){const{email:m,options:p}=r;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Cn(this.storage,this.storageKey));const{error:x}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=p?.data)!==null&&n!==void 0?n:{},create_user:(o=p?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:v,code_challenge_method:y},redirectTo:p?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in r){const{phone:m,options:p}=r,{data:v,error:y}=await ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(l=p?.data)!==null&&l!==void 0?l:{},create_user:(u=p?.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p?.captchaToken},channel:(d=p?.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:y})}throw new oo("You must provide either an email or phone number.")}catch(m){if(re(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(r){var n,o;try{let l,u;"options"in r&&(l=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:m}=await ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:zt});if(m)throw m;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,v=d.user;return p?.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:v,session:p},error:null})}catch(l){if(re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(r){var n,o,l,u,d;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Cn(this.storage,this.storageKey));const v=await ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=r?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:yv});return!((u=v.data)===null||u===void 0)&&u.url&&Xe()&&!(!((d=r.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(m){if(re(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;if(o)throw o;if(!n)throw new _t;const{error:l}=await ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:o,type:l,options:u}=r,{error:d}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in r){const{phone:o,type:l,options:u}=r,{data:d,error:m}=await ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:u?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d?.message_id},error:m})}throw new oo("You must provide either an email or phone number and a type")}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await qr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<jl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const d=await qr(this.userStorage,this.storageKey+"-user");d?.user?r.user=d.user:r.user=Tl()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};r.user=pv(r.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){return r?await this._getUser(r):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(r){try{return r?await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Nr}):await this._useSession(async n=>{var o,l,u;const{data:d,error:m}=n;if(m)throw m;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _t}:await ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Nr})})}catch(n){if(re(n))return W0(n)&&(await this._removeSession(),await Er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async o=>{const{data:l,error:u}=o;if(u)throw u;if(!l.session)throw new _t;const d=l.session;let m=null,p=null;this.flowType==="pkce"&&r.email!=null&&([m,p]=await Cn(this.storage,this.storageKey));const{data:v,error:y}=await ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:m,code_challenge_method:p}),jwt:d.access_token,xform:Nr});if(y)throw y;return d.user=v.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(o){if(re(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new _t;const n=Date.now()/1e3;let o=n,l=!0,u=null;const{payload:d}=Cl(r.access_token);if(d.exp&&(o=d.exp,l=o<=n),l){const{data:m,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};u=m}else{const{data:m,error:p}=await this._getUser(r.access_token);if(p)throw p;u={access_token:r.access_token,refresh_token:r.refresh_token,user:m.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var o;if(!r){const{data:d,error:m}=n;if(m)throw m;r=(o=d.session)!==null&&o!==void 0?o:void 0}if(!r?.refresh_token)throw new _t;const{data:l,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!Xe())throw new ao("No browser detected.");if(r.error||r.error_description||r.error_code)throw new ao(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Mh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ao("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Mh("No code detected.");const{data:L,error:$}=await this._exchangeCodeForSession(r.code);if($)throw $;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:u,refresh_token:d,expires_in:m,expires_at:p,token_type:v}=r;if(!u||!m||!d||!v)throw new ao("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(m);let k=y+x;p&&(k=parseInt(p));const E=k-y;E*1e3<=An&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${x}s`);const b=k-x;y-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,k,y):y-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,k,y);const{data:C,error:j}=await this._getUser(u);if(j)throw j;const D={provider_token:o,provider_refresh_token:l,access_token:u,expires_in:x,expires_at:k,refresh_token:d,token_type:v,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:r.type},error:null})}catch(o){if(re(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await qr(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:l,error:u}=n;if(u)return this._returnResult({error:u});const d=(o=l.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:m}=await this.admin.signOut(d,r);if(m&&!(H0(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return r!=="others"&&(await this._removeSession(),await Er(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=ev(),o={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async n=>{var o,l;try{const{data:{session:u},error:d}=n;if(d)throw d;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(r))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await Cn(this.storage,this.storageKey,!0));try{return await ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(re(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var r;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:o,error:l}=await this._useSession(async u=>{var d,m,p,v,y;const{data:x,error:k}=u;if(k)throw k;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(d=r.options)===null||d===void 0?void 0:d.redirectTo,scopes:(m=r.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ae(this.fetch,"GET",E,{headers:this.headers,jwt:(y=(v=x.session)===null||v===void 0?void 0:v.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return Xe()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o?.url),this._returnResult({data:{provider:r.provider,url:o?.url},error:null})}catch(o){if(re(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var o;try{const{error:l,data:{session:u}}=n;if(l)throw l;const{options:d,provider:m,token:p,access_token:v,nonce:y}=r,x=await ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u?.access_token)!==null&&o!==void 0?o:void 0,body:{provider:m,id_token:p,access_token:v,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:zt}),{data:k,error:E}=x;return E?this._returnResult({data:{user:null,session:null},error:E}):!k||!k.session||!k.user?this._returnResult({data:{user:null,session:null},error:new Nn}):(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("USER_UPDATED",k.session)),this._returnResult({data:k,error:E}))}catch(l){if(re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var o,l;const{data:u,error:d}=n;if(d)throw d;return await ae(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(l=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await sv(async l=>(l>0&&await nv(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:zt})),(l,u)=>{const d=200*Math.pow(2,l);return u&&Nl(u)&&Date.now()+d-o<An})}catch(o){if(this._debug(n,"error",o),re(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",o),Xe()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await qr(this.storage,this.storageKey);if(l&&this.userStorage){let d=await qr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:l.user},await Dn(this.userStorage,this.storageKey+"-user",d)),l.user=(r=d?.user)!==null&&r!==void 0?r:Tl()}else if(l&&!l.user&&!l.user){const d=await qr(this.storage,this.storageKey+"-user");d&&d?.user?(l.user=d.user,await Er(this.storage,this.storageKey+"-user"),await Dn(this.storage,this.storageKey,l)):l.user=Tl()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const u=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<jl;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${jl}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:d}=await this._callRefreshToken(l.refresh_token);d&&(console.error(d),Nl(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:m}=await this._getUser(l.access_token);!m&&d?.user?(l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var n,o;if(!r)throw new _t;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new bo;const{data:u,error:d}=await this._refreshAccessToken(r);if(d)throw d;if(!u.session)throw new _t;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const m={data:u.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(u){if(this._debug(l,"error",u),re(u)){const d={data:null,error:u};return Nl(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(r,n,o=!0){const l=`#_notifyAllSubscribers(${r})`;this._debug(l,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],d=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(r,n)}catch(p){u.push(p)}});if(await Promise.all(d),u.length>0){for(let m=0;m<u.length;m+=1)console.error(u[m]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0;const n=Object.assign({},r),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await Dn(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const u=qh(l);await Dn(this.storage,this.storageKey,u)}else{const l=qh(n);await Dn(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await Er(this.storage,this.storageKey),await Er(this.storage,this.storageKey+"-code-verifier"),await Er(this.storage,this.storageKey+"-user"),this.userStorage&&await Er(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Xe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),An);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-r)/An);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${An}ms, refresh threshold is ${Hl} ticks`),l<=Hl&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Yf)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,o){const l=[`provider=${encodeURIComponent(n)}`];if(o?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o?.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,d]=await Cn(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(d)}`});l.push(m.toString())}if(o?.queryParams){const u=new URLSearchParams(o.queryParams);l.push(u.toString())}return o?.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${l.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var o;const{data:l,error:u}=n;return u?this._returnResult({data:null,error:u}):await ae(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var o,l;const{data:u,error:d}=n;if(d)return this._returnResult({data:null,error:d});const m=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:p,error:v}=await ae(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=u?.session)===null||o===void 0?void 0:o.access_token});return v?this._returnResult({data:null,error:v}):(r.factorType==="totp"&&p.type==="totp"&&(!((l=p?.totp)===null||l===void 0)&&l.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?Av(r.webauthn.credential_response):Dv(r.webauthn.credential_response)})}:{code:r.code}),{data:m,error:p}=await ae(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:d,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:l,error:u}=n;if(u)return this._returnResult({data:null,error:u});const d=await ae(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=l?.session)===null||o===void 0?void 0:o.access_token});if(d.error)return d;const{data:m}=d;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Rv(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Iv(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const u of(r=n?.factors)!==null&&r!==void 0?r:[])l.all.push(u),u.status==="verified"&&l[u.factor_type].push(u);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Cl(o.access_token);let d=null;u.aal&&(d=u.aal);let m=d;((n=(r=o.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(m="aal2");const v=u.amr||[];return{data:{currentLevel:d,nextLevel:m,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;return l?this._returnResult({data:null,error:l}):o?await ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new _t})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:l},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new _t});const d=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return d.data&&d.data.redirect_url&&Xe()&&!n?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:l},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new _t});const d=await ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return d.data&&d.data.redirect_url&&Xe()&&!n?.skipBrowserRedirect&&window.location.assign(d.data.redirect_url),d})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new _t})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:o},error:l}=n;return l?this._returnResult({data:null,error:l}):o?(await ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new _t})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let o=n.keys.find(m=>m.kid===r);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(m=>m.kid===r),o&&this.jwks_cached_at+V0>l)return o;const{data:u,error:d}=await ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,o=u.keys.find(m=>m.kid===r),!o)?null:o}async getClaims(r,n={}){try{let o=r;if(!o){const{data:E,error:b}=await this.getSession();if(b||!E.session)return this._returnResult({data:null,error:b});o=E.session.access_token}const{header:l,payload:u,signature:d,raw:{header:m,payload:p}}=Cl(o);n?.allowExpired||dv(u.exp);const v=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!v){const{error:E}=await this.getUser(o);if(E)throw E;return{data:{claims:u,header:l,signature:d},error:null}}const y=hv(l.alg),x=await crypto.subtle.importKey("jwk",v,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,d,X0(`${m}.${p}`)))throw new Gl("Invalid JWT signature");return{data:{claims:u,header:l,signature:d},error:null}}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}}Us.nextInstanceID={};const qv=Us;class Hv extends qv{constructor(r){super(r)}}class Wv{constructor(r,n,o){var l,u,d;this.supabaseUrl=r,this.supabaseKey=n;const m=U0(r);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const p=`sb-${m.hostname.split(".")[0]}-auth-token`,v={db:P0,realtime:R0,auth:Object.assign(Object.assign({},O0),{storageKey:p}),global:T0},y=L0(o??{},v);this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(u=y.global.headers)!==null&&u!==void 0?u:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(x,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=y.auth)!==null&&d!==void 0?d:{},this.headers,y.global.fetch),this.fetch=D0(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new Rg(new URL("rest/v1",m).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new j0(this.storageUrl.href,this.headers,this.fetch,o?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new Cg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,n={},o={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,n,o)}channel(r,n={config:{}}){return this.realtime.channel(r,n)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r,n;if(this.accessToken)return await this.accessToken();const{data:o}=await this.auth.getSession();return(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:n,detectSessionInUrl:o,storage:l,userStorage:u,storageKey:d,flowType:m,lock:p,debug:v,throwOnError:y},x,k){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hv({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),x),storageKey:d,autoRefreshToken:r,persistSession:n,detectSessionInUrl:o,storage:l,userStorage:u,flowType:m,lock:p,debug:v,throwOnError:y,fetch:k,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new Jg(this.realtimeUrl.href,Object.assign(Object.assign({},r),{params:Object.assign({apikey:this.supabaseKey},r?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,o)=>{this._handleTokenChanged(n,"CLIENT",o?.access_token)})}_handleTokenChanged(r,n,o){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==o?(this.changedAccessToken=o,this.realtime.setAuth(o)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Kv=(i,r,n)=>new Wv(i,r,n);function Gv(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const r=i.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}Gv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let Zr=null;const ep=(i,r)=>{try{Zr=Kv(i,r),console.log(" Supabase initialized successfully")}catch(n){console.error("Failed to initialize Supabase:",n),Zr=null}return Zr},Jv=()=>(Zr||console.warn("Supabase not initialized"),Zr),it=()=>(Zr||ep("https://asouobyyuxsiemlppjlj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFzb3VvYnl5dXhzaWVtbHBwamxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxNzg3NzYsImV4cCI6MjA3OTc1NDc3Nn0.CN-50KUWEzYGD-RJqe_n1U9JD1GDYVU6QaRyia1R4n0"),Zr!==null);typeof window<"u"&&ep("https://asouobyyuxsiemlppjlj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFzb3VvYnl5dXhzaWVtbHBwamxqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxNzg3NzYsImV4cCI6MjA3OTc1NDc3Nn0.CN-50KUWEzYGD-RJqe_n1U9JD1GDYVU6QaRyia1R4n0");const He=new Proxy({},{get(i,r){const n=Jv();if(!n){console.error("Supabase not initialized");return}return n[r]}}),Qv=[{id:"1",name:"Women's Haircut",description:"Cut, wash, and style.",durationMinutes:60,bufferMinutes:15,price:65,imageUrl:"https://picsum.photos/200/200?random=1"},{id:"2",name:"Full Coloring",description:"Complete hair coloring with premium products.",durationMinutes:120,bufferMinutes:30,price:150,imageUrl:"https://picsum.photos/200/200?random=2"},{id:"3",name:"Manicure",description:"Cuticle care and polish application.",durationMinutes:45,bufferMinutes:5,price:30,imageUrl:"https://picsum.photos/200/200?random=3"},{id:"4",name:"Deep Hydration",description:"Reconstructive treatment for damaged hair.",durationMinutes:90,bufferMinutes:15,price:80,imageUrl:"https://picsum.photos/200/200?random=4"}],Yv=[{id:"p1",name:"Anna Smith",specialties:["1","2","4"],avatarUrl:"https://picsum.photos/100/100?random=5",commissionPercentage:50,schedule:{workDays:[1,2,3,4,5,6],workStart:"09:00",workEnd:"18:00",breakStart:"12:00",breakEnd:"13:00"}},{id:"p2",name:"Charles Oliver",specialties:["1","3"],avatarUrl:"https://picsum.photos/100/100?random=6",commissionPercentage:40,schedule:{workDays:[2,3,4,5,6],workStart:"10:00",workEnd:"19:00",breakStart:"14:00",breakEnd:"15:00"}},{id:"p3",name:"Mary Costa",specialties:["3"],avatarUrl:"https://picsum.photos/100/100?random=7",commissionPercentage:60,schedule:{workDays:[4,5,6],workStart:"08:00",workEnd:"16:00"}}],Ol=[{id:"admin1",role:Vt.ADMIN,name:"Master Admin",email:"admin@salon.com",phone:"+15550000000",password:"c2FsdF9hZG1pbg==",loyaltyPoints:0},{id:"guest",role:Vt.CLIENT,name:"Julia Roberts",email:"julia@email.com",phone:"(555) 555-5555",password:"c2FsdF8xMjM=",birthDate:"1990-01-01",internalNotes:"VIP Client. Prefers coffee without sugar.",loyaltyPoints:120}],_e=(i,r)=>{const n=localStorage.getItem(i);return n?JSON.parse(n):(localStorage.setItem(i,JSON.stringify(r)),r)},Oe=(i,r)=>{localStorage.setItem(i,JSON.stringify(r))},Qt=i=>{const[r,n]=i.split(":").map(Number);return r*60+n},Jl=i=>{const r=Math.floor(i/60),n=i%60;return`${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},Xv=()=>{const i=new Uint8Array(32);return crypto.getRandomValues(i),Array.from(i,r=>r.toString(16).padStart(2,"0")).join("")},Ql=async(i,r)=>{const n=r||Xv();try{const o=new TextEncoder,l=o.encode(i+n),u=await crypto.subtle.importKey("raw",l,"PBKDF2",!1,["deriveBits"]),d=await crypto.subtle.deriveBits({name:"PBKDF2",salt:o.encode(n),iterations:1e5,hash:"SHA-256"},u,256);return{hash:Array.from(new Uint8Array(d)).map(v=>v.toString(16).padStart(2,"0")).join(""),salt:n}}catch(o){throw console.error("Error hashing password:",o),new Error("Failed to hash password")}},Yh=async(i,r,n)=>{try{const{hash:o}=await Ql(i,n);return o===r}catch(o){return console.error("Error verifying password:",o),!1}},$e=i=>i?i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").trim():"",lo=i=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i),Cs=i=>/^[\d\s\-\+\(\)]+$/.test(i)&&i.replace(/\D/g,"").length>=10,Zv=i=>typeof i=="number"&&i>0&&i<=999999.99&&isFinite(i),ho=i=>{if(!/^\d{4}-\d{2}-\d{2}$/.test(i))return!1;const n=new Date(i+"T00:00:00Z");return n instanceof Date&&!isNaN(n.getTime())},Yl=i=>/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(i),Yr=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const r=Math.random()*16|0;return(i==="x"?r:r&3|8).toString(16)}),Rs=async(i,r=3,n=1e3,o=1e4)=>{let l=null;for(let u=0;u<r;u++)try{return await i()}catch(d){if(l=d,u<r-1){const m=Math.min(n*Math.pow(2,u),o),p=Math.random()*.1*m;await new Promise(v=>setTimeout(v,m+p))}}throw l||new Error("Retry mechanism failed")};class ey{attempts=new Map;windowMs;maxAttempts;constructor(r=6e4,n=5){this.windowMs=r,this.maxAttempts=n}isAllowed(r){const n=Date.now(),l=(this.attempts.get(r)||[]).filter(u=>n-u<this.windowMs);return l.length>=this.maxAttempts?!1:(l.push(n),this.attempts.set(r,l),!0)}reset(r){this.attempts.delete(r)}}const Jt={set:(i,r)=>{try{const n=JSON.stringify(r);if(n.length>5*1024*1024)throw new Error("Value too large for storage");localStorage.setItem(i,n)}catch(n){throw console.error(`Failed to store ${i}:`,n),n}},get:(i,r)=>{try{const n=localStorage.getItem(i);return n?JSON.parse(n):r}catch(n){return console.error(`Failed to retrieve ${i}:`,n),r}},remove:i=>{try{localStorage.removeItem(i)}catch(r){console.error(`Failed to remove ${i}:`,r)}}},Cr={getUsers:()=>_e("users",Ol),saveUser:i=>{const r=_e("users",[]);if(r.some(d=>d.email===i.email&&d.id!==i.id)){console.error("Duplicate email blocked.");return}const o={...i,name:$e(i.name||""),email:$e(i.email||""),phone:$e(i.phone||""),internalNotes:$e(i.internalNotes||"")},l=r.findIndex(d=>d.id===i.id);l>=0?r[l]=o:r.push(o),Oe("users",r);const u=Cr.getCurrentUser();u&&u.id===i.id&&Jt.set("current_user",o)},getCurrentUser:()=>Jt.get("current_user",null),setCurrentUser:i=>{Jt.set("current_user",i)},clearCurrentUser:()=>{Jt.remove("current_user")},login:async(i,r)=>{if(!new ey(3e5,5).isAllowed(i))return{success:!1,message:"Too many login attempts. Please try again later."};if(!i||!r)return{success:!1,message:"Email/phone and password required."};try{if(it()){const o=await Rs(async()=>await He.auth.signInWithPassword({email:i,password:r}),2,500),{data:l,error:u}=o;if(u)throw u;if(l.user){let{data:d,error:m}=await He.from("profiles").select("*").eq("id",l.user.id).single();if(m||!d){console.warn("Profile missing in DB. Creating recovery profile...");const{error:v}=await He.from("profiles").insert([{id:l.user.id,email:l.user.email,name:$e(l.user.user_metadata?.name||"Recovered User"),phone:$e(l.user.user_metadata?.phone||""),role:Vt.CLIENT,loyalty_points:0}]);if(!v){const{data:y}=await He.from("profiles").select("*").eq("id",l.user.id).single();d=y}}const p={id:l.user.id,email:$e(l.user.email||""),name:$e(d?.name||"User"),role:d?.role||Vt.CLIENT,phone:$e(d?.phone||""),loyaltyPoints:d?.loyalty_points||0};return Jt.set("current_user",p),{success:!0,user:p}}}throw new Error("Local fallback required")}catch{it()&&console.warn("Supabase Auth Failed. Trying local...");const l=_e("users",Ol);if(!lo(i)&&!Cs(i))return{success:!1,message:"Invalid email or phone format."};if(i==="admin@salon.com"&&r==="admin"){const u=l.findIndex(d=>d.email==="admin@salon.com");if(u>=0)return Jt.set("current_user",l[u]),{success:!0,user:l[u]}}l.find(async u=>{if(!(u.email===i||u.phone===i))return!1;if(u.password&&u.password.includes("|")){const[v,y]=u.password.split("|");return await Yh(r,v,y)}const m=btoa(`salt_${r}`),p=btoa(r);return u.password===m||u.password===p});for(const u of l){if(!(u.email===i||u.phone===i))continue;let m=!1;if(u.password&&u.password.includes("|")){const[p,v]=u.password.split("|");m=await Yh(r,p,v)}else{const p=btoa(`salt_${r}`),v=btoa(r);m=u.password===p||u.password===v}if(m)return Jt.set("current_user",u),{success:!0,user:u}}return{success:!1,message:"Invalid credentials."}}},logout:async()=>{if(it())try{await He.auth.signOut()}catch{}Jt.remove("current_user")},register:async i=>{if(!i.email||!lo(i.email))return{success:!1,message:"Invalid email format."};if(!i.password||i.password.length<8)return{success:!1,message:"Password must be at least 8 characters."};if(i.phone&&!Cs(i.phone))return{success:!1,message:"Invalid phone format."};try{if(it()){const r=await Rs(async()=>await He.auth.signUp({email:i.email,password:i.password,options:{data:{name:$e(i.name||""),phone:$e(i.phone||"")}}}),2,500),{data:n,error:o}=r;if(o)throw o;if(n.user){const{error:l}=await He.from("profiles").upsert([{id:n.user.id,email:$e(i.email),name:$e(i.name||""),phone:$e(i.phone||""),role:Vt.CLIENT,loyalty_points:0}],{onConflict:"id"});l&&console.error("Error creating profile:",l);const u={id:n.user.id,email:$e(i.email),name:$e(i.name),phone:$e(i.phone),role:Vt.CLIENT,loyaltyPoints:0};return Jt.set("current_user",u),{success:!0,user:u}}}throw new Error("Local fallback required")}catch{const n=_e("users",Ol);if(n.some(d=>d.email===i.email))return{success:!1,message:"Email already registered."};const{hash:o,salt:l}=await Ql(i.password),u={id:Yr(),role:Vt.CLIENT,name:$e(i.name),email:$e(i.email),phone:$e(i.phone),password:`${o}|${l}`,birthDate:i.birthDate,gender:i.gender,profession:i.profession,internalNotes:"",loyaltyPoints:0};return n.push(u),Oe("users",n),Jt.set("current_user",u),{success:!0,user:u}}},createQuickClient:(i,r)=>{if(!i||!Cs(r))throw new Error("Invalid name or phone format.");const n=_e("users",[]),o={id:Yr(),role:Vt.CLIENT,name:$e(i),email:`temp_${Yr()}@salon.com`,phone:$e(r),password:btoa("salt_123"),loyaltyPoints:0};return n.push(o),Oe("users",n),o},initiatePasswordReset:i=>!i||!lo(i)&&!Cs(i)?{success:!1,message:"Invalid email or phone format."}:_e("users",[]).find(o=>o.email===i||o.phone===i)?{success:!0,code:Yr().slice(0,6).toUpperCase()}:{success:!1,message:"User not found."},resetPassword:async(i,r)=>{if(!i||!lo(i)&&!Cs(i))return{success:!1,message:"Invalid email or phone format."};if(!r||r.length<8)return{success:!1,message:"Password must be at least 8 characters."};const n=_e("users",[]),o=n.findIndex(l=>l.email===i||l.phone===i);if(o>=0){const{hash:l,salt:u}=await Ql(r);return n[o].password=`${l}|${u}`,Oe("users",n),{success:!0}}return{success:!1,message:"User not found."}}},ty=()=>{const[i,r]=H.useState(null),[n,o]=H.useState(!1),[l,u]=H.useState(!0);return H.useEffect(()=>{const p=Cr.getCurrentUser();p&&(r(p),o(!0)),u(!1)},[]),{user:i,isLoggedIn:n,loading:l,login:p=>{r(p),o(!0),Cr.setCurrentUser(p)},logout:()=>{r(null),o(!1),Cr.clearCurrentUser()}}};var ry={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ny=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pe=(i,r)=>{const n=H.forwardRef(({color:o="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:d,children:m,...p},v)=>H.createElement("svg",{ref:v,...ry,width:l,height:l,stroke:o,strokeWidth:d?Number(u)*24/Number(l):u,className:`lucide lucide-${ny(i)}`,...p},[...r.map(([y,x])=>H.createElement(y,x)),...(Array.isArray(m)?m:[m])||[]]));return n.displayName=`${i}`,n},So=pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),tp=pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Xh=pe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),Zh=pe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),du=pe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),sy=pe("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ef=pe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),hu=pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Xl=pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),rp=pe("Edit3",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z",key:"18w55b"}]]),iy=pe("Edit",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z",key:"1cs3r3"}]]),oy=pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ay=pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),ly=pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),uy=pe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Ln=pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),np=pe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),tf=pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),sp=pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),fu=pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),cy=pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),dy=pe("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),hy=pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),fy=pe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),ip=pe("Plus",[["line",{x1:"12",x2:"12",y1:"5",y2:"19",key:"pwfkuu"}],["line",{x1:"5",x2:"19",y1:"12",y2:"12",key:"13b5wn"}]]),op=pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ap=pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pu=pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),mu=pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Rl=pe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ms=pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Zl=pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),wo=pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),gu=pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Rn=()=>_e("services",Qv),Il=i=>Oe("services",i),In=()=>_e("professionals",Yv),Al=i=>Oe("professionals",i),ut={getServices:Rn,saveServices:Il,getProfessionals:In,saveProfessionals:Al,api:{getServices:async()=>{if(!it())return Rn();try{const{data:i,error:r}=await He.from("services").select("*");if(r)throw r;return!i||i.length===0?Rn():i.map(n=>({id:n.id,name:n.name,description:n.description,price:Number(n.price),durationMinutes:n.duration_minutes,bufferMinutes:n.buffer_minutes,imageUrl:n.image_url}))}catch(i){return console.warn("Supabase fetch error, using local data.",i),Rn()}},upsertService:async i=>{const r=()=>{const n=Rn(),o=n.findIndex(l=>l.id===i.id);o>=0?n[o]=i:n.push(i),Il(n)};if(!it())return r(),{success:!0,local:!0};try{const{error:n}=await He.from("services").upsert({id:i.id,name:i.name,description:i.description,price:i.price,duration_minutes:i.durationMinutes,buffer_minutes:i.bufferMinutes,image_url:i.imageUrl});if(n)throw n;return r(),{success:!0}}catch(n){return console.error("Erro ao salvar servio na nuvem:",n),r(),{success:!0,local:!0,error:n}}},deleteService:async i=>{if(it())try{await He.from("services").delete().eq("id",i)}catch(n){console.error("Erro ao excluir da nuvem",n)}const r=Rn();return Il(r.filter(n=>n.id!==i)),{success:!0}},getProfessionals:async()=>{if(!it())return In();try{const{data:i,error:r}=await He.from("professionals").select("*");if(r)throw r;return!i||i.length===0?In():i.map(n=>({id:n.id,name:n.name,avatarUrl:n.avatar_url,commissionPercentage:Number(n.commission_percentage),specialties:n.specialties||[],schedule:n.schedule}))}catch{return console.warn("Supabase fetch error, using local data."),In()}},upsertProfessional:async i=>{const r=()=>{const n=In(),o=n.findIndex(l=>l.id===i.id);o>=0?n[o]=i:n.push(i),Al(n)};if(!it())return r(),{success:!0,local:!0};try{const{error:n}=await He.from("professionals").upsert({id:i.id,name:i.name,avatar_url:i.avatarUrl,commission_percentage:i.commissionPercentage,specialties:i.specialties,schedule:i.schedule});if(n)throw n;return r(),{success:!0}}catch(n){return console.error("Erro ao salvar profissional:",n),r(),{success:!0,local:!0,error:n}}},deleteProfessional:async i=>{if(it())try{await He.from("professionals").delete().eq("id",i)}catch(n){console.error(n)}const r=In();return Al(r.filter(n=>n.id!==i)),{success:!0}}}};function py(i){const r=i.replace(/\D/g,"");return/^\d{10,11}$/.test(r)}function my(i){return Number.isFinite(i)&&i>=0}function gy(i){return i?typeof i.amount!="number"||!my(i.amount)?{valid:!1,error:"Invalid amount"}:!i.description||typeof i.description!="string"?{valid:!1,error:"Invalid description"}:{valid:!0}:{valid:!1,error:"Transaction missing"}}const fo=()=>_e("transactions",[]),lp=async i=>{if(i.type==="INCOME"&&i.amount>0){const n=gy(i);if(!n.valid){console.error("Transao invlida:",n.error);return}}const r=fo();if(r.push(i),Oe("transactions",r),it())try{await He.from("transactions").insert({id:i.id,date:i.date,description:i.description,amount:i.amount,type:i.type,category:i.category,appointment_id:i.appointmentId||null})}catch(n){console.error(n)}},vy=()=>_e("payment_methods",[{id:"pm1",name:"Carto de Crdito",active:!0},{id:"pm2",name:"PIX",active:!0},{id:"pm3",name:"Dinheiro",active:!0}]),yy=i=>Oe("payment_methods",i),up=()=>_e("products",[]),wy=i=>Oe("products",i),vu=()=>_e("service_consumption",[]),xy=i=>Oe("service_consumption",i),cp=(i,r,n,o)=>{const l=up(),u=l.findIndex(d=>d.id===i);if(u>=0){l[u].currentStock+=r,Oe("products",l);const d=_e("stock_movements",[]);d.push({id:Math.random().toString(36).substr(2,9),productId:i,date:new Date().toISOString(),quantity:r,type:ru.USAGE,reason:o}),Oe("stock_movements",d)}},_y=i=>{vu().filter(o=>o.serviceId===i).forEach(o=>{cp(o.productId,-o.quantity,ru.USAGE,"Servio Realizado")})},by=(i,r,n)=>{const o=vu(),l=o.findIndex(u=>u.serviceId===i&&u.productId===r);n<=0?l>=0&&o.splice(l,1):l>=0?o[l].quantity=n:o.push({serviceId:i,productId:r,quantity:n}),Oe("service_consumption",o)},Sy=()=>_e("commissions",[]),ky=(i,r,n,o)=>{const u=ut.getProfessionals().find(p=>p.id===i);if(!u)return;const d=n*u.commissionPercentage/100,m=_e("commissions",[]);m.push({id:Math.random().toString(36).substr(2,9),professionalId:i,transactionId:r,amount:d,date:o,status:of.PENDING}),Oe("commissions",m)},Ey=()=>_e("service_packages",[]),jy=i=>Oe("service_packages",i),Ny=i=>_e("client_packages",[]).filter(n=>n.clientId===i&&new Date(n.expirationDate)>new Date),Cy=(i,r)=>{const n=_e("client_packages",[]),o=new Date;o.setMonth(o.getMonth()+r.validityMonths);const l={id:Math.random().toString(36).substr(2,9),clientId:i,packageTemplateId:r.id,name:r.name,purchaseDate:new Date().toISOString().split("T")[0],expirationDate:o.toISOString().split("T")[0],remainingItems:r.items.map(d=>({...d}))};n.push(l),Oe("client_packages",n);const u=Math.random().toString(36).substr(2,9);lp({id:u,date:new Date().toISOString().split("T")[0],description:`Compra Pacote: ${r.name}`,amount:r.price,type:Is.INCOME,category:As.PACKAGE_SALE,paymentMethodId:"pm1"})},Ty=(i,r)=>{const n=_e("client_packages",[]),o=n.findIndex(l=>l.id===i);if(o>=0){const l=n[o],u=l.remainingItems.findIndex(d=>d.serviceId===r);u>=0&&l.remainingItems[u].count>0&&(l.remainingItems[u].count--,Oe("client_packages",n))}},Py=()=>_e("loyalty_rewards",[]),Oy=i=>Oe("loyalty_rewards",i),Ry=(i,r,n,o)=>{const l=Cr.getUsers(),u=l.findIndex(d=>d.id===i);if(u>=0){l[u].loyaltyPoints=(l[u].loyaltyPoints||0)+r,Oe("users",l);const d=Cr.getCurrentUser();d&&d.id===i&&(d.loyaltyPoints=l[u].loyaltyPoints,localStorage.setItem("current_user",JSON.stringify(d)));const m=_e("points_history",[]);m.push({id:Math.random().toString(36).substr(2,9),clientId:i,transactionId:n,points:r,type:r>0?Dl.EARN:Dl.REDEEM,date:new Date().toISOString(),description:o||"Ajuste de pontos"}),Oe("points_history",m)}},Iy=i=>_e("points_history",[]).filter(n=>n.clientId===i).sort((n,o)=>new Date(o.date).getTime()-new Date(n.date).getTime()),dp=()=>_e("promotions",[]),Ay=i=>Oe("promotions",i),Dy=(i,r,n,o)=>{let l=i.price,u;const d=dp().filter(y=>y.active),m=new Date(r),p=m.getDay(),v=d.find(y=>y.type==="HAPPY_HOUR"&&y.rules?.daysOfWeek?.includes(p));if(v&&v.rules){const y=Qt(n),x=Qt(v.rules.startHour||"00:00"),k=Qt(v.rules.endHour||"23:59");y>=x&&y<=k&&(l=i.price*(1-v.discountPercentage/100),u=`${v.name} (-${v.discountPercentage}%)`)}if(o){const y=Cr.getUsers().find(k=>k.id===o),x=d.find(k=>k.type==="BIRTHDAY");if(y&&y.birthDate&&x){const k=new Date(y.birthDate),E=m.getMonth(),b=k.getMonth();E===b&&!u&&(l=i.price*(1-x.discountPercentage/100),u=`${x.name} (-${x.discountPercentage}%)`)}}return{finalPrice:l,discountReason:u}},$y=()=>_e("reviews",[]),Ly=i=>Oe("reviews",i),Uy=i=>_e("reviews",[]).filter(n=>n.clientId===i).sort((n,o)=>new Date(o.date).getTime()-new Date(n.date).getTime()),Ot={getTransactions:fo,addTransaction:lp,getPaymentMethods:vy,savePaymentMethods:yy,getProducts:up,saveProducts:wy,getProductConsumption:vu,saveProductConsumption:xy,adjustStock:cp,triggerServiceStockConsumption:_y,linkProductToService:by,getCommissions:Sy,recordCommission:ky,getServicePackages:Ey,saveServicePackages:jy,getClientPackages:Ny,buyPackage:Cy,consumePackageItem:Ty,getLoyaltyRewards:Py,saveLoyaltyRewards:Oy,addLoyaltyPoints:Ry,getPointsHistory:Iy,getPromotions:dp,savePromotions:Ay,calculatePrice:Dy,getReviews:$y,saveReviews:Ly,getClientReviews:Uy,api:{getTransactions:async()=>{if(!it())return fo();try{const{data:i,error:r}=await He.from("transactions").select("*");if(r)throw r;return i?i.map(n=>({id:n.id,date:n.date,description:n.description,amount:Number(n.amount),type:n.type,category:n.category,appointmentId:n.appointment_id})):[]}catch(i){return console.warn("Erro ao buscar transaes (Cloud):",i),fo()}}}},hp=i=>!i.clientId||i.clientId.trim()===""?{valid:!1,error:"Client ID is required."}:!i.professionalId||i.professionalId.trim()===""?{valid:!1,error:"Professional ID is required."}:!i.serviceId||i.serviceId.trim()===""?{valid:!1,error:"Service ID is required."}:ho(i.date)?Yl(i.time)?!i.clientName||i.clientName.trim()===""?{valid:!1,error:"Client name is required."}:{valid:!0}:{valid:!1,error:"Invalid appointment time."}:{valid:!1,error:"Invalid appointment date."},jr=()=>_e("appointments",[]),Wr=i=>Oe("appointments",i),rf=()=>_e("salon_config",{cancellationWindowHours:12}),My=i=>Oe("salon_config",i),uo=(i,r,n,o)=>{const l=hp(i);if(!l.valid)throw console.error(`Invalid appointment: ${l.error}`),new Error(l.error);if(o!==void 0&&!Zv(o))throw new Error("Invalid final price amount.");const u=jr(),d=ut.getServices(),m=d.find(E=>E.id===i.serviceId);if(!m)throw new Error(`Service ${i.serviceId} not found.`);const p=i.customDuration||m.durationMinutes+(m.bufferMinutes||0),v=Qt(i.time),y=v+p,x=u.find(E=>E.professionalId===i.professionalId&&E.date===i.date&&E.status!==Pt.CANCELLED&&E.status!==Pt.COMPLETED);if(x){const E=d.find(D=>D.id===x.serviceId),b=x.customDuration||(E?.durationMinutes||60)+(E?.bufferMinutes||0),C=Qt(x.time),j=C+b;if(!(y<=C||v>=j))throw new Error(`Conflict: Professional has another appointment from ${Jl(C)} to ${Jl(j)}`)}u.push(i),Wr(u);const k=Yr();if(r)Ot.consumePackageItem(r,i.serviceId),Ot.addTransaction({id:k,date:i.date,description:`Uso de Pacote: ${m.name}`,amount:0,type:Is.INCOME,category:As.PACKAGE_USAGE,appointmentId:i.id,clientPackageId:r}),Ot.recordCommission(i.professionalId,k,m.price,i.date);else{const E=Math.floor(m.price/10);Ot.addLoyaltyPoints(i.clientId,E,k,`Pontos por servio: ${m.name}`),Ot.addTransaction({id:k,date:i.date,description:`Servio: ${m.name}`,amount:o!==void 0?o:m.price,type:Is.INCOME,category:As.SERVICE,appointmentId:i.id,paymentMethodId:n}),Ot.recordCommission(i.professionalId,k,o!==void 0?o:m.price,i.date)}},Un={getAppointments:jr,saveAppointments:Wr,getConfig:rf,saveConfig:My,syncAppointmentsByDate:async i=>{if(it()){if(!ho(i))throw new Error("Invalid date format.");try{await Rs(async()=>{const{data:r,error:n}=await He.from("appointments").select("*").eq("appointment_date",i);if(n)throw n;if(r){const o=r.map(d=>({id:d.id,clientId:d.client_id,clientName:"Cliente (Sync)",professionalId:d.professional_id,serviceId:d.service_id,date:d.appointment_date,time:d.appointment_time.substring(0,5),status:d.status,notes:d.notes||""})),u=jr().filter(d=>d.date!==i);Wr([...u,...o])}},3)}catch(r){throw console.error("Failed to sync appointments:",r),new Error("Failed to synchronize appointments.")}}},getAvailableSlots:(i,r,n,o)=>{const l=ut.getServices(),u=ut.getProfessionals(),d=jr(),m=Array.isArray(r)?r:[r],p=m[0];let v=0;if(o?v=o:m.forEach(b=>{const C=l.find(j=>j.id===b);C&&(v+=C.durationMinutes+(C.bufferMinutes||0))}),v===0)return[];const y=new Date(i).getDay();let x=u.filter(b=>b.specialties.includes(p));if(m.length>1&&(x=u.filter(b=>m.every(C=>b.specialties.includes(C)))),n&&(x=x.filter(b=>b.id===n)),x=x.filter(b=>b.schedule.workDays.includes(y)),x.length===0)return[];const k=new Set,E=15;return x.forEach(b=>{const C=Qt(b.schedule.workStart),j=Qt(b.schedule.workEnd),D=b.schedule.breakStart?Qt(b.schedule.breakStart):-1,L=b.schedule.breakEnd?Qt(b.schedule.breakEnd):-1,$=d.filter(q=>q.professionalId===b.id&&q.date===i&&q.status!==Pt.CANCELLED);for(let q=C;q+v<=j;q+=E){const ee=q+v;if(D!==-1&&L!==-1&&q<L&&ee>D)continue;let R=!1;for(const I of $){const A=l.find(je=>je.id===I.serviceId),W=I.customDuration||(A?.durationMinutes||60)+(A?.bufferMinutes||0),ne=Qt(I.time),be=ne+W;if(q<be&&ee>ne){R=!0;break}}R||k.add(Jl(q))}}),Array.from(k).sort()},canCancel:i=>{if(i.status===Pt.CANCELLED||i.status===Pt.COMPLETED)return{allowed:!1,reason:"Status invlido."};const r=rf(),n=new Date(`${i.date}T${i.time}`),o=new Date;return(n.getTime()-o.getTime())/(1e3*60*60)<r.cancellationWindowHours?{allowed:!1,reason:`Mnimo de ${r.cancellationWindowHours}h de antecedncia.`}:{allowed:!0}},addAppointment:uo,updateAppointmentStatus:async(i,r)=>{if(it())try{await He.from("appointments").update({status:r}).eq("id",i)}catch{}const n=jr(),o=n.findIndex(u=>u.id===i);if(o===-1)return;const l=n[o].status;n[o].status=r,Wr(n),l!==Pt.COMPLETED&&r===Pt.COMPLETED&&Ot.triggerServiceStockConsumption(n[o].serviceId)},addBlock:async(i,r,n,o,l)=>{if(!ho(i))throw new Error("Invalid date format.");if(!Yl(r))throw new Error("Invalid time format.");if(!Number.isInteger(n)||n<15||n>480)throw new Error("Duration must be between 15 and 480 minutes.");if(!o||o.trim()==="")throw new Error("Professional ID is required.");if(!l||l.trim()==="")throw new Error("Block reason is required.");const u=Yr(),d=jr();d.push({id:u,clientId:"ADMIN_BLOCK",clientName:l,professionalId:o,serviceId:"BLOCK",date:i,time:r,status:Pt.BLOCKED,customDuration:n}),Wr(d)},moveAppointment:async(i,r,n,o)=>{if(!i||i.trim()==="")throw new Error("Appointment ID is required.");if(!ho(r))throw new Error("Invalid new date format.");if(!Yl(n))throw new Error("Invalid new time format.");if(!o||o.trim()==="")throw new Error("Professional ID is required.");if(it())try{await Rs(async()=>{await He.from("appointments").update({date:r,time:n,professional_id:o}).eq("id",i)},2)}catch(d){console.error("Failed to sync appointment move:",d)}const l=jr(),u=l.findIndex(d=>d.id===i);if(u===-1)throw new Error("Appointment not found.");l[u].date=r,l[u].time=n,l[u].professionalId=o,Wr(l)},updateAppointmentDuration:(i,r)=>{const n=jr(),o=n.findIndex(l=>l.id===i);o!==-1&&(r<15&&(r=15),n[o].customDuration=r,Wr(n))},api:{createAppointment:async i=>{const r=hp(i);if(!r.valid)return{success:!1,error:r.error};if(!it())try{return uo(i),{success:!0,local:!0}}catch(n){return{success:!1,error:n.message}}try{console.log("Attempting Supabase insert...");const n=await Rs(async()=>{const u=He.from("appointments");if(console.log("Query object:",u),!u||!u.insert)throw new Error("Supabase from() returned invalid object");return await u.insert([{client_id:i.clientId,professional_id:i.professionalId,service_id:i.serviceId,date:i.date,time:i.time,status:i.status||"scheduled"}]).select()},2,500);console.log("Supabase result:",n);const{data:o,error:l}=n||{};if(l)throw l;try{uo(i)}catch(u){console.warn("Failed to save locally after cloud sync:",u)}return{success:!0,data:o}}catch(n){console.error("Failed to sync appointment",n);try{return uo(i),{success:!0,local:!0}}catch(o){return{success:!1,error:o.message}}}}}};class zy{logs=[];maxLogs=1e3;listeners=[];log(r,n,o,l){const u={timestamp:new Date().toISOString(),level:r,message:n,context:o,error:l};this.logs.push(u),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.listeners.forEach(d=>d(u)),this.logToConsole(u),r==="CRITICAL"&&this.sendToBackend(u).catch(d=>console.error("Failed to send critical log:",d))}debug(r,n){this.log("DEBUG",r,n)}info(r,n){this.log("INFO",r,n)}warn(r,n){this.log("WARN",r,n)}error(r,n,o){this.log("ERROR",r,o,n)}critical(r,n,o){this.log("CRITICAL",r,o,n)}getLogs(r){return this.logs.filter(n=>!(r?.level&&n.level!==r.level||r?.startTime&&new Date(n.timestamp)<r.startTime||r?.endTime&&new Date(n.timestamp)>r.endTime))}subscribe(r){return this.listeners.push(r),()=>{this.listeners=this.listeners.filter(n=>n!==r)}}clear(){this.logs=[]}logToConsole(r){const n={DEBUG:"color: #666; font-weight: normal;",INFO:"color: #0066cc; font-weight: bold;",WARN:"color: #ff9900; font-weight: bold;",ERROR:"color: #cc0000; font-weight: bold;",CRITICAL:"color: #fff; background-color: #cc0000; font-weight: bold; padding: 2px 4px;"},o={DEBUG:console.debug,INFO:console.info,WARN:console.warn,ERROR:console.error,CRITICAL:console.error}[r.level];o(`%c[${r.level}] ${r.message}`,n[r.level],r.context||"",r.error||"")}async sendToBackend(r){}}const Rt=new zy,nf="",By="https://api.resend.com/emails",Fy={async send(i){try{if(!nf)return Rt.warn("VITE_RESEND_API_KEY no configurada, emails no sero enviados",{to:i.to,subject:i.subject}),!1;const r=await fetch(By,{method:"POST",headers:{Authorization:`Bearer ${nf}`,"Content-Type":"application/json"},body:JSON.stringify({from:i.from||"noreply@agendabeleza.com.br",to:i.to,subject:i.subject,html:i.html,reply_to:i.replyTo})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Erro ao enviar email")}return Rt.info("Email enviado com sucesso",{to:i.to,subject:i.subject}),!0}catch(r){return Rt.error("Erro ao enviar email",r instanceof Error?r:new Error(String(r)),{to:i.to,subject:i.subject}),!1}},async sendAppointmentConfirmation(i,r,n,o,l,u="Agenda Beleza"){const d=new Date(`${i.date}T${i.time}`),m=d.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),p=d.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),v=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <style>
          body { font-family: Arial, sans-serif; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px 8px 0 0; }
          .content { background: #f9f9f9; padding: 20px; border: 1px solid #e0e0e0; }
          .details { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #667eea; }
          .footer { text-align: center; color: #999; font-size: 12px; margin-top: 20px; }
          .button { background: #667eea; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none; display: inline-block; margin: 10px 0; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Agendamento Confirmado!</h1>
          </div>
          <div class="content">
            <p>Ol <strong>${n}</strong>,</p>
            <p>Seu agendamento foi confirmado com sucesso em <strong>${u}</strong>!</p>
            
            <div class="details">
              <h3>Detalhes do Agendamento</h3>
              <p><strong>Servio:</strong> ${o}</p>
              <p><strong>Profissional:</strong> ${l}</p>
              <p><strong>Data:</strong> ${m}</p>
              <p><strong>Horrio:</strong> ${p}</p>
              <p><strong>ID do Agendamento:</strong> <code>${i.id}</code></p>
            </div>

            <p style="color: #666; font-size: 14px;">
              <strong> Importante:</strong> Chegue 5 minutos antes do horrio marcado. 
              Cancelamentos devem ser feitos com 12 horas de antecedncia.
            </p>

            <p style="text-align: center; margin: 20px 0;">
              <a href="mailto:contato@agendabeleza.com.br?subject=Dvida sobre agendamento ${i.id}" class="button">
                Enviar Dvida
              </a>
            </p>
          </div>
          <div class="footer">
            <p>Este  um email automtico. No responda diretamente.</p>
            <p>&copy; 2025 Agenda Beleza. Todos os direitos reservados.</p>
          </div>
        </div>
      </body>
      </html>
    `;return this.send({to:r,subject:`Agendamento confirmado para ${m}`,html:v,replyTo:"contato@agendabeleza.com.br"})},async sendAppointmentReminder(i,r,n,o,l){const d=new Date(`${i.date}T${i.time}`).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),m=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <style>
          body { font-family: Arial, sans-serif; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: #ff9800; color: white; padding: 20px; border-radius: 8px 8px 0 0; }
          .content { background: #f9f9f9; padding: 20px; border: 1px solid #e0e0e0; }
          .details { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #ff9800; }
          .footer { text-align: center; color: #999; font-size: 12px; margin-top: 20px; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Lembrete: Seu Agendamento  Amanh!</h1>
          </div>
          <div class="content">
            <p>Ol <strong>${n}</strong>,</p>
            <p>Este  um lembrete do seu agendamento amanh!</p>
            
            <div class="details">
              <h3>Detalhes</h3>
              <p><strong>Servio:</strong> ${o}</p>
              <p><strong>Profissional:</strong> ${l}</p>
              <p><strong>Horrio:</strong> ${d}</p>
            </div>

            <p>Confirmamos sua presena? Se precisar cancelar ou remarcar, avise-nos com antecedncia.</p>
          </div>
          <div class="footer">
            <p>&copy; 2025 Agenda Beleza. Todos os direitos reservados.</p>
          </div>
        </div>
      </body>
      </html>
    `;return this.send({to:r,subject:`Lembrete: Agendamento amanh s ${d}`,html:m})},async sendPaymentReceipt(i,r,n,o,l,u){const d=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o),m=l.toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),p=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <style>
          body { font-family: Arial, sans-serif; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: #4caf50; color: white; padding: 20px; border-radius: 8px 8px 0 0; }
          .content { background: #f9f9f9; padding: 20px; border: 1px solid #e0e0e0; }
          .receipt { background: white; padding: 15px; margin: 15px 0; border: 1px dashed #999; }
          .amount { font-size: 24px; font-weight: bold; color: #4caf50; margin: 15px 0; }
          .footer { text-align: center; color: #999; font-size: 12px; margin-top: 20px; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Recibo de Pagamento</h1>
          </div>
          <div class="content">
            <p>Ol <strong>${r}</strong>,</p>
            <p>Obrigado pela sua confiana! Segue seu recibo de pagamento:</p>
            
            <div class="receipt">
              <p><strong>Servio:</strong> ${n}</p>
              <div class="amount">${d}</div>
              <p><strong>Data:</strong> ${m}</p>
              <p><strong>ID da Transao:</strong> <code>${u}</code></p>
            </div>

            <p style="color: #666; font-size: 14px;">
              Guarde este email como comprovante. Qualquer dvida, entre em contato conosco.
            </p>
          </div>
          <div class="footer">
            <p>&copy; 2025 Agenda Beleza. Todos os direitos reservados.</p>
          </div>
        </div>
      </body>
      </html>
    `;return this.send({to:i,subject:`Recibo de pagamento - ${n}`,html:p,replyTo:"contato@agendabeleza.com.br"})},async sendCancellationNotice(i,r,n,o,l){const u=o.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),d=o.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),m=l?`<p>Um reembolso de <strong>${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(l)}</strong> ser processado em 3-5 dias teis.</p>`:"",p=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="UTF-8">
        <style>
          body { font-family: Arial, sans-serif; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: #f44336; color: white; padding: 20px; border-radius: 8px 8px 0 0; }
          .content { background: #f9f9f9; padding: 20px; border: 1px solid #e0e0e0; }
          .details { background: white; padding: 15px; margin: 15px 0; border-left: 4px solid #f44336; }
          .footer { text-align: center; color: #999; font-size: 12px; margin-top: 20px; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1> Agendamento Cancelado</h1>
          </div>
          <div class="content">
            <p>Ol <strong>${r}</strong>,</p>
            <p>Seu agendamento foi cancelado com sucesso.</p>
            
            <div class="details">
              <h3>Detalhes do Cancelamento</h3>
              <p><strong>Servio:</strong> ${n}</p>
              <p><strong>Data Original:</strong> ${u} s ${d}</p>
            </div>

            ${m}

            <p style="color: #666; font-size: 14px;">
              Se cancelou por engano, entre em contato conosco para reagendar.
            </p>
          </div>
          <div class="footer">
            <p>&copy; 2025 Agenda Beleza. Todos os direitos reservados.</p>
          </div>
        </div>
      </body>
      </html>
    `;return this.send({to:i,subject:`Agendamento cancelado: ${n}`,html:p,replyTo:"contato@agendabeleza.com.br"})}},Je={currency:i=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),phone:i=>{const r=i.replace(/\D/g,"");return r.length===11?r.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):r.length===10?r.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):i},cpf:i=>{const r=i.replace(/\D/g,"");return r.length===11?r.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):i},cnpj:i=>{const r=i.replace(/\D/g,"");return r.length===14?r.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):i},date:i=>{if(!i)return"";const r=i.split("-");return r.length!==3?i:`${r[2]}/${r[1]}/${r[0]}`},dateTime:i=>{if(!i)return"";try{const r=new Date(i);return new Intl.DateTimeFormat("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(r)}catch{return i}},time:i=>{if(!i)return"";const r=i.split(":");return r.length>=2?`${r[0]}:${r[1]}`:i},percentage:(i,r=0)=>new Intl.NumberFormat("pt-BR",{style:"percent",minimumFractionDigits:r,maximumFractionDigits:r}).format(i/100),number:(i,r=0)=>new Intl.NumberFormat("pt-BR",{minimumFractionDigits:r,maximumFractionDigits:r}).format(i),titleCase:i=>i.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "),truncate:(i,r=50)=>i.length<=r?i:i.substring(0,r)+"...",fileSize:i=>{const r=["B","KB","MB","GB"];let n=i,o=0;for(;n>=1024&&o<r.length-1;)n/=1024,o++;return`${n.toFixed(2)} ${r[o]}`},duration:i=>{const r=Math.floor(i/3600),n=Math.floor(i%3600/60),o=i%60;return`${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(o).padStart(2,"0")}`},relativeTime:i=>{const r=new Date,n=typeof i=="string"?new Date(i):i,o=r.getTime()-n.getTime(),l=Math.floor(o/1e3);return l<60?"agora mesmo":l<3600?`${Math.floor(l/60)} minuto${Math.floor(l/60)>1?"s":""} atrs`:l<86400?`${Math.floor(l/3600)} hora${Math.floor(l/3600)>1?"s":""} atrs`:l<604800?`${Math.floor(l/86400)} dia${Math.floor(l/86400)>1?"s":""} atrs`:Je.date(i instanceof Date?i.toISOString().split("T")[0]:i)},unformat:i=>{const r=i.replace(/[^\d.-]/g,"");return parseFloat(r)||0}},Vy=()=>{const[i,r]=H.useState("service"),[n,o]=H.useState(!1),[l,u]=H.useState(""),[d,m]=H.useState(null),[p,v]=H.useState({serviceId:"",professionalId:"",date:"",time:"",clientName:"",clientEmail:"",clientPhone:""}),y=H.useMemo(()=>ut.getServices(),[]),x=H.useMemo(()=>ut.getProfessionals(),[]),k=H.useMemo(()=>{if(!p.serviceId)return x;const R=y.find(I=>I.id===p.serviceId);return R?x.filter(I=>I.specialties?.includes(R.id)):x},[p.serviceId,y,x]),E=H.useMemo(()=>{if(!p.serviceId||!p.date)return[];const R=y.find(I=>I.id===p.serviceId);return R?Un.getAvailableSlots(p.date,p.serviceId,void 0,R?.durationMinutes||60):[]},[p.serviceId,p.date,y]),b=y.find(R=>R.id===p.serviceId),C=H.useMemo(()=>{if(!b)return 0;let R=b.price;if(p.time&&p.date){const A=new Date(`${p.date}T${p.time}:00`).getHours(),ne=Ot.getPromotions().find(be=>be.type==="HAPPY_HOUR"&&be.active);if(ne&&ne.rules?.startHour&&ne.rules?.endHour){const be=Number(ne.rules.startHour.split(":")[0]),je=Number(ne.rules.endHour.split(":")[0]);!Number.isNaN(be)&&!Number.isNaN(je)&&A>=be&&A<je&&(R=R*(1-(ne.discountPercentage||0)/100))}}return R},[b,p.time,p.date]),j=R=>{v(I=>({...I,serviceId:R,professionalId:"",date:"",time:""})),r("date"),u("")},D=R=>{v(I=>({...I,date:R})),r("professional"),u("")},L=R=>{v(I=>({...I,professionalId:R})),u("")},$=R=>{v(I=>({...I,time:R})),r("checkout"),u("")},q=R=>{const{name:I,value:A}=R.target;v(W=>({...W,[I]:A}))},ee=async()=>{try{if(o(!0),u(""),!p.clientName.trim())throw new Error("Nome obrigatrio");if(!p.clientEmail.includes("@"))throw new Error("Email invlido");if(!py(p.clientPhone||""))throw new Error("Telefone invlido (10-11 dgitos)");if(!p.date||!p.time)throw new Error("Data e hora obrigatrias");const R=await Un.api.createAppointment({id:`apt-${Date.now()}`,clientId:`guest-${Date.now()}`,clientName:p.clientName,professionalId:p.professionalId,serviceId:p.serviceId,date:p.date,time:p.time,status:Pt.PENDING,notes:"Agendamento via portal pblico"});if(!R.success)throw new Error(R.error||"Erro ao criar agendamento");const I=y.find(ne=>ne.id===p.serviceId),A=x.find(ne=>ne.id===p.professionalId),W=R.data?.[0]?.id||`apt-${Date.now()}`;Ot.addTransaction({id:`trans-${Date.now()}`,amount:C,type:Is.INCOME,category:As.SERVICE,description:`${I?.name} com ${A?.name}`,appointmentId:W,date:p.date}),await Fy.sendAppointmentConfirmation({id:`apt-${Date.now()}`,clientId:p.clientName,clientName:p.clientName,professionalId:p.professionalId,serviceId:p.serviceId,date:p.date,time:p.time,status:Pt.PENDING},p.clientEmail,p.clientName,I?.name||"Servio",A?.name||"Profissional"),m({id:`apt-${Date.now()}`,clientId:p.clientName,clientName:p.clientName,professionalId:p.professionalId,serviceId:p.serviceId,date:p.date,time:p.time,status:Pt.PENDING}),r("confirmation"),Rt.info("Agendamento realizado com sucesso",{clientEmail:p.clientEmail})}catch(R){const I=R instanceof Error?R.message:"Erro ao agendar";u(I),Rt.error("Erro no agendamento",R instanceof Error?R:new Error(String(R)))}finally{o(!1)}};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50 to-pink-50",children:[h.jsx("div",{className:"bg-white/80 backdrop-blur-md border-b border-purple-100/50 shadow-sm",children:h.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[h.jsxs("h1",{className:"text-4xl font-light text-gray-900",children:["Seu ",h.jsx("span",{className:"font-semibold bg-gradient-to-r from-purple-600 to-rose-600 bg-clip-text text-transparent",children:"Momento Premium"})]}),h.jsx("p",{className:"text-gray-600 mt-2 font-light",children:"Agende com elegncia. Escolha a melhor experincia."})]})}),h.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-12",children:[l&&h.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-2xl flex gap-3",children:[h.jsx(So,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),h.jsx("p",{className:"text-red-800 font-light",children:l})]}),h.jsx("div",{className:"mb-12",children:h.jsx("div",{className:"flex items-center justify-between relative",children:["service","date","professional","checkout","confirmation"].map((R,I)=>h.jsxs(Xr.Fragment,{children:[h.jsx("button",{onClick:()=>{i==="checkout"&&R!=="checkout"&&r(R)},className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all duration-300 ${i===R?"bg-gradient-to-br from-purple-600 to-rose-600 text-white shadow-lg":i.localeCompare(R)>0?"bg-purple-200/50 text-purple-700":"bg-gray-200 text-gray-600"}`,children:i.localeCompare(R)>0?h.jsx(ef,{className:"w-5 h-5"}):I+1}),I<4&&h.jsx("div",{className:`flex-1 h-1 mx-2 transition-all duration-300 ${i.localeCompare(R)>0?"bg-gradient-to-r from-purple-200 to-pink-200":"bg-gray-200"}`})]},R))})}),i==="service"&&h.jsxs("div",{children:[h.jsxs("h2",{className:"text-3xl font-light text-gray-900 mb-8",children:["Escolha seu ",h.jsx("span",{className:"font-semibold bg-gradient-to-r from-purple-600 to-rose-600 bg-clip-text text-transparent",children:"Servio"})]}),h.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:y.map(R=>h.jsxs("button",{onClick:()=>j(R.id),className:`group relative overflow-hidden rounded-2xl transition-all duration-500 cursor-pointer text-left ${p.serviceId===R.id?"ring-2 ring-purple-500 shadow-2xl":"hover:shadow-xl"}`,children:[h.jsxs("div",{className:`relative h-56 md:h-64 overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 ${p.serviceId===R.id?"ring-2 ring-inset ring-purple-400":""}`,children:[h.jsx("img",{src:R.imageUrl||`https://picsum.photos/400/300?random=${R.id}`,alt:R.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),h.jsx("div",{className:"absolute top-4 right-4",children:h.jsx("span",{className:"inline-block px-4 py-2 bg-white/95 backdrop-blur text-purple-600 font-semibold rounded-full text-lg shadow-lg",children:Je.currency(R.price)})})]}),h.jsxs("div",{className:`p-6 ${p.serviceId===R.id?"bg-gradient-to-br from-purple-50 to-pink-50":"bg-white"}`,children:[h.jsx("h3",{className:"font-semibold text-xl text-gray-900 mb-2",children:R.name}),h.jsx("p",{className:"text-sm text-gray-600 font-light mb-4 line-clamp-2",children:R.description}),h.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[h.jsxs("span",{className:"text-xs text-gray-500 font-light",children:[" ",R.durationMinutes," minutos"]}),h.jsx("span",{className:`text-sm font-semibold transition-colors ${p.serviceId===R.id?"text-purple-600":"text-purple-400 group-hover:text-purple-600"}`,children:"Selecionar "})]})]})]},R.id))})]}),i==="date"&&h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Escolha a data"}),h.jsx("div",{className:"grid md:grid-cols-7 gap-2",children:Array.from({length:30}).map((R,I)=>{const A=new Date;A.setDate(A.getDate()+I);const W=A.toISOString().split("T")[0],ne=A.toLocaleDateString("pt-BR",{weekday:"short"}),be=A.getDate(),je=Un.getAvailableSlots(W,p.serviceId,void 0,b?.durationMinutes||60).length>0;return h.jsxs("button",{onClick:()=>{je&&D(W)},disabled:!je,className:`p-3 rounded border-2 transition text-center ${je?"border-gray-200 bg-white hover:border-purple-300 cursor-pointer":"border-gray-100 bg-gray-50 cursor-not-allowed opacity-50"}`,children:[h.jsx("div",{className:"text-xs uppercase text-gray-500",children:ne}),h.jsx("div",{className:"font-semibold text-gray-900",children:be})]},W)})})]}),i==="professional"&&h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Escolha o profissional"}),h.jsx("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:k.map(R=>h.jsxs("button",{onClick:()=>L(R.id),className:`p-4 rounded-lg border-2 transition ${p.professionalId===R.id?"border-purple-600 bg-purple-50":"border-gray-200 bg-white hover:border-purple-300"}`,children:[h.jsx("img",{src:R.avatarUrl||`https://picsum.photos/200/200?random=${R.id}`,alt:R.name,className:"w-24 h-24 rounded-full mx-auto mb-2 object-cover"}),h.jsx("h3",{className:"font-semibold text-center",children:R.name}),h.jsx("p",{className:"text-sm text-gray-600 text-center",children:R.specialties?.join(", ")||"Especialista"})]},R.id))}),p.professionalId&&h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Escolha o horrio"}),h.jsx("div",{className:"grid md:grid-cols-6 gap-2",children:E.length===0?h.jsx("p",{className:"text-gray-500 col-span-full",children:"Nenhum horrio disponvel"}):E.map(R=>h.jsx("button",{onClick:()=>$(R),className:`p-2 rounded border-2 transition text-center font-medium ${p.time===R?"border-purple-600 bg-purple-50 text-purple-600":"border-gray-200 bg-white hover:border-purple-300"}`,children:R},R))})]})]}),i==="checkout"&&h.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Seus Dados"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),h.jsx("input",{type:"text",name:"clientName",value:p.clientName,onChange:q,placeholder:"Seu nome",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[h.jsx(fu,{className:"w-4 h-4 inline mr-1"}),"Email *"]}),h.jsx("input",{type:"email",name:"clientEmail",value:p.clientEmail,onChange:q,placeholder:"seu@email.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[h.jsx(hy,{className:"w-4 h-4 inline mr-1"}),"Telefone *"]}),h.jsx("input",{type:"tel",name:"clientPhone",value:p.clientPhone,onChange:R=>v(I=>({...I,clientPhone:Je.phone(R.target.value)})),placeholder:"(11) 98765-4321",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]})]})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Resumo"}),h.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 space-y-4",children:[h.jsxs("div",{className:"pb-4 border-b",children:[h.jsx("p",{className:"text-sm text-gray-600",children:"Servio"}),h.jsx("p",{className:"font-semibold text-gray-900",children:b?.name})]}),h.jsxs("div",{className:"pb-4 border-b",children:[h.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[h.jsx(du,{className:"w-4 h-4"}),"Data"]}),h.jsx("p",{className:"font-semibold text-gray-900",children:p.date?new Date(p.date).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"-"})]}),h.jsxs("div",{className:"pb-4 border-b",children:[h.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[h.jsx(hu,{className:"w-4 h-4"}),"Horrio"]}),h.jsx("p",{className:"font-semibold text-gray-900",children:p.time||"-"})]}),h.jsxs("div",{className:"pb-4 border-b",children:[h.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-2",children:[h.jsx(Zl,{className:"w-4 h-4"}),"Profissional"]}),h.jsx("p",{className:"font-semibold text-gray-900",children:x.find(R=>R.id===p.professionalId)?.name||"-"})]}),h.jsxs("div",{className:"pt-4 border-t-2",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-gray-600",children:"Subtotal"}),h.jsx("span",{className:"font-semibold",children:Je.currency(b?.price||0)})]}),C<(b?.price||0)&&h.jsxs("div",{className:"flex justify-between items-center mb-2 text-green-600",children:[h.jsx("span",{className:"text-sm",children:"Desconto (Happy Hour)"}),h.jsxs("span",{className:"text-sm font-semibold",children:["-",Je.currency((b?.price||0)-C)]})]}),h.jsxs("div",{className:"flex justify-between items-center text-lg font-bold text-purple-600",children:[h.jsx("span",{children:"Total"}),h.jsx("span",{children:Je.currency(C)})]})]}),h.jsx("button",{onClick:ee,disabled:n,className:"w-full mt-6 py-3 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?h.jsxs(h.Fragment,{children:[h.jsx(Ln,{className:"w-5 h-5 animate-spin"}),"Agendando..."]}):"Confirmar Agendamento"})]})]})]}),i==="confirmation"&&d&&h.jsx("div",{className:"max-w-md mx-auto text-center",children:h.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-8",children:[h.jsx(ef,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),h.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Agendamento Confirmado!"}),h.jsxs("p",{className:"text-gray-600 mb-6",children:["Um email de confirmao foi enviado para ",p.clientEmail]}),h.jsxs("div",{className:"bg-white p-4 rounded mb-6 text-left space-y-2",children:[h.jsxs("p",{className:"text-sm",children:[h.jsx("span",{className:"text-gray-600",children:"Servio:"}),h.jsx("span",{className:"font-semibold ml-2",children:b?.name})]}),h.jsxs("p",{className:"text-sm",children:[h.jsx("span",{className:"text-gray-600",children:"Profissional:"}),h.jsx("span",{className:"font-semibold ml-2",children:x.find(R=>R.id===p.professionalId)?.name})]}),h.jsxs("p",{className:"text-sm",children:[h.jsx("span",{className:"text-gray-600",children:"Data:"}),h.jsx("span",{className:"font-semibold ml-2",children:new Date(d.date).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),h.jsxs("p",{className:"text-sm",children:[h.jsx("span",{className:"text-gray-600",children:"Horrio:"}),h.jsx("span",{className:"font-semibold ml-2",children:d.time})]})]}),h.jsx("button",{onClick:()=>{v({serviceId:"",professionalId:"",date:"",time:"",clientName:"",clientEmail:"",clientPhone:""}),r("service"),m(null)},className:"w-full py-2 bg-purple-600 text-white font-semibold rounded hover:bg-purple-700 transition",children:"Novo Agendamento"})]})})]})]})},sf=()=>{const[i,r]=H.useState("calendar"),[n,o]=H.useState(new Date().toISOString().split("T")[0]),[l,u]=H.useState(""),[d,m]=H.useState(0);H.useEffect(()=>{const j=setInterval(()=>{m(D=>D+1)},3e4);return()=>clearInterval(j)},[]);const p=H.useMemo(()=>Un.getAppointments(),[d]),v=H.useMemo(()=>ut.getProfessionals(),[d]),y=H.useMemo(()=>ut.getServices(),[d]),x=H.useMemo(()=>Ot.getTransactions(),[d]),k=H.useMemo(()=>p.filter(j=>j.date===n&&(j.status==="PENDING"||j.status==="CONFIRMED")),[p,n]),E=H.useMemo(()=>{const j=new Map;return p.forEach(D=>{j.has(D.clientId)||j.set(D.clientId,{id:D.clientId,name:D.clientName,phone:D.clientPhone,email:D.clientEmail,appointmentCount:0,lastAppointment:new Date(0)});const L=j.get(D.clientId);L.appointmentCount++;const $=new Date(`${D.date}T${D.time}`);$>L.lastAppointment&&(L.lastAppointment=$)}),Array.from(j.values())},[p]),b=H.useMemo(()=>{if(!l)return E;const j=l.toLowerCase();return E.filter(D=>D.name.toLowerCase().includes(j)||D.phone.includes(j))},[E,l]),C=H.useMemo(()=>{const j=x.filter(L=>L.date===n&&L.type==="INCOME"),D=x.filter(L=>L.date.startsWith(n.substring(0,7))&&L.type==="INCOME");return{appointmentsToday:k.length,revenueToday:j.reduce((L,$)=>L+$.amount,0),revenueMonth:D.reduce((L,$)=>L+$.amount,0),totalClients:E.length,pendingAppointments:p.filter(L=>L.status==="PENDING").length}},[k,n,x,E,p]);return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx("div",{className:"bg-white shadow",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 flex justify-between items-center",children:[h.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Admin"}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{className:"px-4 py-2 text-gray-600 hover:text-gray-900",children:h.jsx(ap,{className:"w-6 h-6"})}),h.jsx("button",{className:"px-4 py-2 text-red-600 hover:text-red-900",children:h.jsx(sp,{className:"w-6 h-6"})})]})]})}),h.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[h.jsxs("div",{className:"grid md:grid-cols-5 gap-4 mb-8",children:[h.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-600 text-sm",children:"Agendamentos Hoje"}),h.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.appointmentsToday})]}),h.jsx(du,{className:"w-8 h-8 text-blue-500"})]})}),h.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-600 text-sm",children:"Receita Hoje"}),h.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Je.currency(C.revenueToday)})]}),h.jsx(Ms,{className:"w-8 h-8 text-green-500"})]})}),h.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-600 text-sm",children:"Receita Ms"}),h.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Je.currency(C.revenueMonth)})]}),h.jsx(Ms,{className:"w-8 h-8 text-green-500"})]})}),h.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-600 text-sm",children:"Total Clientes"}),h.jsx("p",{className:"text-2xl font-bold text-gray-900",children:C.totalClients})]}),h.jsx(wo,{className:"w-8 h-8 text-purple-500"})]})}),h.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-600 text-sm",children:"Pendentes"}),h.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:C.pendingAppointments})]}),h.jsx(So,{className:"w-8 h-8 text-yellow-500"})]})})]}),h.jsxs("div",{className:"bg-white rounded-lg shadow",children:[h.jsx("div",{className:"border-b",children:h.jsx("div",{className:"flex",children:["calendar","clients","settings"].map(j=>h.jsxs("button",{onClick:()=>r(j),className:`px-6 py-4 font-medium transition capitalize ${i===j?"border-b-2 border-purple-600 text-purple-600":"text-gray-600 hover:text-gray-900"}`,children:[j==="calendar"&&" Agenda",j==="clients"&&" Clientes",j==="settings"&&" Configuraes"]},j))})}),h.jsxs("div",{className:"p-6",children:[i==="calendar"&&h.jsxs("div",{children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data"}),h.jsx("input",{type:"date",value:n,onChange:j=>o(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]}),h.jsx("div",{className:"space-y-3",children:k.length===0?h.jsx("p",{className:"text-gray-500 text-center py-8",children:"Nenhum agendamento para este dia"}):k.map(j=>{const D=v.find($=>$.id===j.professionalId),L=y.find($=>$.id===j.serviceId);return h.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"font-semibold text-gray-900",children:j.clientName}),h.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(`${j.date}T${j.time}`).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})," ","- ",L?.name," com ",D?.name]}),h.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",j.clientPhone]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Ver detalhes",children:h.jsx(oy,{className:"w-5 h-5"})}),h.jsx("button",{className:"p-2 text-orange-600 hover:bg-orange-50 rounded",title:"Editar",children:h.jsx(iy,{className:"w-5 h-5"})}),h.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Cancelar",children:h.jsx(mu,{className:"w-5 h-5"})})]})]},j.id)})})]}),i==="clients"&&h.jsxs("div",{children:[h.jsx("input",{type:"text",placeholder:"Buscar cliente por nome ou telefone...",value:l,onChange:j=>u(j.target.value),className:"w-full px-3 py-2 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b",children:[h.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"Nome"}),h.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"Telefone"}),h.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"Email"}),h.jsx("th",{className:"text-center py-2 font-semibold text-gray-700",children:"Agendamentos"}),h.jsx("th",{className:"text-left py-2 font-semibold text-gray-700",children:"ltimo Agendamento"})]})}),h.jsx("tbody",{children:b.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:5,className:"text-center py-8 text-gray-500",children:"Nenhum cliente encontrado"})}):b.map(j=>h.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[h.jsx("td",{className:"py-3 font-medium text-gray-900",children:j.name}),h.jsx("td",{className:"py-3 text-gray-600",children:Je.phone(j.phone)}),h.jsx("td",{className:"py-3 text-gray-600",children:j.email}),h.jsx("td",{className:"py-3 text-center bg-purple-50 text-purple-600 font-medium",children:j.appointmentCount}),h.jsx("td",{className:"py-3 text-gray-600",children:Je.relativeTime(j.lastAppointment)})]},j.id))})]})})]}),i==="settings"&&h.jsxs("div",{className:"max-w-2xl",children:[h.jsx("h3",{className:"text-lg font-semibold mb-6 text-gray-900",children:"Configuraes do Salo"}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome do Salo"}),h.jsx("input",{type:"text",defaultValue:"Agenda Beleza",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email de Contato"}),h.jsx("input",{type:"email",defaultValue:"contato@agendabeleza.com.br",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone"}),h.jsx("input",{type:"tel",defaultValue:"(11) 98765-4321",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Horrio de Funcionamento"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsx("input",{type:"time",defaultValue:"09:00",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"}),h.jsx("input",{type:"time",defaultValue:"18:00",className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Janela de Cancelamento (horas)"}),h.jsx("input",{type:"number",defaultValue:"12",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Taxa de Pontos (%)"}),h.jsx("input",{type:"number",defaultValue:"10",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-600"})]}),h.jsx("button",{className:"w-full py-2 bg-purple-600 text-white font-semibold rounded-lg hover:bg-purple-700 transition",children:"Salvar Configuraes"})]})]})]})]})]})]})},yu=({title:i,subtitle:r,isAdmin:n=!1,showBack:o=!1,children:l})=>{const u=()=>window.history.back();return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:[h.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-slate-200 shadow-sm",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[o&&h.jsx("button",{onClick:u,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-600 transition",title:"Voltar",children:h.jsx(tp,{size:20})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:i}),r&&h.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r})]})]}),h.jsx("div",{className:"text-right text-xs text-slate-400",children:n&&h.jsx("span",{className:"inline-block px-3 py-1 bg-rose-100 text-rose-700 rounded-full font-bold",children:"ADMIN"})})]})})}),h.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l}),h.jsx("footer",{className:"mt-16 border-t border-slate-200 bg-white py-8",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-500",children:[h.jsx("p",{children:" 2025 AgendaBeleza. Todos os direitos reservados."}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("a",{href:"#",className:"hover:text-slate-700 transition",children:"Poltica de Privacidade"}),h.jsx("a",{href:"#",className:"hover:text-slate-700 transition",children:"Termos de Servio"})]})]})})})]})},Ze={...Cr,...ut,...Un,...Ot,api:{getServices:ut.api.getServices,getProfessionals:ut.api.getProfessionals,upsertService:ut.api.upsertService,deleteService:ut.api.deleteService,upsertProfessional:ut.api.upsertProfessional,deleteProfessional:ut.api.deleteProfessional,createAppointment:Un.api.createAppointment}},fp=H.createContext(void 0),qy=({children:i})=>{const[r,n]=H.useState([]),o=H.useCallback((m,p,v=3e3)=>{const y=Yr(),x={id:y,message:m,type:p,duration:v};n(k=>[...k,x]),v>0&&setTimeout(()=>{l(y)},v)},[]),l=H.useCallback(m=>{n(p=>p.filter(v=>v.id!==m))},[]),u=H.useCallback(()=>{n([])},[]),d={toasts:r,addToast:o,removeToast:l,clearToasts:u};return h.jsxs(fp.Provider,{value:d,children:[i,h.jsx(Hy,{})]})},wu=()=>{const i=H.useContext(fp);if(i===void 0)throw new Error("useToast must be used within ToastProvider");return i},Hy=()=>{const{toasts:i,removeToast:r}=wu(),n={success:"bg-emerald-500",error:"bg-red-500",info:"bg-blue-500",warning:"bg-amber-500"},o={success:"",error:"",info:"",warning:""};return h.jsx("div",{className:"fixed bottom-4 right-4 z-[9999] space-y-2 pointer-events-none",children:i.map(l=>h.jsxs("div",{className:`
            ${n[l.type]} text-white px-6 py-4 rounded-xl shadow-lg
            flex items-center gap-3 animate-fade-in-up pointer-events-auto
            cursor-pointer hover:shadow-xl transition-shadow
          `,onClick:()=>r(l.id),children:[h.jsx("span",{className:"font-bold text-lg",children:o[l.type]}),h.jsx("span",{className:"font-medium flex-1",children:l.message}),h.jsx("button",{onClick:u=>{u.stopPropagation(),r(l.id)},className:"ml-2 hover:opacity-70 transition opacity-70",children:""})]},l.id))})},Wy=()=>{const{addToast:i}=wu(),[r,n]=H.useState([]),[o,l]=H.useState([]),[u,d]=H.useState(!0),[m,p]=H.useState(!1),[v,y]=H.useState(!1),[x,k]=H.useState(null),E={workDays:[1,2,3,4,5],workStart:"09:00",workEnd:"18:00",breakStart:"12:00",breakEnd:"13:00"},[b,C]=H.useState({id:"",name:"",avatar:"",commission:50,specialties:[],schedule:E}),j=["Dom","Seg","Ter","Qua","Qui","Sex","Sab"];H.useEffect(()=>{D()},[]);const D=async()=>{d(!0);try{const[A,W]=await Promise.all([Ze.api.getProfessionals(),Ze.api.getServices()]);n(A),l(W)}catch{i("Erro ao carregar equipe.","error")}finally{d(!1)}},L=()=>{C({id:"",name:"",avatar:"",commission:50,specialties:[],schedule:E}),k(null)},$=A=>{A?(k(A.id),C({id:A.id,name:A.name,avatar:A.avatarUrl,commission:A.commissionPercentage,specialties:A.specialties,schedule:A.schedule})):L(),y(!0)},q=async()=>{if(!b.name||b.specialties.length===0)return i("Nome e especialidade obrigatrios.","error");p(!0);try{const W={id:x||Math.random().toString(36).substr(2,9),name:b.name,commissionPercentage:b.commission,specialties:b.specialties,schedule:b.schedule,avatarUrl:b.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(b.name)}`};await Ze.api.upsertProfessional(W),x?(n(r.map(ne=>ne.id===x?W:ne)),i("Profissional atualizado!","success")):(n([...r,W]),i("Profissional adicionado!","success")),y(!1),L()}catch{i(x?"Erro ao atualizar profissional.":"Erro ao criar profissional.","error")}finally{p(!1)}},ee=async A=>{if(window.confirm("Tem certeza que deseja remover este profissional?")){p(!0);try{await Ze.api.deleteProfessional(A),n(r.filter(W=>W.id!==A)),i("Profissional removido.","success")}catch{i("Erro ao remover profissional.","error")}finally{p(!1)}}},R=A=>{C(W=>({...W,specialties:W.specialties.includes(A)?W.specialties.filter(ne=>ne!==A):[...W.specialties,A]}))},I=A=>{C(W=>({...W,schedule:{...W.schedule,workDays:W.schedule.workDays.includes(A)?W.schedule.workDays.filter(ne=>ne!==A):[...W.schedule.workDays,A].sort()}}))};return h.jsxs(yu,{title:"Equipe",isAdmin:!0,showBack:!0,children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Equipe"}),h.jsxs("button",{onClick:()=>$(),className:"flex items-center gap-2 px-4 py-2 bg-rose-600 text-white rounded-xl hover:bg-rose-700 transition font-bold text-sm shadow-lg shadow-rose-200",children:[h.jsx(ip,{size:18})," Novo Profissional"]})]}),u?h.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[h.jsx(Ln,{size:40,className:"animate-spin text-rose-500 mb-4"}),h.jsx("p",{className:"text-slate-500 font-medium",children:"Carregando equipe..."})]}):h.jsx("div",{className:"space-y-4",children:r.length===0?h.jsx("div",{className:"text-center py-16 bg-white rounded-2xl border border-dashed border-slate-300",children:h.jsx("p",{className:"text-slate-500 font-medium",children:"Nenhum profissional cadastrado."})}):r.map(A=>h.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition p-5 flex justify-between items-center group",children:[h.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[h.jsx("img",{src:A.avatarUrl,alt:A.name,className:"w-14 h-14 rounded-full bg-slate-100 object-cover"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-bold text-slate-900 text-lg",children:A.name}),h.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[h.jsxs("span",{className:"text-xs bg-rose-50 text-rose-600 px-2.5 py-1 rounded-lg font-medium flex items-center gap-1",children:[h.jsx(Xl,{size:12})," ",A.commissionPercentage,"% comisso"]}),h.jsxs("span",{className:"text-xs bg-slate-100 text-slate-600 px-2.5 py-1 rounded-lg font-medium",children:[A.specialties.length," especialidade",A.specialties.length!==1?"s":""]}),h.jsxs("span",{className:"text-xs bg-indigo-50 text-indigo-600 px-2.5 py-1 rounded-lg font-medium flex items-center gap-1",children:[h.jsx(hu,{size:12})," ",A.schedule.workDays.length," dias"]})]})]})]}),h.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:()=>$(A),className:"p-2 hover:bg-rose-50 rounded-lg text-slate-400 hover:text-rose-600 transition",children:h.jsx(rp,{size:18})}),h.jsx("button",{onClick:()=>ee(A.id),className:"p-2 hover:bg-red-50 rounded-lg text-slate-400 hover:text-red-600 transition",children:h.jsx(mu,{size:18})})]})]},A.id))}),v&&h.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 overflow-y-auto",children:h.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl animate-fade-in-up my-8 flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center sticky top-0 bg-white z-10 rounded-t-2xl",children:[h.jsx("h3",{className:"text-xl font-bold text-slate-900",children:x?"Editar Profissional":"Novo Profissional"}),h.jsx("button",{onClick:()=>{y(!1),L()},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 transition",children:h.jsx(gu,{size:20})})]}),h.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-bold text-slate-900 text-sm uppercase tracking-wide",children:"Informaes Bsicas"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Nome Completo"}),h.jsx("input",{value:b.name,onChange:A=>C({...b,name:A.target.value}),className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-rose-200 outline-none transition",placeholder:"Ex: Maria Silva"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Comisso (%)"}),h.jsx("input",{type:"number",min:"0",max:"100",value:b.commission,onChange:A=>C({...b,commission:Number(A.target.value)}),className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-rose-200 outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Avatar URL (opcional)"}),h.jsx("input",{value:b.avatar,onChange:A=>C({...b,avatar:A.target.value}),className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-rose-200 outline-none",placeholder:"https://exemplo.com/foto.jpg"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-bold text-slate-900 text-sm uppercase tracking-wide",children:"Especialidades"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(A=>h.jsxs("button",{onClick:()=>R(A.id),className:`px-4 py-2 rounded-lg text-xs font-bold border transition ${b.specialties.includes(A.id)?"bg-rose-500 text-white border-rose-500 ring-2 ring-rose-200":"bg-slate-50 border-slate-200 text-slate-600 hover:border-rose-300"}`,children:[b.specialties.includes(A.id)&&h.jsx(sy,{size:12,className:"inline mr-1"}),A.name]},A.id))})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-bold text-slate-900 text-sm uppercase tracking-wide",children:"Horrio de Trabalho"}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-3",children:"Dias de Trabalho"}),h.jsx("div",{className:"grid grid-cols-7 gap-2",children:j.map((A,W)=>h.jsx("button",{onClick:()=>I(W),className:`py-2 px-1 rounded-lg text-xs font-bold border transition ${b.schedule.workDays.includes(W)?"bg-rose-500 text-white border-rose-500 ring-2 ring-rose-200":"bg-slate-50 border-slate-200 text-slate-600 hover:border-rose-300"}`,children:A},W))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Incio do Expediente"}),h.jsx("input",{type:"time",value:b.schedule.workStart,onChange:A=>C({...b,schedule:{...b.schedule,workStart:A.target.value}}),className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-rose-200 outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Fim do Expediente"}),h.jsx("input",{type:"time",value:b.schedule.workEnd,onChange:A=>C({...b,schedule:{...b.schedule,workEnd:A.target.value}}),className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-rose-200 outline-none"})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 p-4 rounded-xl border border-slate-200",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Intervalo: Incio"}),h.jsx("input",{type:"time",value:b.schedule.breakStart||"12:00",onChange:A=>C({...b,schedule:{...b.schedule,breakStart:A.target.value}}),className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-rose-200 outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Intervalo: Fim"}),h.jsx("input",{type:"time",value:b.schedule.breakEnd||"13:00",onChange:A=>C({...b,schedule:{...b.schedule,breakEnd:A.target.value}}),className:"w-full p-3 border border-slate-200 rounded-lg focus:ring-2 focus:ring-rose-200 outline-none"})]})]})]})]}),h.jsxs("div",{className:"p-6 border-t border-slate-200 flex gap-3 bg-white sticky bottom-0 rounded-b-2xl",children:[h.jsx("button",{onClick:()=>{y(!1),L()},className:"flex-1 py-3 text-slate-600 hover:bg-slate-50 rounded-xl font-bold transition",children:"Cancelar"}),h.jsx("button",{onClick:q,disabled:m,className:"flex-1 py-3 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 transition",children:m?h.jsxs(h.Fragment,{children:[h.jsx(Ln,{className:"animate-spin",size:18})," Salvando..."]}):h.jsxs(h.Fragment,{children:[h.jsx(op,{size:18})," ",x?"Atualizar":"Salvar"]})})]})]})})]})},Ky=()=>(console.warn("Gemini API key not configured. Set VITE_GEMINI_API_KEY environment variable."),""),co=async i=>{const r=Ky();if(!r)return Rt.warn("Gemini API not configured",{feature:"AI Description Generation"}),"";try{const n=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent",{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":r},body:JSON.stringify({contents:[{parts:[{text:i}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:200}})});if(!n.ok)throw new Error(`Gemini API error: ${n.statusText}`);const o=await n.json();return o.candidates&&o.candidates[0]?.content?.parts[0]?.text?o.candidates[0].content.parts[0].text.trim():(Rt.warn("Unexpected Gemini response structure",{data:o}),"")}catch(n){return Rt.error("Gemini API call failed",n,{prompt:i}),""}},Gy={generateServiceDescription:async(i,r="beauty, salon, professional")=>{const n=`
      Generate a concise and attractive description for a beauty salon service called "${i}".
      Context: ${r}
      
      Requirements:
      - Maximum 2-3 sentences
      - Professional and inviting tone
      - Highlight benefits and what to expect
      - In Portuguese (Brazilian Portuguese if possible)
      
      Description:
    `;try{return await co(n)||`Servio premium de ${i} com excelente qualidade.`}catch(o){return Rt.error("Failed to generate service description",o,{serviceName:i}),`Servio premium de ${i} com excelente qualidade.`}},generateProductRecommendations:async(i,r="beauty products")=>{const n=`
      Recommend 3-5 beauty/salon products that would complement the service "${i}".
      Category: ${r}
      
      Format your response as a JSON array of strings with product names only.
      Example: ["Product 1", "Product 2", "Product 3"]
    `;try{const l=(await co(n)).match(/\[.*\]/s);return l?JSON.parse(l[0]):[]}catch(o){return Rt.error("Failed to generate product recommendations",o,{serviceName:i}),[]}},generateProfessionalBio:async(i,r,n)=>{const o=`
      Create a professional and engaging bio for a beauty salon professional.
      
      Name: ${i}
      Specialties: ${r.join(", ")}
      ${n?`Experience: ${n}`:""}
      
      Requirements:
      - 2-3 sentences
      - Professional tone
      - Highlight expertise and approach
      - In Portuguese
      
      Bio:
    `;try{return await co(o)||`${i}  um profissional experiente especializado em ${r.join(", ")}.`}catch(l){return Rt.error("Failed to generate professional bio",l,{name:i}),`${i}  um profissional experiente especializado em ${r.join(", ")}.`}},generatePromotionalContent:async(i,r)=>{const n=`
      Create engaging promotional content for a beauty salon.
      
      Type: ${i}
      Details: ${r}
      
      Requirements:
      - Catchy and persuasive
      - Call-to-action included
      - In Portuguese
      - Keep it under 150 characters
      
      Content:
    `;try{return await co(n)||`Aproveite esta promoo especial em ${i}!`}catch(o){return Rt.error("Failed to generate promotional content",o,{promotionType:i}),`Aproveite esta promoo especial em ${i}!`}}},Jy=()=>{const{addToast:i}=wu(),[r,n]=H.useState([]),[o,l]=H.useState([]),[u,d]=H.useState([]),[m,p]=H.useState([]),[v,y]=H.useState(!1),[x,k]=H.useState("DETAILS"),[E,b]=H.useState(null),[C,j]=H.useState(!1),[D,L]=H.useState(!0),[$,q]=H.useState(!1),[ee,R]=H.useState({name:"",description:"",price:0,durationMinutes:60,bufferMinutes:0,imageUrl:""}),[I,A]=H.useState([]);H.useEffect(()=>{W()},[]);const W=async()=>{L(!0);try{const[G,fe]=await Promise.all([Ze.api.getServices(),Ze.api.getProfessionals()]);n(G),d(fe),l(Ze.getProducts()),p(Ze.getProductConsumption())}catch{i("Erro ao carregar servios.","error")}finally{L(!1)}},ne=G=>{if(G){b(G),R({name:G.name,description:G.description||"",price:G.price,durationMinutes:G.durationMinutes,bufferMinutes:G.bufferMinutes||0,imageUrl:G.imageUrl||""});const fe=u.filter(ue=>ue.specialties.includes(G.id)).map(ue=>ue.id);A(fe)}else b(null),R({name:"",description:"",price:0,durationMinutes:60,bufferMinutes:0,imageUrl:`https://picsum.photos/400/300?random=${Math.floor(Math.random()*1e3)}`}),A([]);k("DETAILS"),y(!0)},be=async G=>{if(window.confirm("Tem certeza que deseja excluir este servio?")){L(!0);try{await Ze.api.deleteService(G);const fe=u.filter(ue=>ue.specialties.includes(G)).map(ue=>({...ue,specialties:ue.specialties.filter(V=>V!==G)}));fe.length>0&&await Promise.all(fe.map(ue=>Ze.api.upsertProfessional(ue))),i("Servio excludo com sucesso.","success"),await W()}catch{i("Erro ao excluir servio.","error"),L(!1)}}},je=async()=>{if(!ee.name)return i("O nome  obrigatrio","error");q(!0);try{let G=E?.id||Math.random().toString(36).substr(2,9);const fe={id:G,...ee};await Ze.api.upsertService(fe);const ue=u.map(async V=>{const se=I.includes(V.id),J=V.specialties.includes(G);let N=null;return se&&!J?N={...V,specialties:[...V.specialties,G]}:!se&&J&&(N={...V,specialties:V.specialties.filter(U=>U!==G)}),N?Ze.api.upsertProfessional(N):Promise.resolve()});await Promise.all(ue),i(E?"Servio atualizado!":"Servio criado com sucesso!","success"),y(!1),await W()}catch{i("Erro ao salvar dados na nuvem.","error")}finally{q(!1)}},Me=G=>{A(fe=>fe.includes(G)?fe.filter(ue=>ue!==G):[...fe,G])},ot=async()=>{if(!ee.name)return alert("Digite o nome do servio primeiro.");j(!0);const G=await Gy.generateServiceDescription(ee.name,"beleza, cuidado, premium");R(fe=>({...fe,description:G})),j(!1)};return h.jsxs(yu,{title:"Gerenciar Servios",isAdmin:!0,showBack:!0,children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Catlogo de Servios"}),h.jsxs("button",{onClick:()=>ne(),className:"flex items-center gap-2 px-4 py-2 bg-rose-600 text-white rounded-xl hover:bg-rose-700 transition font-bold text-sm shadow-lg shadow-rose-200 transform hover:-translate-y-0.5",children:[h.jsx(ip,{size:18})," Novo Servio"]})]}),D?h.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-rose-500",children:[h.jsx(Ln,{size:40,className:"animate-spin mb-4"}),h.jsx("p",{className:"text-slate-500 font-medium",children:"Sincronizando catlogo..."})]}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:r.length===0?h.jsxs("div",{className:"col-span-full text-center py-16 bg-white rounded-2xl border border-dashed border-slate-300",children:[h.jsx(dy,{size:48,className:"mx-auto text-slate-300 mb-4"}),h.jsx("p",{className:"text-slate-500 font-medium",children:"Nenhum servio cadastrado."})]}):r.map(G=>{const fe=u.filter(ue=>ue.specialties.includes(G.id));return h.jsxs("div",{className:"group bg-white rounded-2xl border border-slate-100 shadow-sm hover:shadow-[0_8px_30px_rgba(0,0,0,0.06)] transition-all duration-300 overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"relative h-44 bg-slate-100 overflow-hidden",children:[h.jsx("img",{src:G.imageUrl,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700",alt:G.name,onError:ue=>ue.target.src="https://via.placeholder.com/400x300?text=Sem+Imagem"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/60 to-transparent opacity-80"}),h.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[h.jsx("h3",{className:"font-bold text-white text-lg leading-tight mb-1 drop-shadow-sm",children:G.name}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"bg-white/20 backdrop-blur-md text-white px-2 py-0.5 rounded text-xs font-bold border border-white/10",children:["R$ ",G.price.toFixed(2)]})})]}),h.jsxs("div",{className:"absolute top-3 right-3 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 translate-y-[-10px] group-hover:translate-y-0",children:[h.jsx("button",{onClick:()=>ne(G),className:"p-2 bg-white text-slate-700 rounded-full hover:text-rose-600 shadow-lg hover:shadow-xl transition",children:h.jsx(rp,{size:16})}),h.jsx("button",{onClick:()=>be(G.id),className:"p-2 bg-white text-slate-700 rounded-full hover:text-red-600 shadow-lg hover:shadow-xl transition",children:h.jsx(mu,{size:16})})]})]}),h.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[h.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-5 flex-1 leading-relaxed",children:G.description||"Sem descrio definida."}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between text-xs font-medium text-slate-600 bg-slate-50 p-2.5 rounded-lg border border-slate-100",children:[h.jsxs("span",{className:"flex items-center gap-1.5",children:[h.jsx(hu,{size:14,className:"text-slate-400"})," Durao Total"]}),h.jsxs("span",{className:"text-slate-900 font-bold",children:[G.durationMinutes+(G.bufferMinutes||0)," min"]})]}),h.jsx("div",{className:"flex items-center gap-3 text-xs text-slate-400 pt-2 border-t border-slate-50",children:h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(wo,{size:12})," ",fe.length]})})]})]})]},G.id)})}),v&&h.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-fade-in-up",children:[h.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center bg-white sticky top-0 z-10",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900",children:E?"Editar Servio":"Novo Servio"}),h.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 transition",children:h.jsx(gu,{size:20})})]}),h.jsxs("div",{className:"flex border-b border-slate-100 px-6 gap-6 bg-slate-50/50",children:[h.jsx("button",{onClick:()=>k("DETAILS"),className:`py-3 text-sm font-bold border-b-2 transition ${x==="DETAILS"?"border-rose-600 text-rose-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Detalhes"}),h.jsxs("button",{onClick:()=>k("TEAM"),className:`py-3 text-sm font-bold border-b-2 transition ${x==="TEAM"?"border-rose-600 text-rose-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Equipe (",I.length,")"]}),E&&h.jsx("button",{onClick:()=>k("MATERIALS"),className:`py-3 text-sm font-bold border-b-2 transition ${x==="MATERIALS"?"border-rose-600 text-rose-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Materiais"})]}),h.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[x==="DETAILS"&&h.jsxs("div",{className:"space-y-5",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Nome do Servio"}),h.jsx("input",{className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-rose-200 outline-none transition",value:ee.name,onChange:G=>R({...ee,name:G.target.value}),placeholder:"Ex: Corte Bordado"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between mb-1.5",children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase",children:"Descrio"}),h.jsxs("button",{onClick:ot,disabled:C,className:"text-xs flex items-center gap-1 text-rose-600 font-bold hover:bg-rose-50 px-2 py-0.5 rounded transition disabled:opacity-50",children:[C?h.jsx(Ln,{size:12,className:"animate-spin"}):h.jsx(pu,{size:12})," Gerar com IA"]})]}),h.jsx("textarea",{className:"w-full p-3 border border-slate-200 rounded-xl h-24 text-sm focus:ring-2 focus:ring-rose-200 outline-none resize-none",value:ee.description,onChange:G=>R({...ee,description:G.target.value}),placeholder:"Descrio..."})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Preo (R$)"}),h.jsx("input",{type:"number",className:"w-full p-3 border border-slate-200 rounded-xl outline-none",value:ee.price,onChange:G=>R({...ee,price:Number(G.target.value)})})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"Durao (min)"}),h.jsx("input",{type:"number",step:"15",className:"w-full p-3 border border-slate-200 rounded-xl outline-none",value:ee.durationMinutes,onChange:G=>R({...ee,durationMinutes:Number(G.target.value)})})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"flex items-center gap-1 text-xs font-bold text-slate-500 uppercase mb-1.5",children:["Buffer (Limpeza) ",h.jsx(ly,{size:10})]}),h.jsx("input",{type:"number",step:"5",className:"w-full p-3 border border-slate-200 rounded-xl outline-none",value:ee.bufferMinutes,onChange:G=>R({...ee,bufferMinutes:Number(G.target.value)})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1.5",children:"URL da Imagem"}),h.jsx("input",{className:"w-full p-3 border border-slate-200 rounded-xl text-sm outline-none",value:ee.imageUrl,onChange:G=>R({...ee,imageUrl:G.target.value}),placeholder:"https://exemplo.com/imagem.jpg"})]})]}),x==="TEAM"&&h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:u.map(G=>{const fe=I.includes(G.id);return h.jsxs("div",{onClick:()=>Me(G.id),className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer ${fe?"bg-rose-50 border-rose-500 ring-1 ring-rose-500":"bg-white border-slate-200"}`,children:[h.jsx("div",{className:`w-6 h-6 rounded-md border flex items-center justify-center ${fe?"bg-rose-500 border-rose-500 text-white":"bg-white border-slate-300"}`,children:fe&&h.jsx(wo,{size:14})}),h.jsx("span",{className:"text-sm font-bold",children:G.name})]},G.id)})})]}),h.jsxs("div",{className:"p-5 border-t border-slate-100 flex gap-3 bg-white",children:[h.jsx("button",{onClick:()=>y(!1),className:"flex-1 py-3.5 text-slate-600 hover:bg-slate-50 rounded-xl font-bold transition",children:"Cancelar"}),h.jsx("button",{onClick:je,disabled:$,className:"flex-1 py-3.5 bg-rose-600 text-white rounded-xl font-bold hover:bg-rose-700 shadow-lg flex items-center justify-center gap-2",children:$?h.jsx(Ln,{className:"animate-spin",size:18}):h.jsxs(h.Fragment,{children:[h.jsx(op,{size:18})," Salvar Servio"]})})]})]})})]})},Qy=()=>{const[i,r]=H.useState([]),[n,o]=H.useState([]),[l,u]=H.useState([]),[d,m]=H.useState([]),[p,v]=H.useState([]),[y,x]=H.useState([]),[k,E]=H.useState(new Date().toISOString().slice(0,7));H.useEffect(()=>{b()},[]);const b=async()=>{const I=await Ot.api.getTransactions();r(I);const[A,W]=await Promise.all([Ze.api.getProfessionals(),Ze.api.getServices()]);o(A),x(W),u(Ze.getPaymentMethods()),m(Ze.getCommissions()),v(Ze.getAppointments())},C=i.filter(I=>I.date.startsWith(k)),j=C.filter(I=>I.type==="INCOME").reduce((I,A)=>I+A.amount,0),D=C.filter(I=>I.type==="EXPENSE").reduce((I,A)=>I+A.amount,0),L=j-D,$=Xr.useMemo(()=>{const I=new Date(parseInt(k.split("-")[0]),parseInt(k.split("-")[1]),0).getDate(),A=[];let W=0;for(let ne=1;ne<=I;ne++){const be=`${k}-${ne.toString().padStart(2,"0")}`,je=i.filter(Me=>Me.date===be&&Me.type==="INCOME").reduce((Me,ot)=>Me+ot.amount,0);je>W&&(W=je),A.push({day:ne,value:je,fullDate:be})}return{data:A,maxVal:W}},[i,k]),q=n.map(I=>{const A=d.filter(ne=>ne.professionalId===I.id&&ne.date.startsWith(k)),W=A.reduce((ne,be)=>ne+be.amount,0);return{pro:I,commissionAmount:W,count:A.length}}),ee=Xr.useMemo(()=>{const I={};return C.forEach(A=>{if(A.category==="SERVICE"||A.category==="PACKAGE_USAGE"){const W=p.find(ne=>ne.id===A.appointmentId);if(W){const ne=y.find(be=>be.id===W.serviceId);ne&&(I[ne.id]||(I[ne.id]={service:ne,count:0,revenue:0}),I[ne.id].count+=1,I[ne.id].revenue+=A.amount)}}}),Object.values(I).sort((A,W)=>W.count-A.count)},[C,p,y]),R=I=>I?l.find(A=>A.id===I)?.name||I:"-";return h.jsxs(yu,{title:"Financeiro & Comisses",isAdmin:!0,showBack:!0,children:[h.jsxs("div",{className:"flex items-center justify-between mb-6 bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"p-2 bg-slate-100 rounded-lg text-slate-500",children:h.jsx(du,{size:20})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Perodo de Anlise"}),h.jsx("input",{type:"month",value:k,onChange:I=>E(I.target.value),className:"border-none outline-none font-bold text-slate-900 bg-transparent text-lg p-0 cursor-pointer hover:text-rose-600 transition"})]})]}),h.jsxs("div",{className:"text-right hidden sm:block",children:[h.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Resultado do Ms"}),h.jsxs("p",{className:`font-bold text-lg ${L>=0?"text-emerald-600":"text-red-600"}`,children:[L>=0?"+":""," ",Je.currency(L)]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[h.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 p-6 rounded-xl shadow-sm relative overflow-hidden group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition-transform",children:h.jsx(Ms,{size:48})}),h.jsxs("p",{className:"text-emerald-600 text-sm font-bold uppercase tracking-wide flex items-center gap-2 relative z-10",children:[h.jsx(Ms,{size:16})," Receita Bruta"]}),h.jsx("h3",{className:"text-3xl font-bold text-emerald-800 mt-2 relative z-10",children:Je.currency(j)})]}),h.jsxs("div",{className:"bg-red-50 border border-red-100 p-6 rounded-xl shadow-sm relative overflow-hidden group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition-transform",children:h.jsx(Rl,{size:48})}),h.jsxs("p",{className:"text-red-600 text-sm font-bold uppercase tracking-wide flex items-center gap-2 relative z-10",children:[h.jsx(Rl,{size:16})," Despesas"]}),h.jsx("h3",{className:"text-3xl font-bold text-red-800 mt-2 relative z-10",children:Je.currency(D)})]}),h.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 p-6 rounded-xl shadow-sm relative overflow-hidden group",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:scale-110 transition-transform",children:h.jsx(Xl,{size:48})}),h.jsxs("p",{className:"text-indigo-600 text-sm font-bold uppercase tracking-wide flex items-center gap-2 relative z-10",children:[h.jsx(Xl,{size:16})," Lucro Lquido"]}),h.jsx("h3",{className:"text-3xl font-bold text-indigo-800 mt-2 relative z-10",children:Je.currency(L)})]})]}),h.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-6 mb-8 shadow-sm",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[h.jsx(Zh,{size:20,className:"text-rose-500"})," Performance Diria"]}),h.jsx("span",{className:"text-xs font-medium text-slate-400 bg-slate-100 px-2 py-1 rounded",children:"Receita (Entradas)"})]}),h.jsx("div",{className:"h-48 flex items-end gap-1 sm:gap-2",children:$.data.map(I=>{const A=$.maxVal>0?I.value/$.maxVal*100:0;return h.jsxs("div",{className:"flex-1 flex flex-col justify-end group relative",children:[h.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-[10px] py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10 font-bold",children:[I.fullDate.split("-").reverse().slice(0,2).join("/"),": ",Je.currency(I.value)]}),h.jsx("div",{style:{height:`${Math.max(A,0)}%`},className:`w-full min-h-[4px] rounded-t-sm transition-all duration-500 ${I.value>0?"bg-rose-400 group-hover:bg-rose-600":"bg-slate-100"}`}),I.day%2!==0&&h.jsx("span",{className:"text-[10px] text-slate-400 text-center mt-2 font-medium",children:I.day})]},I.day)})})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[h.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm flex flex-col",children:[h.jsxs("div",{className:"p-5 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"font-bold text-slate-900 text-lg flex items-center gap-2",children:[h.jsx(fy,{size:20,className:"text-rose-500"})," Comisses"]}),h.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Valores a pagar para a equipe."})]}),h.jsxs("button",{className:"text-xs font-bold text-rose-600 hover:text-rose-700 bg-rose-50 px-3 py-1.5 rounded-lg flex items-center gap-1",children:["Exportar ",h.jsx(Xh,{size:12})]})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm",children:[h.jsx("thead",{className:"bg-white text-slate-500 font-medium border-b border-slate-100",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-4",children:"Profissional"}),h.jsx("th",{className:"p-4 text-center",children:"Qtd"}),h.jsx("th",{className:"p-4 text-right",children:"Total"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:q.map(I=>h.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[h.jsxs("td",{className:"p-4 font-bold text-slate-900 flex items-center gap-2",children:[h.jsx("img",{src:I.pro.avatarUrl,className:"w-6 h-6 rounded-full bg-slate-200",alt:""}),h.jsx("span",{className:"truncate",children:I.pro.name})]}),h.jsx("td",{className:"p-4 text-center text-slate-600",children:I.count}),h.jsx("td",{className:"p-4 text-right font-bold text-green-600",children:Je.currency(I.commissionAmount)})]},I.pro.id))})]})})]}),h.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm flex flex-col",children:[h.jsxs("div",{className:"p-5 border-b border-slate-100 bg-slate-50",children:[h.jsxs("h3",{className:"font-bold text-slate-900 text-lg flex items-center gap-2",children:[h.jsx(Zh,{size:20,className:"text-indigo-500"})," Servios Populares"]}),h.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Ranking por volume de agendamentos."})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left text-sm",children:[h.jsx("thead",{className:"bg-white text-slate-500 font-medium border-b border-slate-100",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-4",children:"Servio"}),h.jsx("th",{className:"p-4 text-center",children:"Agendamentos"}),h.jsx("th",{className:"p-4 text-right",children:"Receita"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:ee.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:3,className:"p-6 text-center text-slate-400",children:"Sem dados neste perodo."})}):ee.slice(0,5).map((I,A)=>h.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[h.jsxs("td",{className:"p-4 font-bold text-slate-900 flex items-center gap-2",children:[h.jsx("div",{className:`p-1.5 rounded-lg text-xs font-bold w-6 h-6 flex items-center justify-center ${A===0?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,children:A+1}),h.jsx("span",{className:"truncate",children:I.service.name})]}),h.jsx("td",{className:"p-4 text-center font-medium",children:h.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded text-slate-700",children:I.count})}),h.jsx("td",{className:"p-4 text-right font-bold text-slate-700",children:Je.currency(I.revenue)})]},I.service.id))})]})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-900 text-lg mb-4",children:"Extrato de Movimentaes"}),h.jsx("div",{className:"space-y-2",children:C.length===0?h.jsx("p",{className:"text-slate-500 text-sm",children:"Sem movimentaes neste ms."}):C.map(I=>h.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-slate-200 rounded-xl hover:shadow-sm transition",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg ${I.type==="INCOME"?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-600"}`,children:I.type==="INCOME"?h.jsx(Xh,{size:20}):h.jsx(Rl,{size:20})}),h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-slate-900",children:I.description}),h.jsxs("p",{className:"text-xs text-slate-400 uppercase tracking-wider",children:[I.date.split("-").reverse().join("/"),"  ",I.category]})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("span",{className:`block font-bold ${I.type==="INCOME"?"text-emerald-600":"text-red-600"}`,children:[I.type==="INCOME"?"+":"-"," ",Je.currency(I.amount)]}),I.paymentMethodId&&h.jsx("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded inline-block mt-1",children:R(I.paymentMethodId)}),I.category==="PACKAGE_USAGE"&&h.jsx("span",{className:"text-xs text-indigo-500 bg-indigo-50 px-2 py-0.5 rounded inline-block mt-1 ml-2",children:"Pacote"})]})]},I.id))})]})]})},Yy=({currentPage:i,onPageChange:r,navItems:n,user:o,onLogout:l,sidebarOpen:u,onSidebarToggle:d,children:m})=>h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[h.jsxs("aside",{className:`fixed left-0 top-0 z-50 h-screen w-64 bg-gradient-to-b from-slate-900 to-slate-800 border-r border-slate-700 transition-all duration-300 transform ${u?"translate-x-0":"-translate-x-full"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-slate-700",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-rose-400 to-pink-600 rounded-lg flex items-center justify-center",children:h.jsx(pu,{size:24,className:"text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h1",{className:"text-xl font-bold text-white",children:"AgendaBeleza"}),h.jsx("p",{className:"text-xs text-slate-400",children:"Admin Panel"})]})]}),h.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:n.map(p=>h.jsxs("button",{onClick:()=>{r(p.id),window.innerWidth<768&&d()},className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 text-left font-medium ${i===p.id?"bg-gradient-to-r from-rose-500 to-pink-600 text-white shadow-lg shadow-rose-500/50":"text-slate-300 hover:bg-slate-700/50 hover:text-white"}`,children:[p.icon,h.jsx("span",{children:p.label})]},p.id))}),h.jsxs("div",{className:"border-t border-slate-700 p-4 space-y-4",children:[o&&h.jsxs("div",{className:"px-4 py-3 bg-slate-700/30 rounded-lg",children:[h.jsx("p",{className:"text-xs text-slate-400",children:"Usurio logado"}),h.jsx("p",{className:"text-sm font-semibold text-white truncate",children:o.name})]}),h.jsxs("button",{onClick:l,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all duration-200 font-medium",children:[h.jsx(sp,{size:20}),h.jsx("span",{children:"Sair"})]})]})]}),h.jsxs("div",{className:`transition-all duration-300 ${u?"lg:ml-64":""}`,children:[h.jsx("header",{className:"sticky top-0 z-40 bg-slate-800/95 backdrop-blur border-b border-slate-700",children:h.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[h.jsx("button",{onClick:d,className:"p-2 hover:bg-slate-700 rounded-lg text-slate-300 transition",children:u?h.jsx(gu,{size:24}):h.jsx(cy,{size:24})}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-sm text-slate-400",children:"Bem-vindo(a),"}),h.jsx("p",{className:"font-semibold text-white",children:o?.name||"Usurio"})]}),h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-rose-400 to-pink-600 rounded-full flex items-center justify-center text-white font-bold",children:o?.name?.charAt(0).toUpperCase()||"A"})]})]})}),h.jsx("main",{className:"min-h-[calc(100vh-80px)] p-6",children:h.jsx("div",{className:"max-w-7xl mx-auto",children:m})})]}),u&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:d})]}),Xy=({onAdminClick:i,onClientClick:r})=>{const[n,o]=H.useState(!1);return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50 to-pink-50 flex items-center justify-center p-4 relative overflow-hidden",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[h.jsx("div",{className:"absolute -top-32 -right-32 w-96 h-96 bg-gradient-to-br from-purple-200/30 to-pink-200/20 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute -bottom-32 -left-32 w-96 h-96 bg-gradient-to-tr from-rose-200/30 to-orange-200/20 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute top-1/2 left-1/2 w-80 h-80 bg-gradient-to-br from-amber-100/20 to-purple-100/20 rounded-full blur-3xl"})]}),h.jsxs("div",{className:"relative w-full max-w-2xl z-10",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("div",{className:"inline-block mb-8",children:h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-purple-300 via-pink-300 to-rose-300 rounded-full blur-lg opacity-60"}),h.jsx("div",{className:"relative inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-purple-500 via-pink-500 to-rose-500 rounded-full shadow-2xl",children:h.jsx(pu,{className:"w-12 h-12 text-white"})})]})}),h.jsxs("h1",{className:"text-6xl md:text-7xl font-light tracking-wide text-gray-900 mb-2",children:["Agenda",h.jsx("span",{className:"font-bold bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600 bg-clip-text text-transparent",children:"Beleza"})]}),h.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-purple-400 to-rose-400 mx-auto mb-6 rounded-full"}),h.jsx("p",{className:"text-lg text-gray-600 font-light tracking-wide",children:"Experincia Premium em Beleza e Bem-estar"})]}),h.jsx("div",{className:"mb-8 group",children:h.jsxs("button",{onClick:r,className:"w-full relative bg-white rounded-3xl p-8 md:p-12 shadow-sm hover:shadow-2xl transition-all duration-500 overflow-hidden border border-purple-100/50 hover:border-purple-200",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-50/50 via-pink-50/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),h.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-purple-100/40 to-pink-100/20 rounded-full blur-2xl -mr-16 -mt-16 group-hover:scale-125 transition-transform duration-500"}),h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-purple-100 to-pink-100 mb-6 group-hover:scale-110 transition-transform duration-300",children:h.jsx(ay,{className:"w-8 h-8 text-rose-500"})}),h.jsxs("h2",{className:"text-4xl font-light text-gray-900 mb-3",children:["Seu ",h.jsx("span",{className:"font-semibold bg-gradient-to-r from-purple-600 to-rose-600 bg-clip-text text-transparent",children:"Momento de Beleza"})]}),h.jsx("p",{className:"text-gray-600 text-lg font-light mb-8 leading-relaxed",children:"Agende seus servios de forma elegante e rpida. Escolha entre profissionais especializados e aproveite ofertas exclusivas."}),h.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-2xl font-semibold text-purple-600 mb-1",children:"12+"}),h.jsx("p",{className:"text-sm text-gray-600 font-light",children:"Servios"})]}),h.jsxs("div",{className:"text-center border-l border-r border-gray-200",children:[h.jsx("p",{className:"text-2xl font-semibold text-pink-600 mb-1",children:"8+"}),h.jsx("p",{className:"text-sm text-gray-600 font-light",children:"Profissionais"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-2xl font-semibold text-rose-600 mb-1",children:"5"}),h.jsx("p",{className:"text-sm text-gray-600 font-light",children:"Avaliao"})]})]}),h.jsxs("div",{className:"w-full py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600 text-white font-semibold rounded-2xl hover:shadow-lg hover:shadow-purple-300/50 transition-all duration-300 text-lg group/btn overflow-hidden relative",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-700 via-pink-700 to-rose-700 opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"}),h.jsxs("span",{className:"relative flex items-center justify-center gap-2",children:["Agendar Agora ",h.jsx("span",{className:"text-xl",children:""})]})]})]})]})}),h.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[h.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"}),h.jsx("p",{className:"text-gray-500 text-sm font-light",children:"ou"}),h.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("button",{onClick:()=>o(!n),className:"text-gray-400 hover:text-gray-600 text-xs transition-colors font-light tracking-widest uppercase",children:n?"":""}),n&&h.jsx("div",{className:"mt-6 animate-fade-in",children:h.jsx("button",{onClick:i,className:"px-8 py-2 bg-gray-900 hover:bg-gray-800 text-white font-light rounded-xl transition-all duration-300 text-sm tracking-wide",children:"Acesso Admin"})})]}),h.jsxs("div",{className:"mt-16 text-center",children:[h.jsx("p",{className:"text-gray-500 text-xs font-light tracking-widest uppercase mb-4",children:"Confiana e Qualidade"}),h.jsxs("div",{className:"flex justify-center gap-8 mb-8",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-xl font-semibold text-gray-800",children:"100%"}),h.jsx("p",{className:"text-xs text-gray-600 font-light",children:"Seguro"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-xl font-semibold text-gray-800",children:"24/7"}),h.jsx("p",{className:"text-xs text-gray-600 font-light",children:"Disponvel"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-xl font-semibold text-gray-800",children:""}),h.jsx("p",{className:"text-xs text-gray-600 font-light",children:"Satisfao"})]})]}),h.jsx("p",{className:"text-gray-500 text-xs font-light",children:" 2025 AgendaBeleza  Premium Beauty Scheduling"})]})]})]})},Zy=({onLoginSuccess:i})=>{const[r,n]=H.useState("admin@agendabeleza.com"),[o,l]=H.useState("admin123"),[u,d]=H.useState(""),[m,p]=H.useState(!1),v=async y=>{y.preventDefault(),d(""),p(!0);try{r==="admin@agendabeleza.com"&&o==="admin123"?i({id:"admin-001",name:"Administrador",email:r,role:"admin",phone:"(11) 9999-9999"}):d("Email ou senha incorretos")}catch{d("Erro ao conectar. Tente novamente.")}finally{p(!1)}};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[h.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-rose-500/10 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-pink-500/10 rounded-full blur-3xl"})]}),h.jsx("div",{className:"relative w-full max-w-md",children:h.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-xl border border-slate-700 rounded-2xl shadow-2xl p-8",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-rose-400 to-pink-600 rounded-full mb-4",children:h.jsx(tf,{className:"w-8 h-8 text-white"})}),h.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"AgendaBeleza"}),h.jsx("p",{className:"text-slate-400",children:"Painel Administrativo"})]}),u&&h.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-3",children:[h.jsx(So,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-red-400",children:u})]}),h.jsxs("form",{onSubmit:v,className:"space-y-5",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-300 mb-2",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(fu,{className:"absolute left-3 top-3 w-5 h-5 text-slate-500"}),h.jsx("input",{id:"email",type:"email",value:r,onChange:y=>n(y.target.value),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg pl-10 pr-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-rose-500/50 focus:border-rose-500/50 transition",placeholder:"admin@agendabeleza.com",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Senha"}),h.jsxs("div",{className:"relative",children:[h.jsx(tf,{className:"absolute left-3 top-3 w-5 h-5 text-slate-500"}),h.jsx("input",{id:"password",type:"password",value:o,onChange:y=>l(y.target.value),className:"w-full bg-slate-700/50 border border-slate-600 rounded-lg pl-10 pr-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-rose-500/50 focus:border-rose-500/50 transition",placeholder:"Sua senha",required:!0})]})]}),h.jsx("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 disabled:from-slate-600 disabled:to-slate-700 text-white font-semibold py-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 mt-6",children:m?h.jsxs(h.Fragment,{children:[h.jsx(np,{className:"w-5 h-5 animate-spin"}),"Conectando..."]}):"Entrar"})]}),h.jsxs("div",{className:"mt-6 p-4 bg-slate-700/30 rounded-lg border border-slate-600/50",children:[h.jsx("p",{className:"text-xs text-slate-400 mb-2 font-semibold",children:"Credenciais de Demonstrao:"}),h.jsx("p",{className:"text-xs text-slate-400",children:" admin@agendabeleza.com"}),h.jsx("p",{className:"text-xs text-slate-400",children:" admin123"})]})]})})]})},ew=({onLoginSuccess:i,onBack:r})=>{const[n,o]=H.useState(""),[l,u]=H.useState(""),[d,m]=H.useState(""),[p,v]=H.useState(!1),y=async x=>{x.preventDefault(),m(""),v(!0);try{if(n&&l){const k={id:`client-${Date.now()}`,name:l,email:n,role:Vt.CLIENT,phone:"",loyaltyPoints:0};i(k)}else m("Preencha todos os campos")}catch{m("Erro ao conectar. Tente novamente.")}finally{v(!1)}};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:h.jsxs("div",{className:"w-full max-w-md",children:[h.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 mb-8 transition",children:[h.jsx(tp,{className:"w-5 h-5"}),h.jsx("span",{children:"Voltar"})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-slate-200",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-rose-400 to-pink-600 rounded-full mb-4",children:h.jsx(Zl,{className:"w-8 h-8 text-white"})}),h.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"AgendaBeleza"}),h.jsx("p",{className:"text-slate-600",children:"Faa seu agendamento"})]}),d&&h.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[h.jsx(So,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),h.jsx("p",{className:"text-sm text-red-700",children:d})]}),h.jsxs("form",{onSubmit:y,className:"space-y-5",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome Completo"}),h.jsxs("div",{className:"relative",children:[h.jsx(Zl,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),h.jsx("input",{id:"name",type:"text",value:l,onChange:x=>u(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg pl-10 pr-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-rose-500/30 focus:border-rose-500 transition",placeholder:"Seu nome completo",required:!0})]})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(fu,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400"}),h.jsx("input",{id:"email",type:"email",value:n,onChange:x=>o(x.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-lg pl-10 pr-4 py-3 text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-rose-500/30 focus:border-rose-500 transition",placeholder:"seu.email@exemplo.com",required:!0})]})]}),h.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-rose-500 to-pink-600 hover:from-rose-600 hover:to-pink-700 disabled:from-slate-400 disabled:to-slate-500 text-white font-semibold py-3 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 mt-6",children:p?h.jsxs(h.Fragment,{children:[h.jsx(np,{className:"w-5 h-5 animate-spin"}),"Processando..."]}):"Continuar"})]}),h.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:h.jsx("p",{className:"text-xs text-blue-700",children:" Voc ser capaz de agendar seus servios de beleza aps preencher seus dados."})})]})]})})},tw=[{id:"dashboard",label:"Dashboard",icon:h.jsx(uy,{size:20})},{id:"services",label:"Servios",icon:h.jsx(ap,{size:20})},{id:"team",label:"Equipe",icon:h.jsx(wo,{size:20})},{id:"financial",label:"Financeiro",icon:h.jsx(Ms,{size:20})}],rw=()=>{const{user:i,isLoggedIn:r,login:n,logout:o}=ty(),[l,u]=Xr.useState("booking"),[d,m]=Xr.useState("choice"),[p,v]=Xr.useState(!0);if(!r){if(d==="choice")return h.jsx(Xy,{onAdminClick:()=>m("admin-login"),onClientClick:()=>m("client-login")});if(d==="admin-login")return h.jsx(Zy,{onLoginSuccess:x=>{n(x),u("dashboard")}});if(d==="client-login")return h.jsx(ew,{onLoginSuccess:x=>{n(x),u("booking")},onBack:()=>m("choice")})}if(i?.role===Vt.CLIENT)return h.jsx(Vy,{});const y=()=>{switch(l){case"dashboard":return h.jsx(sf,{});case"services":return h.jsx(Jy,{});case"team":return h.jsx(Wy,{});case"financial":return h.jsx(Qy,{});default:return h.jsx(sf,{})}};return h.jsx(Yy,{currentPage:l,onPageChange:u,navItems:tw,user:i,onLogout:()=>{o(),m("choice")},sidebarOpen:p,onSidebarToggle:()=>v(!p),children:y()})};_g.createRoot(document.getElementById("root")).render(h.jsx(Xr.StrictMode,{children:h.jsx(qy,{children:h.jsx(rw,{})})}));
